<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="d1029167179320d8b6d70b11c3d01bd3" category="list-text">Ansible 控制节点的要求：</block>
  <block id="5c263f30899f93ff7ccd457ad3eb956f" category="list-text">安装了以下软件包的 RHEL/CentOS 机器：</block>
  <block id="ca60b3698dd3d27a5f91e4dc0a1a2546" category="list-text">Python3</block>
  <block id="4ce3ea126bb844d4f8c4ce1a65cbe3ae" category="list-text">Pip3</block>
  <block id="881cbd1ce3fdb52f73a82f8674a2a364" category="list-text">Ansible（版本高于 2.10.0）</block>
  <block id="0bcc70105ad279503e31fe7b3f47b665" category="list-text">Git</block>
  <block id="7b643b0eef9cf1199195fa05b77fc3c8" category="paragraph">如果您有一台新的 RHEL/CentOS 机器，但没有安装上述要求，请按照以下步骤将该机器设置为 Ansible 控制节点：</block>
  <block id="d2052f202108defaf6afc7831ba59362" category="list-text">为 RHEL-8/RHEL-7 启用 Ansible 存储库</block>
  <block id="61fbc2f21db84f17551fda6893429d16" category="list-text">对于 RHEL-8（以 root 身份运行以下命令）</block>
  <block id="77cd42f765e6b40764459a64a979f90c" category="list-text">对于 RHEL-7（以 root 身份运行以下命令）</block>
  <block id="675f82a779038c3f679b04bc0aadca1a" category="list-text">将以下内容粘贴到终端中</block>
  <block id="9ced761647f5d80fe615526ffff63937" category="list-text">安装了以下软件包的 Ubuntu/Debian 机器：</block>
  <block id="6e3d8a0ff7934b777031953fe936bac8" category="paragraph">如果您有一台新的 Ubuntu/Debian 机器，但没有安装上述要求，请按照以下步骤将该机器设置为 Ansible 控制节点：</block>
  <block id="56ee829a33ac57c3b6d427e35b3b2e86" category="list-text">将下面的内容粘贴到终端中</block>
  <block id="169210ceac9b94f0632cd1182961e949" category="open-title">CVO单节点部署</block>
  <block id="fe86efdcec6e779b5ef15f62d8f2bc90" category="paragraph-title">用于在 AWS 上部署NetApp CVO（单节点实例）的 Terraform 配置文件</block>
  <block id="610db6bf34b03f7873afe01d4eec8e58" category="paragraph">本节包含各种 Terraform 配置文件，用于在 AWS（Amazon Web Services）上部署/配置单节点NetApp CVO（Cloud Volumes ONTAP）。</block>
  <block id="4a537f87e89ac00b1276af84fa6f2da9" category="paragraph">Terraform 文档：<block ref="e2ea72ce6afb985e72624e098135e8e1" category="inline-link-rx"></block></block>
  <block id="8c4271e6faf2cea4cfc8e5b7108d8ee9" category="paragraph-title">操作步骤</block>
  <block id="c69eb42cd732c6d937af674afc73ba24" category="paragraph">为了运行模板：</block>
  <block id="0b2fc5bb85de930f6b1d839951f8df6d" category="list-text">克隆存储库。</block>
  <block id="6f5cc42a3e67b7edb3a2d4b86ebfae01" category="list-text">导航到所需的文件夹</block>
  <block id="71046100fbc383dd8cd1cdd6160f6d6d" category="list-text">从 CLI 配置 AWS 凭证。</block>
  <block id="4a4f9b0378c89fa21da9e5528c8a7f47" category="list-text">AWS 访问密钥 ID [无]：accesskey</block>
  <block id="6bbb2ea6e07d16e69748545bf2ee6a6d" category="list-text">AWS 秘密访问密钥 [无]：secretkey</block>
  <block id="7a31be9d48b53cd82a7160af0cd58fbe" category="list-text">默认区域名称 [无]：us-west-2</block>
  <block id="276bf14207394167e2ed4e3eed448680" category="list-text">默认输出格式[无]: json</block>
  <block id="dd08960caafad89635926c55a0efd3a4" category="list-text">更新变量值<block ref="138255b51837a8bb57dce615f0b58218" prefix=" " category="inline-code"></block></block>
  <block id="e962d97debd0a377828855d79b5ccf66" category="admonition">您可以通过将变量“aws_connector_deploy_bool”值设置为 true/false 来选择部署连接器。</block>
  <block id="88cefa0997a2272107223ee543b114db" category="list-text">初始化 Terraform 存储库以安装所有先决条件并准备部署。</block>
  <block id="046372e4315eccae02c5be2caaac1ac5" category="list-text">使用 terraform verify 命令验证 terraform 文件。</block>
  <block id="144930ffd88cabf8795c7d4a6698e4ac" category="list-text">对配置进行试运行，以预览部署预期的所有更改。</block>
  <block id="50a325adfbe874e5e14b044244efa49e" category="list-text">运行部署</block>
  <block id="3125f7b5833c80fbd03966accb540bf8" category="paragraph">删除部署</block>
  <block id="4e91e39d32f2399e7c90059f4eea5684" category="paragraph-title">食谱：</block>
  <block id="58c9aaf9cf3d4d0215afe012b77aa1bc" category="paragraph"><block ref="edf21d7ecb364e8210ddd3dfaeca6fbf" prefix="" category="inline-code"></block></block>
  <block id="251861170f071d1ebe67b948f5026905" category="paragraph">用于 CVO 部署的NetApp AWS 连接器实例的 Terraform 变量。</block>
  <block id="496ee322ba138fdbc777e5ab2e30145e" category="cell">*姓名*</block>
  <block id="7464a7978b1ad9e7f36e5f0181e97eb5" category="cell">*类型*</block>
  <block id="f14c276c07197ebef1394a5a219087a1" category="cell">*描述*</block>
  <block id="22d8f94f4a088cb8d7c83ec5f44a03af" category="cell">*aws_connector_deploy_bool*</block>
  <block id="c26f15e86e3de4c398a8273272aba034" category="cell">布尔值</block>
  <block id="95ab4e4a16c4f585ede4d3c63167c1ee" category="cell">（必需）检查连接器部署。</block>
  <block id="e15fa495ec49ba53e0ba45d555c24027" category="cell">*aws_connector_name*</block>
  <block id="27118326006d3829667a400ad23d5d98" category="cell">字符串</block>
  <block id="5548283861d04af602b7193306751df7" category="cell">（必需）云管理器连接器的名称。</block>
  <block id="8c3a0cf46a98725e12d666e2e13dc06d" category="cell">*aws_connector_region*</block>
  <block id="efb4f51f6b08f54633b02a06b94210f2" category="cell">（必需）将创建 Cloud Manager Connector 的区域。</block>
  <block id="358040941579fe064f522f5b1eac2a33" category="cell">*aws_connector_key_name*</block>
  <block id="5c2f4db5972ecd2062c5f449f09c661f" category="cell">（必需）用于连接器实例的密钥对的名称。</block>
  <block id="0e46676177a5b007dfeefb6ada2b65af" category="cell">*aws_connector_company*</block>
  <block id="a7f1f5d73f372170ea283996e464af43" category="cell">（必填）用户的公司名称。</block>
  <block id="9b9081642589bb52bb20161632edc5a6" category="cell">*aws_connector_instance_type*</block>
  <block id="ddd1c9b22f94863b3de9a1b551188553" category="cell">（必需）实例的类型（例如，t3.xlarge）。至少需要 4 个 CPU 和 16 GB 内存。</block>
  <block id="f8a700002db36fadde1ab9526f2cf8c3" category="cell">*aws_connector_subnet_id*</block>
  <block id="76788966b37b9b0df0b8ed78ad67eea9" category="cell">（必需）实例的子网 ID。</block>
  <block id="fafb089eb14a5fe730cfadfd7bed4b4f" category="cell">*aws_connector_security_group_id*</block>
  <block id="728aafab2377ad85ce4ae3f6a4b3dd33" category="cell">（必填）实例的安全组ID，多个安全组可以用“，”分隔。</block>
  <block id="52df26383575ad500acf38cc3df88e36" category="cell">*aws_connector_iam_instance_profile_name*</block>
  <block id="59409115b42184ffa519bd9aa24b6816" category="cell">（必需）连接器的实例配置文件的名称。</block>
  <block id="8953ca5d18d5f2c4a85fdfe10d30a002" category="cell">*aws_connector_account_id*</block>
  <block id="bba7484e58b18e8edafdbe619961f73f" category="cell">（可选）连接器将与之关联的NetApp帐户 ID。如果未提供，Cloud Manager 将使用第一个帐户。如果不存在帐户，Cloud Manager 会创建一个新帐户。您可以在 Cloud Manager 的帐户选项卡中找到帐户 ID，网址为<block ref="06d3516203a7f4d79163d93dd508b8c0" category="inline-link-rx"></block>。</block>
  <block id="1918f44c178eed586b6fa7d6739af317" category="cell">*aws_connector_public_ip_bool*</block>
  <block id="eb86f482301303a1c0f2f5219289a73c" category="cell">（可选）指示是否将公共 IP 地址与实例关联。如果未提供，则关联将根据子网的配置完成。</block>
  <block id="9fb01bbff06d549bce01928fa2f7784c" category="paragraph"><block ref="2642a0976dba96af7529d6e1d27bff5f" prefix="" category="inline-code"></block></block>
  <block id="d166b6e004666a5a8daa6db1c3cf1a13" category="paragraph">单个NetApp CVO 实例的 Terraform 变量。</block>
  <block id="19afa3a1ac092d450f21236f1973c705" category="cell">*cvo_名称*</block>
  <block id="59935a520838700b451a3757f31fd4ac" category="cell">（必需） Cloud Volumes ONTAP工作环境的名称。</block>
  <block id="ff855355eebbbfbd54d2734a61c43fd4" category="cell">*cvo_区域*</block>
  <block id="b50ada32f992aba9f7055658a79132f2" category="cell">（必需）将创建工作环境的区域。</block>
  <block id="0e9b90f836062c3007935370ef18245f" category="cell">*cvo_子网ID*</block>
  <block id="6c7cb9b4623284c101253ed002625e53" category="cell">（必需）将创建工作环境的子网 ID。</block>
  <block id="a99ec45accc4987a7eb2eff5219f96b3" category="cell">*cvo_vpc_id*</block>
  <block id="a179f6c6854fc89c6f118f4d8c201cad" category="cell">（可选）将创建工作环境的 VPC ID。如果未提供此参数，则将使用提供的子网 ID 来计算 VPC。</block>
  <block id="26ff13994e5fbad1e11fc231bc73a5b6" category="cell">*cvo_svm_密码*</block>
  <block id="c82a889260bdc28c6136ddc6639a4f2e" category="cell">（必需） Cloud Volumes ONTAP的管理员密码。</block>
  <block id="3815749b59fbccfa0077df4f90c8aa1e" category="cell">*cvo_writing_speed_state*</block>
  <block id="e382698236dcb1567d375a4be3b12c2f" category="cell">（可选） Cloud Volumes ONTAP的写入速度设置：['NORMAL','HIGH']。默认值为“正常”。</block>
  <block id="197b0ef64aabdc02a240f3f472eb4da2" category="open-title">CVO HA 部署</block>
  <block id="93726ca0be25ac3bef0f54da1e20751c" category="paragraph-title">用于在 AWS 上部署NetApp CVO（HA 对）的 Terraform 配置文件</block>
  <block id="a082a9d97b4465f73e12cde3444a5296" category="paragraph">本节包含各种 Terraform 配置文件，用于在 AWS（Amazon Web Services）上以高可用性对形式部署/配置NetApp CVO（Cloud Volumes ONTAP）。</block>
  <block id="b31736be0fe5e59cc4905aa080c9ab16" category="list-text">更新变量值<block ref="d8fbe289f1062e79a6ecf2cb41d4650c" prefix=" " category="inline-code"></block>。</block>
  <block id="a4472307f162bdf147f02784bf81ab9d" category="cell">（可选）指示是否将公共 IP 地址与实例关联。如果未提供，则关联将根据子网的配置完成。</block>
  <block id="ff8f4d628633e3ceb42dcca91ef2948e" category="paragraph"><block ref="c6f18f9568d343bc6accef19de501a79" prefix="" category="inline-code"></block></block>
  <block id="f7fbe4e66ae4cece99ae14a24f1c44ef" category="paragraph">HA 对中NetApp CVO 实例的 Terraform 变量。</block>
  <block id="018a56af12514193b08f44d59f92fe83" category="cell">*cvo_is_ha*</block>
  <block id="93d83a3a243548e55fb126d283923435" category="cell">（可选）指示工作环境是否为 HA 对 [true，false]。默认值为 false。</block>
  <block id="cea330e4ead03fcfec439b1f44be7c07" category="cell">*cvo_node1_subnet_id*</block>
  <block id="3a0cbf54e2a847cd873a45840f9965f5" category="cell">（必需）将创建第一个节点的子网 ID。</block>
  <block id="d5d3a5e1275b1995e05472c7bfbcb53f" category="cell">*cvo_node2_subnet_id*</block>
  <block id="5691678a4c059b3a4ebad0f4c6bf6bb5" category="cell">（必需）将创建第二个节点的子网 ID。</block>
  <block id="4377aa272f4cf89d4bbd39432ffb3b0e" category="cell">*cvo_failover_mode*</block>
  <block id="9d76030e2a28826bff45ea1dff4d6920" category="cell">（可选）对于 HA，HA 对的故障转移模式：['PrivateIP'，'FloatingIP']。  “PrivateIP”适用于单个可用区域，“FloatingIP”适用于多个可用区域。</block>
  <block id="80c8a57adaed641642cd870951a1d4ed" category="cell">*cvo_mediator_subnet_id*</block>
  <block id="49ef0197555436f78dd87f582e510523" category="cell">（可选）对于 HA，这是中介的子网 ID。</block>
  <block id="3efb524d034b1e223cb9d31a64f9bbc4" category="cell">*cvo_mediator_key_pair_name*</block>
  <block id="224733036290c1421bed8ad8de688956" category="cell">（可选）对于 HA，这是中介实例的密钥对名称。</block>
  <block id="069dcc590a2acf756e6ca7f92d7d8355" category="cell">*cvo_cluster_floating_ip*</block>
  <block id="6325a8aefd56c67fab1d0d83b4cb8a2e" category="cell">（可选）对于 HA FloatingIP，集群管理浮动 IP 地址。</block>
  <block id="618070e07e603612f24fa88a7ab583a8" category="cell">*cvo_data_floating_ip*</block>
  <block id="d8abdbcf87e3308c6a8e731ef574625c" category="cell">（可选）对于 HA FloatingIP，数据浮动 IP 地址。</block>
  <block id="f115ec8cf476ea0198405ca27346e423" category="cell">*cvo_data_floating_ip2*</block>
  <block id="754296c6c8a8cf70377730f6f126f24a" category="cell">*cvo_svm_floating_ip*</block>
  <block id="797d132b963a11de245eae1725911bfe" category="cell">（可选）对于 HA FloatingIP，SVM 管理浮动 IP 地址。</block>
  <block id="418ba9c064c1fb64b11195c729d6a8b1" category="cell">*cvo_route_table_ids*</block>
  <block id="4ee29ca12c7d126654bd0e5275de6135" category="cell">列表</block>
  <block id="671a800e3791f7531a319e8b81e97c44" category="cell">（可选）对于 HA FloatingIP，将使用浮动 IP 更新的路由表 ID 列表。</block>
  <block id="5d4a46c0a4567f819ba5935256b18297" category="open-title">FSx 部署</block>
  <block id="99661bfb937ca0c49c78878d8d2b0e77" category="paragraph-title">用于在 AWS 上部署NetApp ONTAP FSx 的 Terraform 配置文件</block>
  <block id="d43e39ffb05b35b72664b10dd8b8eb09" category="paragraph">本节包含用于在 AWS（Amazon Web Services）上部署/配置NetApp ONTAP FSx 的各种 Terraform 配置文件。</block>
  <block id="171cc8e4954beec5176905189f71a708" category="list-text">默认输出格式[无]：</block>
  <block id="cbc2cee2851524f322f8d71e55d32a64" category="list-text">更新变量值<block ref="15f7e426a035ec7faf6715523364f143" prefix=" " category="inline-code"></block></block>
  <block id="1538b268d8f3b010dea63370c1a65935" category="paragraph-title">食谱：</block>
  <block id="05bf1719b762d4d80bcb0e545b3db1d2" category="paragraph">NetApp AWS 连接器实例的 Terraform 变量。</block>
  <block id="618716470abe9536903f3c6781c4ac81" category="paragraph"><block ref="8fa643108c81bb359c39d110fa732b76" prefix="" category="inline-code"></block></block>
  <block id="5869d95322d3c435fd999596f0cf2303" category="paragraph">NetApp ONTAP FSx 实例的 Terraform 变量。</block>
  <block id="c64f672849455d583204c525f5ea39ad" category="cell">*fsx_名称*</block>
  <block id="af87bb54b839634f865f7bd7e2be203a" category="cell">*fsx_区域*</block>
  <block id="02a52209be6996bc01fd629ac6a5b472" category="cell">*fsx_primary_subnet_id*</block>
  <block id="5dcd0d05819e117f52d439bebd6d2b42" category="cell">（必需）将创建工作环境的主子网 ID。</block>
  <block id="0531247f461759a809214a03ea2f5f74" category="cell">*fsx_secondary_subnet_id*</block>
  <block id="b2184e9a131868dbc2332805652a0f02" category="cell">（必需）将创建工作环境的辅助子网 ID。</block>
  <block id="a333cc205644905efae2cf71519da619" category="cell">*fsx_account_id*</block>
  <block id="323c4fdc16ad2dd9e846afbcd4b69b10" category="cell">（必需）FSx 实例将与之关联的NetApp帐户 ID。如果未提供，Cloud Manager 将使用第一个帐户。如果不存在帐户，Cloud Manager 会创建一个新帐户。您可以在 Cloud Manager 的帐户选项卡中找到帐户 ID，网址为<block ref="06d3516203a7f4d79163d93dd508b8c0" category="inline-link-rx"></block>。</block>
  <block id="7355bef79bff8e33a86af33fe4dcca8e" category="cell">*fsx_workspace_id*</block>
  <block id="97377fef3f33f9c8d1fb21c0d81cdf92" category="cell">（必填）工作环境的云管理器工作区的 ID。</block>
  <block id="ab77fdca353b13807c947d554712d8eb" category="cell">*fsx_admin_密码*</block>
  <block id="c4bd49cb0034d697fd71cae233c3966c" category="cell">*fsx_throughput_capacity*</block>
  <block id="e1ae53e33bf94a13f7d73cf885059ea6" category="cell">（可选）吞吐量的能力。</block>
  <block id="011dda542c81d29bda593f0cf6fafdfa" category="cell">*fsx_storage_capacity_size*</block>
  <block id="16b74c686b794890297f7ff7a9c98c9f" category="cell">（可选）第一个数据聚合的 EBS 卷大小。对于 GB，单位可以是：[100 或 500]。对于 TB，单位可以是：[1,2,4,8,16]。默认值为“1”</block>
  <block id="da7d44d0ad606f586a3b1f567c8502d6" category="cell">fsx_storage_capacity_size_unit（fsx_storage_capacity_size_unit）</block>
  <block id="5ec54d3d7d1db9fbf915daed12667b29" category="cell">（可选）['GB' 或 'TB']。默认值为“TB”。</block>
  <block id="07cc738168b47a86b740bc01e210b442" category="cell">*fsx_cloudmanager_aws_credential_name*</block>
  <block id="48dbb4d925fe4a46f28c0a8466a2f628" category="cell">（必需）AWS Credentials 帐户名称。</block>
  <block id="0d6f6c74055e04156e36ddb127070a54" category="open-title">心钠素</block>
  <block id="107933ea485144e916f16cd69884fea6" category="paragraph-title">用于在 Azure 上部署 ANF 卷的 Terraform 配置文件</block>
  <block id="3f5bad999be275e4e9cf0728a13bf09c" category="paragraph">本节包含用于在 Azure 上部署/配置 ANF（Azure Netapp 文件）卷的各种 Terraform 配置文件。</block>
  <block id="61d66a29b98e4203b3fc2ea2884a6c5f" category="paragraph">Terraform 文档：<block ref="745f55dd9f8ecc62d59e6b03ca9efbb7" category="inline-link-rx"></block></block>
  <block id="369baedac810ebc745ed2edf7754972b" category="list-text">登录到您的 Azure CLI（必须安装 Azure CLI）。</block>
  <block id="443ff7602b19f9692863937e763e1ad2" category="list-text">更新变量值<block ref="8c39601b8ab8961ff411cd5068a67f11" prefix=" " category="inline-code"></block>。</block>
  <block id="95f6ca118177fad8a1dd7e7abb74ce56" category="admonition">您可以选择使用现有的 vnet 和子网部署 ANF 卷，方法是将变量“vnet_creation_bool”和“subnet_creation_bool”值设置为 false 并提供“subnet_id_for_anf_vol”。您还可以将这些值设置为 true 并创建新的 vnet 和子网，在这种情况下，子网 ID 将自动从新创建的子网中获取。</block>
  <block id="cb01f53471a55574a36eafb375d9493a" category="paragraph">单个NetApp ANF 卷的 Terraform 变量。</block>
  <block id="98bcef9bf5f44342e688bc29fb3fcbca" category="cell">*az_location*</block>
  <block id="4b05afb76d83065313c3740cd392a5ca" category="cell">（必需）指定资源所在的受支持的 Azure 位置。改变这一点会强制创建新的资源。</block>
  <block id="861c040d5ed0212e4bc2aa4f92a2b861" category="cell">*az_前缀*</block>
  <block id="e6f149d38df85bed35faeca44370c01c" category="cell">（必需）应创建NetApp卷的资源组的名称。改变这一点会强制创建新的资源。</block>
  <block id="7aa7ec2fc803d9041e6dfd5e142dcd23" category="cell">az_vnet_address_space</block>
  <block id="c8b090fd446e4181ed79e8e50bed7b91" category="cell">（必需）新创建的 vnet 用于 ANF 卷部署的地址空间。</block>
  <block id="c5b9420927a71e0bcd6f4c621c66910f" category="cell">az_subnet_address_prefix</block>
  <block id="94c126b468fd9c408abdff2cccd827a4" category="cell">（必需）新创建的 vnet 用于 ANF 卷部署的子网地址前缀。</block>
  <block id="3c3133cb45a10a4ec442a4589636bfe1" category="cell">az_volume_path</block>
  <block id="c8fb8ccec1ede566cac7b410b7623186" category="cell">（必需）卷的唯一文件路径。创建挂载目标时使用。改变这一点会强制创建新的资源。</block>
  <block id="5e51835c1dd28fa3cab3636a6beb8016" category="cell">az_capacity_pool_size</block>
  <block id="a0faef0851b4294c06f2b94bb1cb2044" category="cell">整型</block>
  <block id="0db20ddc31a427cc02802395aa53db7f" category="cell">（必填）容量池大小（以 TB 为单位）。</block>
  <block id="32c4a6ca695ae0fd3f41efe5ab8d3ffc" category="cell">az_vnet_creation_bool</block>
  <block id="27226c864bac7454a8504f8edb15d95b" category="cell">布尔型</block>
  <block id="55a1cc8d235c0ca9bd0cf384e2db1fb2" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>如果您想创建一个新的虚拟网络。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有的虚拟网络。</block>
  <block id="be85fde9f0fcdf86be8ede4b5939a9bf" category="cell">az_subnet_creation_bool</block>
  <block id="4b079d5e017c7403047fbbd37df93368" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>创建新的子网。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有子网。</block>
  <block id="bb74e9c4e24089c59a6af0a7a016b586" category="cell">*az_subnet_id_for_anf_vol*</block>
  <block id="52c0fe6a129fdcf33be82680a15b2d37" category="cell">（必需）如果您决定使用现有子网，请通过设置来提及子网 ID<block ref="1cceaecaa3b91a9f1e23ecb4681ce8af" prefix=" " category="inline-code"></block>为真。如果设置为 false，则保留其默认值。</block>
  <block id="8376cf4b94c63b51d5e0113c299a75a0" category="cell">*az_netapp_pool_service_level*</block>
  <block id="061fce6317efb41fcda88b5333cb0cc2" category="cell">（必需）文件系统的目标性能。有效值包括<block ref="8d5e7e72f12067991186cdf3cb7d5d9d" prefix=" " category="inline-code"></block>，<block ref="eb6d8ae6f20283755b339c0dc273988b" prefix=" " category="inline-code"></block> ， 或者<block ref="7057376a419b3334cc7b8b7a9f064abb" prefix=" " category="inline-code"></block>。</block>
  <block id="cd145efde532a4a27c5b6687f4b5f1c0" category="cell">az_netapp_vol_service_level</block>
  <block id="d655c67b837d5b3363d556955802b670" category="cell">az_netapp_vol_协议</block>
  <block id="9e2a44ac250e0b60bce77fba70ebfd70" category="cell">（可选）以列表形式表示的目标卷协议。支持的单值包括<block ref="c6546b53840ec8245dd4d4d70fcdbc26" prefix=" " category="inline-code"></block>，<block ref="5b12ee0369243579651edca43ff65c85" prefix=" " category="inline-code"></block> ， 或者<block ref="de841868c2911da76b8ae2da9fa3166d" prefix=" " category="inline-code"></block>。如果未定义参数，则默认为<block ref="5b12ee0369243579651edca43ff65c85" prefix=" " category="inline-code"></block>。更改此设置将强制创建新资源，并且数据将会丢失。</block>
  <block id="cac15590a2775bfeaf5f70c36186a840" category="cell">*az_netapp_vol_security_style*</block>
  <block id="80f43a817b6716a1a82af5fe18f178cd" category="cell">（可选）卷安全样式，可接受的值为<block ref="6ec1bd1ea6a5d67a63b20c8f6172bddd" prefix=" " category="inline-code"></block>或者<block ref="0984cd69051e659a6125cdff72c4996d" prefix=" " category="inline-code"></block>。如果未提供，则默认创建单协议卷<block ref="6ec1bd1ea6a5d67a63b20c8f6172bddd" prefix=" " category="inline-code"></block>如果是<block ref="5b12ee0369243579651edca43ff65c85" prefix=" " category="inline-code"></block>或者<block ref="de841868c2911da76b8ae2da9fa3166d" prefix=" " category="inline-code"></block>音量，如果<block ref="c6546b53840ec8245dd4d4d70fcdbc26" prefix=" " category="inline-code"></block>，它将默认为<block ref="0984cd69051e659a6125cdff72c4996d" prefix=" " category="inline-code"></block>。在双协议卷中，如果未提供，则其值将为<block ref="0984cd69051e659a6125cdff72c4996d" prefix=" " category="inline-code"></block>。</block>
  <block id="b095a46d015fe5581a97472eedb3e645" category="cell">az_netapp_vol_storage_quota</block>
  <block id="aaff31e02103a31c6f08943798a84789" category="cell">（必填）文件系统允许的最大存储配额（以 GB 为单位）。</block>
  <block id="09df85b7e8c18a512dffc54b2483e9fb" category="admonition">根据建议，此脚本使用<block ref="ec8ffbcaedee6a818da774b22840c665" prefix=" " category="inline-code"></block>生命周期参数来减轻配置文件中意外丢失数据的可能性。有关<block ref="ec8ffbcaedee6a818da774b22840c665" prefix=" " category="inline-code"></block>生命周期参数请参阅 Terraform 文档：<block ref="0958f540126f250f4289117b6cacbdab" category="inline-link-rx"></block> 。</block>
  <block id="7bc40f4d4f846e8c7177d752ac52b775" category="open-title">ANF 数据保护</block>
  <block id="c2d6144ea47815bb9e1c4e09c0918486" category="paragraph-title">用于在 Azure 上部署具有数据保护的 ANF 卷的 Terraform 配置文件</block>
  <block id="56978261632f1f36ad5f3f3ea6d2cb4b" category="paragraph">本节包含各种 Terraform 配置文件，用于在 Azure 上部署/配置具有数据保护的 ANF（Azure Netapp 文件）卷。</block>
  <block id="9b3e184737a0a337479622611ba072b7" category="list-text">更新变量值<block ref="7faa6da7e229d163db53602f424f1f82" prefix=" " category="inline-code"></block>。</block>
  <block id="bf052e3d77cd2cde5fa905542df51c46" category="paragraph"><block ref="7bc40f4d4f846e8c7177d752ac52b775" prefix="" category="inline-code"></block></block>
  <block id="c47acd947f63c78f7729c5c176778d53" category="paragraph">启用数据保护的单个 ANF 卷的 Terraform 变量。</block>
  <block id="17745d8782266e5f08c77485447c8727" category="cell">*az_alt_location*</block>
  <block id="3bfeadf4c47a658ca94a6066aee32aaa" category="cell">（必需）将创建辅助卷的 Azure 位置</block>
  <block id="2558355ccfd79f11c2c7771d473c28a9" category="cell">az_vnet_primary_address_space</block>
  <block id="cc551875f8711aaffc6141f504677c0b" category="cell">（必需）新创建的 vnet 用于 ANF 主卷部署的地址空间。</block>
  <block id="ea5f0cd471c631d7531bb7fd3b5bac8a" category="cell">az_vnet_secondary_address_space</block>
  <block id="fffcb59495331e54049ce33d3dcdf943" category="cell">（必需）新创建的 vnet 用于 ANF 辅助卷部署的地址空间。</block>
  <block id="88220764f0745e8a07a6578ee5a34962" category="cell">az_subnet_primary_address_prefix</block>
  <block id="02b00c599f6c249474a4fa82513b5ae3" category="cell">（必需）新创建的 vnet 用于 ANF 主卷部署的子网地址前缀。</block>
  <block id="1bef049d5f330664e35cad0a064c3b9c" category="cell">az_subnet_secondary_address_prefix</block>
  <block id="1b60506e52e47ecc443e5be52dca93d7" category="cell">（必需）新创建的 vnet 用于 ANF 辅助卷部署的子网地址前缀。</block>
  <block id="897362b63a34b0eb8e1453709c1f8403" category="cell">az_volume_path_primary</block>
  <block id="1240d8345e0d2e3e79133040103d900c" category="cell">（必需）主卷的唯一文件路径。创建挂载目标时使用。改变这一点会强制创建新的资源。</block>
  <block id="b9dd6d654f6dd5777451c38ccbb3a90f" category="cell">az_volume_path_secondary</block>
  <block id="2d48913a4e9f87154afa26a5629292ac" category="cell">（必需）辅助卷的唯一文件路径。创建挂载目标时使用。改变这一点会强制创建新的资源。</block>
  <block id="06c1e84417c5bf369b90b26dd5249917" category="cell">az_capacity_pool_size_primary</block>
  <block id="3d618d26614058ac7e5a064cbe202b90" category="cell">az_capacity_pool_size_secondary</block>
  <block id="900391b8f681698a00a1d7681c809eae" category="cell">*az_vnet_primary_creation_bool*</block>
  <block id="ee71ed057be46b5303595075681242b3" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>如果您想为主卷创建一个新的 vnet。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有的虚拟网络。</block>
  <block id="1f3233bfcd515798625102d02489c9c2" category="cell">az_vnet_secondary_creation_bool</block>
  <block id="8a5a92fb6843cb45a9752dac34d8056a" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>如果您想为辅助卷创建一个新的 vnet。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有的虚拟网络。</block>
  <block id="0276da5ab0cbfd3afccac3236ff88906" category="cell">az_subnet_primary_creation_bool</block>
  <block id="ba2f66ccca4d07fb389900a4c72596a7" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>为主卷创建新的子网。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有子网。</block>
  <block id="78a2830c902a8a1eb6bbedc95b8e859d" category="cell">az_subnet_secondary_creation_bool</block>
  <block id="1b869ff43f405cb5056d067f1ce0ea2c" category="cell">（必需）将此布尔值设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>为辅助卷创建新的子网。将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用现有子网。</block>
  <block id="004f2f461ceadcb0d344b03f2f00c53d" category="cell">az_primary_subnet_id_for_anf_vol*</block>
  <block id="387a4516572f71aa24490f3bbfc695ef" category="cell">（必需）如果您决定使用现有子网，请通过设置来提及子网 ID<block ref="4480e01b6ddc0f64d89a995dcbd413f6" prefix=" " category="inline-code"></block>为真。如果设置为 false，则保留其默认值。</block>
  <block id="2e9685846dda27855273fdf064f9e6ab" category="cell">az_secondary_subnet_id_for_anf_vol*</block>
  <block id="bf5c8bfc6d7cc2d5fe6e7931244a30eb" category="cell">（必需）如果您决定使用现有子网，请通过设置来提及子网 ID<block ref="963bc6d7f5ebc59003b8ef8f3f92a02c" prefix=" " category="inline-code"></block>为真。如果设置为 false，则保留其默认值。</block>
  <block id="ac839f935b4bbb6bed9bda28a8e642c6" category="cell">*az_netapp_pool_service_level_primary*</block>
  <block id="8cb34f1d64a5bf358b0d3a349ca5bc2f" category="cell">az_netapp_pool_service_level_secondary</block>
  <block id="7ad9306273877be4925eef5c298c8082" category="cell">*az_netapp_vol_service_level_primary*</block>
  <block id="5614656fa00c06faf1c3484531a679a9" category="cell">*az_netapp_vol_service_level_secondary*</block>
  <block id="4f517398039e7c48806d41487b9419bc" category="cell">*az_netapp_vol_protocol_primary*</block>
  <block id="82b777cb90770b16388fa42e12e046ab" category="cell">*az_netapp_vol_protocol_secondary*</block>
  <block id="59783d86d863461df5e6d03ac2bb42df" category="cell">az_netapp_vol_storage_quota_primary</block>
  <block id="de8fa216337d1b3497efb08ceeb2ba75" category="cell">az_netapp_vol_storage_quota_secondary</block>
  <block id="0b11ea56e0e5211214ff431c4e076717" category="cell">az_dp_replication_频率</block>
  <block id="79ce3fc5fe45b145bb343376fe5351b9" category="cell">（必填）复制频率，支持的值为<block ref="3602ffca95e52ce3f66ae1c6de108997" prefix=" " category="inline-code"></block>，<block ref="745fd0ea7f576f350a0eed4b8c48a8e2" prefix=" " category="inline-code"></block> ，<block ref="bea79186fd7af2da67e59b4b15df5a26" prefix=" " category="inline-code"></block> ，值区分大小写。</block>
  <block id="c623b4e11f7cb20ff0b7c24a72d3f0ef" category="open-title">ANF 双协议</block>
  <block id="1ed1215fce9948e3bee78c99bf12de8d" category="paragraph-title">用于在 Azure 上部署具有双协议的 ANF 卷的 Terraform 配置文件</block>
  <block id="d25220d03f7afcb6f5edcbc46e369d45" category="paragraph">本节包含各种 Terraform 配置文件，用于在 Azure 上部署/配置启用双协议的 ANF（Azure Netapp 文件）卷。</block>
  <block id="9568461c901e88398bed16e11ad813d3" category="list-text">更新变量值<block ref="b81cd75a858f9c9f13b2c366b4254eea" prefix=" " category="inline-code"></block>。</block>
  <block id="d263b475ab751de671d08455b33997c1" category="paragraph">启用双协议的单个 ANF 卷的 Terraform 变量。</block>
  <block id="b183512797a1d9ea69a8dab9e27df52c" category="cell">*az_netapp_vol_protocol1*</block>
  <block id="20fd02f6a193c7aeaee651654a332933" category="cell">（必需）以列表形式表示的目标卷协议。支持的单值包括<block ref="c6546b53840ec8245dd4d4d70fcdbc26" prefix=" " category="inline-code"></block>，<block ref="5b12ee0369243579651edca43ff65c85" prefix=" " category="inline-code"></block> ， 或者<block ref="de841868c2911da76b8ae2da9fa3166d" prefix=" " category="inline-code"></block>。如果未定义参数，则默认为<block ref="5b12ee0369243579651edca43ff65c85" prefix=" " category="inline-code"></block>。更改此设置将强制创建新资源，并且数据将会丢失。</block>
  <block id="cc032be5baf5b9484eb2d659f4e314c6" category="cell">az_netapp_vol_protocol2</block>
  <block id="910944ff76e7b2acfc482a34501df6f5" category="cell">*az_smb_server_用户名*</block>
  <block id="152372e48ac8f85f2e4908c5a1489a78" category="cell">（必需）用于创建 ActiveDirectory 对象的用户名。</block>
  <block id="239e5edf090c4c70025b340f651694cc" category="cell">*az_smb_server_password*</block>
  <block id="7b05e834084d190fe540481374f4fe0d" category="cell">（必需）用于创建 ActiveDirectory 对象的用户密码。</block>
  <block id="4e2be381ec92158458ceef11bdf41ef7" category="cell">az_smb_服务器名称</block>
  <block id="533dd582bfe3528b9b6ae4ff1889bd8f" category="cell">（必需）用于创建 ActiveDirectory 对象的服务器名称。</block>
  <block id="f17c01535ba9f04720700d5e0d17172a" category="cell">*az_smb_dns_服务器*</block>
  <block id="e70256203c6e23fcee3efa8d56fcfa85" category="cell">（必需）用于创建 ActiveDirectory 对象的 DNS 服务器 IP。</block>
  <block id="bdf618611712c6caa6fd0340470ee9f2" category="open-title">来自快照的 ANF 卷</block>
  <block id="15b915279743f1a43ce2c0f10062e69e" category="paragraph-title">用于从 Azure 上的快照部署 ANF 卷的 Terraform 配置文件</block>
  <block id="174e6e8f24023c93c7c470267f4c2376" category="paragraph">本节包含各种 Terraform 配置文件，用于从 Azure 上的快照部署/配置 ANF（Azure Netapp 文件）卷。</block>
  <block id="215d5ed09cbe3ca5b10c6d616024053a" category="list-text">更新变量值<block ref="ef9d672e94eee49d10d74f858a44d14f" prefix=" " category="inline-code"></block>。</block>
  <block id="a753ff452c91c6e4de63b907e8253e05" category="paragraph">使用快照的单个 ANF 卷的 Terraform 变量。</block>
  <block id="57bd49c8f9a43967f48ec8f1f3ca2846" category="cell">*az_snapshot_id*</block>
  <block id="ff461cb79e6adda28ae488782f0da97f" category="cell">（必需）将使用其创建新 ANF 卷的快照 ID。</block>
  <block id="664b1f8a02a683b16bb76004afb03be2" category="paragraph-title">用于在 Azure 上部署单节点 CVO 的 Terraform 配置文件</block>
  <block id="ca7ce11916c29a2c94b4fd33dc0b6313" category="paragraph">本节包含用于在 Azure 上部署/配置单节点 CVO（Cloud Volumes ONTAP）的各种 Terraform 配置文件。</block>
  <block id="04107ff6b0460381c55ff620a1021254" category="list-text">更新变量<block ref="094639eff38e0172690a0fb13cd97348" prefix=" " category="inline-code"></block>。</block>
  <block id="73b95097cc4819b49af28734c8da85f9" category="paragraph">单节点Cloud Volumes ONTAP (CVO) 的 Terraform 变量。</block>
  <block id="3226e634f46cb19ab313171144dd34bd" category="cell">*刷新令牌*</block>
  <block id="d687ff26916f17fd879c87b138961b29" category="cell">（必需） NetApp云管理器的刷新令牌。这可以从 netapp Cloud Central 生成。</block>
  <block id="2c64afa8a46290b632eba256c644932c" category="cell">*az_connector_name*</block>
  <block id="3eb8706ea09733709f78eddf34865fc5" category="cell">az_connector_location</block>
  <block id="758699b195f5916d500521462cf30da9" category="cell">（必需）将创建云管理器连接器的位置。</block>
  <block id="1fab22f54c2298a6c193e9dbf02a5f40" category="cell">az_connector_subscription_id</block>
  <block id="3eaa20b60039584fbaada041b1e9c27b" category="cell">（必需）Azure 订阅的 ID。</block>
  <block id="15a22866556f3e50073015243ddd7953" category="cell">*az_connector_company*</block>
  <block id="d6da30a455e4a736b78aebafd5a574ec" category="cell">az_connector_resource_group</block>
  <block id="7869ff24b2017b68dfcffe9346969d04" category="cell">（必需）Azure 中将创建资源的资源组。</block>
  <block id="9ddf31c7bd196ef12b5afc14819332ae" category="cell">az_connector_subnet_id</block>
  <block id="a41a332f5c3dda90835d004d4471e0a8" category="cell">（必需）虚拟机子网的名称。</block>
  <block id="dabe6b258248c0eefb5e7f8ef812c828" category="cell">az_connector_vnet_id</block>
  <block id="5209c2acb9f23446cfa41482e2ff8ee2" category="cell">（必填）虚拟网络的名称。</block>
  <block id="d00bbff7436422db546132791ca30dd2" category="cell">az_connector_network_security_group_name</block>
  <block id="b5033b19e9c2388be995930fb1c49365" category="cell">（必需）实例的安全组的名称。</block>
  <block id="54dee4dedf4b10ae9a250e887c349324" category="cell">az_connector_associate_public_ip_address</block>
  <block id="c954a4a98e68d0734dcd6d7ad00db3f5" category="cell">（必填）指示是否将公共 IP 地址与虚拟机关联。</block>
  <block id="d363651cb914dfbc47f512db8ce8a9c0" category="cell">*az_connector_account_id*</block>
  <block id="53b73bbe0bca0a3d51fbda15ecc058db" category="cell">（必需）连接器将与之关联的NetApp帐户 ID。如果未提供，Cloud Manager 将使用第一个帐户。如果不存在帐户，Cloud Manager 会创建一个新帐户。您可以在 Cloud Manager 的帐户选项卡中找到帐户 ID，网址为<block ref="ed21e31bd71ab546f26978ff562b5c5d" category="inline-link-rx"></block>。</block>
  <block id="b851f892237fb399ca9999caee142ccf" category="cell">az_connector_admin_密码</block>
  <block id="aa98915ce83ffe89562020e5b4d9a376" category="cell">（必需）连接器的密码。</block>
  <block id="1b9c1e319401f16966d7280c81cdc8dc" category="cell">*az_connector_admin_用户名*</block>
  <block id="e0f32faffed9caaca61e86caae050f17" category="cell">（必需）连接器的用户名。</block>
  <block id="425624e10c5de04d471a55e4a8b35e31" category="cell">*az_cvo_名称*</block>
  <block id="52ebf6980a494c352ee150c2b801af6e" category="cell">*az_cvo_location*</block>
  <block id="7bd8d7a58d3957cf7697ceb3467bffae" category="cell">（必填）将创建工作环境的位置。</block>
  <block id="8da06548b40415fd473a86a6dba80f82" category="cell">*az_cvo_子网ID*</block>
  <block id="a5ab436e757f5af2106d5ed5e5dd9df0" category="cell">（必需） Cloud Volumes ONTAP系统的子网名称。</block>
  <block id="f71ced0388b772479b4e5fba15c83077" category="cell">*az_cvo_vnet_id*</block>
  <block id="7d2219b61301dda6352db570bb7c5034" category="cell">az_cvo_vnet_resource_group</block>
  <block id="fecf56abdc6b5472c8da399cad7791b3" category="cell">（必需）Azure 中与虚拟网络关联的资源组。</block>
  <block id="c63d2e90acb0448db277b1b5b8a8d1fa" category="cell">az_cvo_data_encryption_type</block>
  <block id="e472a1445850887a7f62ae832b27693a" category="cell">（必需）工作环境使用的加密类型：<block ref="71335a48a021ae2aeb7df636ba3d2483" prefix="[" category="inline-code"></block> ，<block ref="b50339a10e1de285ac99d4c3990b8693" prefix=" " category="inline-code"></block> ]。默认值是<block ref="71335a48a021ae2aeb7df636ba3d2483" prefix=" " category="inline-code"></block>。</block>
  <block id="a09db82d06138c721102bb24bf44745c" category="cell">az_cvo_storage_type</block>
  <block id="0f0f84813d06e378040fbcf33a733c2c" category="cell">（必需）第一个数据聚合的存储类型：<block ref="31034b38323b8bba82b33017ce6c13ff" prefix="[" category="inline-code"></block> ，<block ref="410e42479a4a7cfdbe16e3e285d05598" prefix=" " category="inline-code"></block> ，<block ref="2d641bc6cd6c1342dced281e583a3993" prefix=" " category="inline-code"></block> ]。默认值是<block ref="31034b38323b8bba82b33017ce6c13ff" prefix=" " category="inline-code"></block></block>
  <block id="2dc6453586c69ea950eec68d5ac9658c" category="cell">*az_cvo_svm_密码*</block>
  <block id="404c8599d393a19d0cd6354f8b6ae58c" category="cell">*az_cvo_workspace_id*</block>
  <block id="ec0d845babe316d32a485960e8788bd0" category="cell">（必需）您要部署Cloud Volumes ONTAP 的Cloud Manager 工作区的 ID。如果未提供，Cloud Manager 将使用第一个工作区。您可以从“工作区”选项卡中找到该 ID<block ref="ed21e31bd71ab546f26978ff562b5c5d" category="inline-link-rx"></block> 。</block>
  <block id="868f934d26dc5bf64ab570c48f38be79" category="cell">az_cvo_容量层</block>
  <block id="e8dcbe7d10f08e94b9057a584009a175" category="cell">（必需）是否为第一个数据聚合启用数据分层：<block ref="e8016c85ada38bdc5fac616ec1318047" prefix="[" category="inline-code"></block> ，<block ref="b50339a10e1de285ac99d4c3990b8693" prefix=" " category="inline-code"></block> ]。默认值是<block ref="1649cff06611a6025da3dd511a97fb43" prefix=" " category="inline-code"></block>。</block>
  <block id="25390bc170c676096ec93edd61a5dca6" category="cell">*az_cvo_writing_speed_state*</block>
  <block id="b632952868dfa1143652e0c226514318" category="cell">（必需） Cloud Volumes ONTAP的写入速度设置：<block ref="1e23852820b9154316c7c06e2b7ba051" prefix="[" category="inline-code"></block> ，<block ref="b89de3b4b81c4facfac906edf29aec8c" prefix=" " category="inline-code"></block> ]。默认值是<block ref="1e23852820b9154316c7c06e2b7ba051" prefix=" " category="inline-code"></block>。此参数与 HA 对无关。</block>
  <block id="52742ffdac7415fc1d35c1a6d0d9fb7a" category="cell">*az_cvo_ontap_version*</block>
  <block id="90e696b73ff714675fc926a955cc68e1" category="cell">（必需）所需的ONTAP版本。如果“use_latest_version”设置为 true，则忽略。默认使用最新版本。</block>
  <block id="39a41303384652e186a359e5d96e8014" category="cell">*az_cvo_实例类型*</block>
  <block id="fb03bbd04a925d04740ba3d3eae2e8b6" category="cell">（必需）要使用的实例类型取决于您选择的许可证类型：探索：<block ref="ca3fc7c5e09a3c4fa0f4881f15167411" prefix="[" category="inline-code"></block> ]， 标准：<block ref="3e47288b0119e2f8cd128c5c1feb02e1" prefix="[" category="inline-code"></block> ]， 优质的：<block ref="9985a34952917c6a4f0d465c59bb32e6" prefix="[" category="inline-code"></block><block ref="7ccab40e6fc8df111c44d0d3a37df667" prefix="," category="inline-code"></block> ], BYOL：为 PayGo 定义的所有实例类型。有关更多受支持的实例类型，请参阅Cloud Volumes ONTAP发行说明。默认值是<block ref="a6f80faf58b4f8e337246cea4f984fc6" prefix=" " category="inline-code"></block>。</block>
  <block id="c0abbc4097de55ad558bd265d5e19b2e" category="cell">*az_cvo_许可证类型*</block>
  <block id="337fb3a0d6e4f27fa4187c6e10b9d41b" category="cell">（必填）要使用的许可证类型。对于单节点：<block ref="47dfc9e0cae8289642a649a3d4b6f07f" prefix="[" category="inline-code"></block> ，<block ref="6d7fd627acad65b22bc5bee7e03283c0" prefix=" " category="inline-code"></block> ，<block ref="fda853806a97d134c59567534d1aabe6" prefix=" " category="inline-code"></block> ，<block ref="371b5a766fa14dc8d36c07dc53ec816c" prefix=" " category="inline-code"></block> ，<block ref="f87643778357d753d17f33bd44952668" prefix=" " category="inline-code"></block> ]。对于 HA：<block ref="18099bc4697504c468dd18adf279ac68" prefix="[" category="inline-code"></block> ，<block ref="87d3f1b34e654923bcf9bc3b1b740e47" prefix=" " category="inline-code"></block> ，<block ref="6db401109bfb00cf3ddd45edfbf1ecc0" prefix=" " category="inline-code"></block> ，<block ref="709b724f9fdb1c96f55d9192b5be7a3f" prefix=" " category="inline-code"></block> ]。默认值是<block ref="6d7fd627acad65b22bc5bee7e03283c0" prefix=" " category="inline-code"></block>。使用<block ref="f87643778357d753d17f33bd44952668" prefix=" " category="inline-code"></block>或者<block ref="709b724f9fdb1c96f55d9192b5be7a3f" prefix=" " category="inline-code"></block>对于 HA，请选择自带许可证类型“基于容量”或“免费增值”。使用<block ref="371b5a766fa14dc8d36c07dc53ec816c" prefix=" " category="inline-code"></block>或者<block ref="6db401109bfb00cf3ddd45edfbf1ecc0" prefix=" " category="inline-code"></block>对于 HA，请选择自带许可证类型“基于节点”。</block>
  <block id="5e952a0432dfc8995121e15b76aa554a" category="cell">*az_cvo_nss_account*</block>
  <block id="c3ae78309504c231f8afd5bc3790d119" category="cell">（必需）与此Cloud Volumes ONTAP系统一起使用的NetApp支持站点帐户 ID。如果许可证类型为 BYOL 且未提供 NSS 帐户，则 Cloud Manager 将尝试使用第一个现有的 NSS 帐户。</block>
  <block id="e7e63db47174977525dadf7a52fc6b39" category="cell">*az_tenant_id*</block>
  <block id="66093475775d81b74da52f4377ff5ce5" category="cell">（必需）在 Azure 中注册的应用程序/服务主体的租户 ID。</block>
  <block id="7934d010494793aec0f365d710cdf720" category="cell">*az_application_id*</block>
  <block id="587bfaa720a64e832c9eef635797e8d8" category="cell">（必需）在 Azure 中注册的应用程序/服务主体的应用程序 ID。</block>
  <block id="67830019a9948cfd51759684b5f8a262" category="cell">*az_application_key*</block>
  <block id="56d6515673e3c08156696c47a943c020" category="cell">（必需）在 Azure 中注册的应用程序/服务主体的应用程序密钥。</block>
  <block id="f06bfa867f111b72b9e71b8a75d661da" category="paragraph-title">用于在 Azure 上部署 CVO HA 的 Terraform 配置文件</block>
  <block id="353190ef77d18ad13aeb6b4f0f3ddd66" category="paragraph">本节包含用于在 Azure 上部署/配置 CVO（Cloud Volumes ONTAP）HA（高可用性）的各种 Terraform 配置文件。</block>
  <block id="522a4529185faee9fa34a9398ab7263f" category="list-text">更新变量<block ref="3bdb269db9a3f1a5b57521aa62658bf3" prefix=" " category="inline-code"></block>。</block>
  <block id="e2da3e968f76091801635ce624569dcb" category="paragraph"><block ref="a82b90469ebb90af122c361dbb754fd8" prefix="" category="inline-code"></block></block>
  <block id="86ed32721429fbcc7b5e123836e3ebcd" category="paragraph">HA 对Cloud Volumes ONTAP (CVO) 的 Terraform 变量。</block>
  <block id="72170ff3a9ca936d7855297f0bbd1eeb" category="cell">（必需）要使用的实例类型取决于您选择的许可证类型：探索：<block ref="ca3fc7c5e09a3c4fa0f4881f15167411" prefix="[" category="inline-code"></block> ]， 标准：<block ref="a23549be3ebc980aebe6cb120ab4e310" prefix="[" category="inline-code"></block> ]， 优质的：<block ref="9985a34952917c6a4f0d465c59bb32e6" prefix="[" category="inline-code"></block> ，<block ref="7ccab40e6fc8df111c44d0d3a37df667" prefix=" " category="inline-code"></block> ], BYOL：为 PayGo 定义的所有实例类型。有关更多受支持的实例类型，请参阅Cloud Volumes ONTAP发行说明。默认值是<block ref="a6f80faf58b4f8e337246cea4f984fc6" prefix=" " category="inline-code"></block>。</block>
  <block id="b515d8e49b6ef626aa91dbd970708132" category="cell">（必填）要使用的许可证类型。对于单节点：<block ref="3abe68da9038e8e4aabc1b0e2a6530cc" prefix="[" category="inline-code"></block> ]。对于 HA：<block ref="86e0c1bceadb9c08ef223996a3e33d86" prefix="[" category="inline-code"></block> ]。默认值是<block ref="6d7fd627acad65b22bc5bee7e03283c0" prefix=" " category="inline-code"></block>。使用<block ref="f87643778357d753d17f33bd44952668" prefix=" " category="inline-code"></block>或者<block ref="709b724f9fdb1c96f55d9192b5be7a3f" prefix=" " category="inline-code"></block>对于 HA，请选择自带许可证类型“基于容量”或“免费增值”。使用<block ref="371b5a766fa14dc8d36c07dc53ec816c" prefix=" " category="inline-code"></block>或者<block ref="6db401109bfb00cf3ddd45edfbf1ecc0" prefix=" " category="inline-code"></block>对于 HA，请选择自带许可证类型“基于节点”。</block>
  <block id="e10db5a03ff1c5409d1b9ef0cf32ae11" category="paragraph-title">用于在 GCP 上部署NetApp CVO（单节点实例）的 Terraform 配置文件</block>
  <block id="3adefdd7d79d9a7c848b2dd81fd4feff" category="paragraph">本节包含各种 Terraform 配置文件，用于在 GCP（Google Cloud Platform）上部署/配置单节点NetApp CVO（Cloud Volumes ONTAP）。</block>
  <block id="b05dddcb6f00ee8dba8395d241b9d24d" category="list-text">将 GCP 身份验证密钥 JSON 文件保存在目录中。</block>
  <block id="44b4381353a1686f5b81f73f018d336c" category="list-text">更新变量值<block ref="0635645653586768460c826b4f319a80" prefix=" " category="inline-code"></block></block>
  <block id="2ac544064187c52d64d3eec81700dd42" category="admonition">您可以通过将变量“gcp_connector_deploy_bool”值设置为 true/false 来选择部署连接器。</block>
  <block id="283162995c6eba560352663fa7cafbb3" category="paragraph">用于 CVO 部署的NetApp GCP 连接器实例的 Terraform 变量。</block>
  <block id="c0b4a62bb4903159c66ef5fd828dbb35" category="cell">*gcp_connector_deploy_bool*</block>
  <block id="3448a02a5105e0eeb2a6243836814f36" category="cell">*gcp_connector_name*</block>
  <block id="982137a628765a4ede6a620653ab8bf6" category="cell">*gcp_connector_project_id*</block>
  <block id="816194da363b92545a1114d46c4943f1" category="cell">（必需）将创建连接器的 GCP project_id。</block>
  <block id="49a94de7b7e8762f961e471d657496eb" category="cell">*gcp_connector_zone*</block>
  <block id="ff9633a62f1e60af63fc951afd6966bc" category="cell">（必需）将创建连接器的 GCP 区域。</block>
  <block id="c667eb31817317b5455e6a8883f4664a" category="cell">*gcp_connector_company*</block>
  <block id="9d1203849926481ebb6be1fb1d6ec3de" category="cell">*gcp_connector_service_account_email*</block>
  <block id="d4a302e18b412231fe06e54e038aed80" category="cell">（必需）连接器实例的 service_account 的电子邮件。此服务帐户用于允许连接器创建 Cloud Volume ONTAP。</block>
  <block id="0e3852268e0e5a3a486b8fcf6e3ae1c1" category="cell">*gcp_connector_service_account_path*</block>
  <block id="f863e677d176e63d3642e53ae6b336b5" category="cell">（必需）用于 GCP 授权目的的 service_account JSON 文件的本地路径。此服务帐户用于在 GCP 中创建连接器。</block>
  <block id="cfd7e4961aa34c5626712429d469ed18" category="cell">*gcp_connector_account_id*</block>
  <block id="231d57c65fc42941f6a520976dc80ec3" category="cell">（可选）连接器将与之关联的NetApp帐户 ID。如果未提供，Cloud Manager 将使用第一个帐户。如果不存在帐户，Cloud Manager 会创建一个新帐户。您可以在 Cloud Manager 的帐户选项卡中找到帐户 ID，网址为<block ref="ed21e31bd71ab546f26978ff562b5c5d" category="inline-link-rx"></block>。</block>
  <block id="9ea10c86ddbbfa93db9af98d0a38e7d7" category="paragraph">GCP 上单个NetApp CVO 实例的 Terraform 变量。</block>
  <block id="9d8a021dcdac02b1cffc5ee14bc79241" category="cell">*gcp_cvo_名称*</block>
  <block id="bc023aad2be985e1a3252a959cb2c43b" category="cell">*gcp_cvo_项目ID*</block>
  <block id="c7a61709c9cf6aa90f854f8e30110412" category="cell">（必填）GCP 项目的 ID。</block>
  <block id="6f74a6834cfd9c72b6694ae9ecb7f332" category="cell">*gcp_cvo_zone*</block>
  <block id="dea2d3525e8ec98bbd9a7931a8ed9921" category="cell">（必填）将创建工作环境的区域的区域。</block>
  <block id="2c09e34e29e9c5f65d5d8ac921fd8105" category="cell">*gcp_cvo_gcp_service_account*</block>
  <block id="77853ddcc7178537c8d9c0301b71c991" category="cell">（必需）gcp_service_account 电子邮件，以便将冷数据分层到 Google Cloud Storage。</block>
  <block id="ffb5588c947a413a01016a81af9ddbc7" category="cell">*gcp_cvo_svm_密码*</block>
  <block id="9507c3b760db1c7e6c8d1674933449e4" category="cell">*gcp_cvo_workspace_id*</block>
  <block id="4efb152d95f2b6b19ca1387a26e8f750" category="cell">（可选）您要部署Cloud Volumes ONTAP 的Cloud Manager 工作区的 ID。如果未提供，Cloud Manager 将使用第一个工作区。您可以从“工作区”选项卡中找到该 ID<block ref="ed21e31bd71ab546f26978ff562b5c5d" category="inline-link-rx"></block> 。</block>
  <block id="7cbf1746ddada50a540811a75b633bfa" category="cell">*gcp_cvo_许可证类型*</block>
  <block id="108ccbda23ae580baf5fb86c14613837" category="cell">（可选）要使用的许可证类型。对于单节点：['capacity-paygo', 'gcp-cot-explore-paygo', 'gcp-cot-standard-paygo', 'gcp-cot-premium-paygo', 'gcp-cot-premium-byol']，对于 HA：['ha-capacity-paygo', 'gcp-ha-cot-explore-paygo', 'gcp-ha-cot-standard-paygo', 'gcp-ha-cot-premium-paygo', 'gcp-ha-cot-premium-byol']。单节点默认为‘capacity-paygo’，HA默认为‘ha-capacity-paygo’。</block>
  <block id="ec6c16de8b82f3fc6c55f03f1d9a0848" category="cell">*gcp_cvo_capacity_package_name*</block>
  <block id="564565c1364213fe3ffcef055b61947b" category="cell">（可选）容量包名称：['Essential', 'Professional', 'Freemium']。默认为‘必需’。</block>
  <block id="1e95e8962dbf55d78e03e8da38f9f408" category="paragraph-title">用于在 GCP 上部署NetApp CVO（HA 对）的 Terraform 配置文件</block>
  <block id="ac245610a2b7e434b78946f9ab069afe" category="paragraph">本节包含各种 Terraform 配置文件，用于在 GCP（Google Cloud Platform）上以高可用性对形式部署/配置NetApp CVO（Cloud Volumes ONTAP）。</block>
  <block id="00c7a940cc525046dc63cee112a8ef2d" category="list-text">更新变量值<block ref="aca245204ab77411a71da01b8d6ec7cb" prefix=" " category="inline-code"></block>。</block>
  <block id="657426021b9624d6c24fae901c9998c1" category="paragraph">GCP 上 HA 对中NetApp CVO 实例的 Terraform 变量。</block>
  <block id="2a20062f50c253ff821e16ab60e9bd71" category="cell">*gcp_cvo_is_ha*</block>
  <block id="c7d1d567eb3eec5faac1c3efbf5c63d6" category="cell">*gcp_cvo_node1_zone*</block>
  <block id="2cb70db8c1982b17ac705ceace5b64ae" category="cell">（可选）节点 1 的区域。</block>
  <block id="b231cdca0a533a8afcbf95810dcdd937" category="cell">*gcp_cvo_node2_zone*</block>
  <block id="2aad8f424dde09a3fb42570367a156de" category="cell">（可选）节点 2 的区域。</block>
  <block id="7dd3bb55d8d71efcb06fc86bbb29993a" category="cell">*gcp_cvo_mediator_zone*</block>
  <block id="767c5594dfa391fbb74bd9360557a0a8" category="cell">（可选）调解员区域。</block>
  <block id="4ecd0da4e352bb336bd4c5925e627fbb" category="cell">*gcp_cvo_vpc_id*</block>
  <block id="0a49d29112682612dc74e881a68deed0" category="cell">（可选）VPC 的名称。</block>
  <block id="eedae790807f6f5998c1d5b2eccfcf91" category="cell">*gcp_cvo_subnet_id*</block>
  <block id="dbb13624053bb884443eb3a8a891a35e" category="cell">（可选） Cloud Volumes ONTAP子网的名称。默认值为：“默认”。</block>
  <block id="5fbbd2383d042b5ab01878b936e467ff" category="cell">*gcp_cvo_vpc0_node_and_data_connectivity*</block>
  <block id="24239aec58a00d53d32147d2e71cca4d" category="cell">（可选）nic1 的 VPC 路径，节点和数据连接所需。如果使用共享 VPC，则必须提供 netwrok_project_id。</block>
  <block id="b1dd5e2b134fc3db50406e05c7ae6c38" category="cell">*gcp_cvo_vpc1_cluster_connectivity*</block>
  <block id="714e5d0cdfde4cbf4df83df266c672e7" category="cell">（可选）nic2 的 VPC 路径，集群连接所需。</block>
  <block id="f8d315b03e4b926495b923dfe4b49b23" category="cell">*gcp_cvo_vpc2_ha_连接*</block>
  <block id="5c144c2c76f5d988024f4d7398060d71" category="cell">（可选）nic3 的 VPC 路径，HA 连接所需。</block>
  <block id="1366961106ddc181e83c467cf5559a14" category="cell">*gcp_cvo_vpc3_数据复制*</block>
  <block id="b4be5ce15bf4e51acd3167c47e79955f" category="cell">（可选）nic4 的 VPC 路径，数据复制所需。</block>
  <block id="065308400ba1fac48f2ca62781d79dff" category="cell">*gcp_cvo_subnet0_node_and_data_connectivity*</block>
  <block id="2a33bb449fd47fa1f379b60f3e1473ca" category="cell">（可选）nic1 的子网路径，节点和数据连接所需。如果使用共享 VPC，则必须提供 netwrok_project_id。</block>
  <block id="da8a35439720c0bc705f001b954bd61e" category="cell">*gcp_cvo_subnet1_cluster_connectivity*</block>
  <block id="01b515c3b8d74ae94df6572b47a3f06d" category="cell">（可选）nic2 的子网路径，集群连接所需。</block>
  <block id="7ea43f4ca8d2a868f20df11b9e0b39b2" category="cell">*gcp_cvo_subnet2_ha_connectivity*</block>
  <block id="a35bd275122015b3834d13c0dc72b87f" category="cell">（可选）nic3 的子网路径，HA 连接所需。</block>
  <block id="16c5273854a933d221200af8f06d106a" category="cell">*gcp_cvo_subnet3_数据复制*</block>
  <block id="b36fab455a4e11803791a090935906af" category="cell">（可选）nic4 的子网路径，数据复制所需。</block>
  <block id="e69179170f564daf56d8694c1c5d35fe" category="cell">*gcp_cvo_gcp_volume_size*</block>
  <block id="eb01714b284e762b9c44adfa5575690c" category="cell">（可选）第一个数据聚合的 GCP 卷大小。对于 GB，单位可以是：[100 或 500]。对于 TB，单位可以是：[1,2,4,8]。默认值为 '1' 。</block>
  <block id="4c767d9b6ddddf4abeaece5590c0b101" category="cell">*gcp_cvo_gcp_volume_size_unit*</block>
  <block id="767c107065cff7e1e364655d7cc0e867" category="open-title">NetApp卷</block>
  <block id="d990db66da3d0a77231d4e53d63b3aca" category="paragraph-title">用于在 GCP 上部署NetApp Volumes 的 Terraform 配置文件</block>
  <block id="72d2a1cbf7d6dd9023e150589f04dceb" category="paragraph">本节包含各种 Terraform 配置文件，用于在 GCP（Google Cloud Platform）上部署/配置NetApp Volumes（Google Cloud NetApp Volumes）。</block>
  <block id="732c3eabba1449281a4fddb59dbddcac" category="paragraph">Terraform 文档：<block ref="35b7d5c9a11899e5d5e07079551e8cef" category="inline-link-rx"></block></block>
  <block id="d203294ba4c28418657d90a7f8a7510d" category="list-text">更新变量值<block ref="eb1510c0f29be1d144dce2bfa2e8caab" prefix=" " category="inline-code"></block>。</block>
  <block id="ad8e3c5ae4975dc471630c98af5df73f" category="paragraph"><block ref="767c107065cff7e1e364655d7cc0e867" prefix="" category="inline-code"></block></block>
  <block id="7d7612f408b2763145ce645a8d8f7106" category="paragraph">NetApp GCP NetApp Volumes 的 Terraform 变量。</block>
  <block id="0ffdc0b2b4889601b216ab5087650d46" category="cell">*gcp_cvs_name*</block>
  <block id="f975415c206ca2770eb2162b54461443" category="cell">（必需） NetApp Volumes 卷的名称。</block>
  <block id="b6759cef3cfc5890deb6a790f73c8b79" category="cell">*gcp_cvs_项目 ID*</block>
  <block id="c374730d026a4e9d4a36fc73f48a25b8" category="cell">（必需）将创建NetApp Volumes 的 GCP project_id。</block>
  <block id="447b0e81ae249b907128b7ea83e045c5" category="cell">*gcp_cvs_gcp_service_account_path*</block>
  <block id="b1d9d9c171325398a50e2a85a199f72d" category="cell">（必需）用于 GCP 授权目的的 service_account JSON 文件的本地路径。此服务帐户用于在 GCP 中创建NetApp Volumes 卷。</block>
  <block id="6cb8bdefdf91cd2d80f6d9849de25fb8" category="cell">*gcp_cvs_region*</block>
  <block id="2ee54da105be74fec3fb372ba7585925" category="cell">（必需）将创建NetApp Volumes 的 GCP 区域。</block>
  <block id="fc944aa114b94de895d84f5375000c0b" category="cell">*gcp_cvs_network*</block>
  <block id="23a1cb77eeeabfd36bbab18e5de9f0dc" category="cell">（必需）卷的网络 VPC。</block>
  <block id="31681a1878caf611cea11e159a4fc1aa" category="cell">*gcp_cvs_size*</block>
  <block id="6f84d4d0c83121512056657a2dc0e808" category="cell">（必需）卷的大小介于 1024 到 102400 之间（以 GiB 为单位）。</block>
  <block id="5c1eb3efe4738cb21efadc992aeeef81" category="cell">*gcp_cvs_volume_path*</block>
  <block id="bacdc6093d23e2f886b0cb0609418030" category="cell">（可选）卷的卷路径名称。</block>
  <block id="0467ee670bdb8fff57da77368d6d5385" category="cell">*gcp_cvs_protocol_types*</block>
  <block id="b91db1bd1a57ea4c9953036d82a63e95" category="cell">（必需）卷的 protocol_type。对于 NFS 使用“NFSv3”或“NFSv4”，对于 SMB 使用“CIFS”或“SMB”。</block>
  <block id="e3fb152815935545c5a1b55af45f2989" category="doc">容量大小考虑因素</block>
  <block id="c813a600039be6de094380071d27cf4c" category="paragraph">ONTAP Cyber Vault 目标卷所需的磁盘空间量取决于多种因素，其中最重要的是源卷中数据的变化率。目标卷上的备份计划和快照计划都会影响目标卷上的磁盘使用情况，并且源卷上的变化率可能不会保持恒定。最好提供额外的存储容量缓冲区，以满足未来最终用户或应用程序行为变化的需求。</block>
  <block id="6a3b22f9cbb72d8ee39ad3719c9eb19e" category="paragraph">在ONTAP中确定 1 个月保留关系的大小需要根据多种因素计算存储需求，包括主数据集的大小、数据变化率（每日变化率）以及重复数据删除和压缩节省（如果适用）。</block>
  <block id="6f90ee87bfa54cd638142d54adb21b1c" category="paragraph">以下是分步方法：</block>
  <block id="965f5b79327daa397f985825963cd0e1" category="paragraph">第一步是了解使用网络保险库保护的源卷的大小。这是最初复制到网络保险库目的地的基本数据量。接下来，估计数据集的每日变化率。这是每天变化的数据百分比。充分了解数据的动态性至关重要。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例如：</block>
  <block id="575838137a73e770cb0ec222a449af98" category="list-text">主数据集大小 = 5TB</block>
  <block id="184a08ec2538ba834ae59256be228c7a" category="list-text">每日变化率=5%（0.05）</block>
  <block id="fd3f327e83c0941d142e619235e769af" category="list-text">重复数据删除和压缩效率 = 50% (0.50)</block>
  <block id="68a624f8b2489c81e63cac2b0d97fb3a" category="paragraph">现在，让我们来看一下计算过程：</block>
  <block id="32e779d4f4ac53a8ca78466c22fd18db" category="list-text">计算每日数据变化率：</block>
  <block id="7c6c8042617ee7b791c3b2eb309fdc03" category="paragraph"><block ref="b260a327e80ef44d3612f7e2852c931e" prefix="" category="inline-code"></block></block>
  <block id="a078f9dfc06c60f45b6ed2b1f87ac9fc" category="list-text">计算30天的总变化数据：</block>
  <block id="0d04968f9188f31fb98df0db95659e98" category="paragraph"><block ref="5f4c915163a98c855d01d65783ebda68" prefix="" category="inline-code"></block></block>
  <block id="b49b7c94d037fb900ffd21d013b277de" category="list-text">计算所需的总存储量：</block>
  <block id="dffa7cdc9b74a45ffc67c41680c70470" category="paragraph"><block ref="782ec9abc08288fa170d25ceca98c20c" prefix="" category="inline-code"></block></block>
  <block id="92b9a318f32c2d1b0be857658a599ec6" category="list-text">应用重复数据删除和压缩节省：</block>
  <block id="b1a380eb866185cf22e8a8e088350c44" category="paragraph"><block ref="bf76c804110b687ca70c137d1f9a1450" prefix="" category="inline-code"></block></block>
  <block id="6f48ef0b8de9c55b06a9cafdcb8132a7" category="paragraph">*存储需求摘要*</block>
  <block id="4f6ca24ecf54adb14400a5613f2f9cb9" category="list-text">如果没有效率：存储 30 天的网络保险库数据将需要 *12.5TB*。</block>
  <block id="9e47cd4aa56577d84d13a6378ba348fe" category="list-text">效率为 50%：重复数据删除和压缩后需要 *6.25TB* 的存储空间。</block>
  <block id="ac7c49d0c3e96174648189d1e3103eeb" category="admonition">快照副本可能会因元数据而产生额外的开销，但这通常很小。</block>
  <block id="2a6c70bc91e201188ec060507a1cdb68" category="admonition">如果每天进行多次备份，则根据每天拍摄的 Snapshot 副本数量调整计算。</block>
  <block id="843cef7f051ed9be5d642a3b13cbd25d" category="admonition">考虑数据随时间的增长，以确保规模适合未来。</block>
  <block id="2aa17d37bd2483f97468ab7653396786" category="paragraph">本节介绍在 AWX/Ansible Tower 中配置参数所需的步骤，为使用NetApp自动化解决方案准备环境。</block>
  <block id="134d501fee5367069f0746f15302ce1f" category="list-text">配置库存。</block>
  <block id="0fb1db9928d7fc107d96c13f1918b639" category="list-text">导航至资源 → 库存 → 添加，然后单击添加库存。</block>
  <block id="2623b8eb8fcaecc009c3b78cc6e7d391" category="list-text">提供姓名和组织详细信息，然后单击“保存”。</block>
  <block id="cc243ac3e015aef331656a4bff40241c" category="list-text">在库存页面中，单击刚刚创建的库存资源。</block>
  <block id="b0ddb214e9aa4a84bc80e6af8c6b2adf" category="list-text">如果有任何库存变量，请将其粘贴到变量字段中。</block>
  <block id="5d7863780eab69b6b968cfc9dc6e66bc" category="list-text">转到“组”子菜单并单击“添加”。</block>
  <block id="ec51931bb91bc912d609f2099974dfd9" category="list-text">提供组的名称，复制组变量（如有必要），然后单击“保存”。</block>
  <block id="8f9cbdc13fdcb31ff345f10ba333ac59" category="list-text">单击创建的组，转到“主机”子菜单，然后单击“添加新主机”。</block>
  <block id="98e7a99b463b825a87899d25486e46ea" category="list-text">提供主机的主机名和 IP 地址，粘贴主机变量（如有必要），然后单击“保存”。</block>
  <block id="3caf9a56384a30eb8dee819e3abc14d6" category="list-text">创建凭证类型。对于涉及ONTAP、Element、VMware 或任何其他基于 HTTPS 的传输连接的解决方案，您必须配置凭证类型以匹配用户名和密码条目。</block>
  <block id="615b6214c17105ae4915a8c8a632025b" category="list-text">导航到管理 → 凭证类型并单击添加。</block>
  <block id="e6bf632438290fdf98265b2b18943118" category="list-text">提供名称和描述。</block>
  <block id="846bb9303e5cc4395e96eba0d4c7d50a" category="list-text">将以下内容粘贴到输入配置中：</block>
  <block id="333a40c5632e0507a83f6a191f0b69b3" category="list-text">将以下内容粘贴到注入器配置中：</block>
  <block id="e31908e83a96aee8550446309c4ef7e0" category="list-text">配置凭据。</block>
  <block id="de06c7b54d4158f81a8c4d4a02b61eb0" category="list-text">导航到资源 → 凭证并单击添加。</block>
  <block id="9c78f8d8687776e79018ded982e14c25" category="list-text">输入姓名和组织详细信息。</block>
  <block id="e5b5f57b6910910a3f9a486e88088608" category="list-text">选择正确的凭证类型；如果您打算使用标准 SSH 登录，请选择 Machine 类型，或者选择您创建的自定义凭证类型。</block>
  <block id="9256ee926473942ba849050ef0450b7f" category="list-text">输入其他相应详细信息并单击“保存”。</block>
  <block id="29d192f714134f2e257058cfcf763722" category="list-text">配置项目。</block>
  <block id="1b892b7661c6a3ae2b57cbf4233c3af5" category="list-text">导航到资源 → 项目并单击添加。</block>
  <block id="936784ca62c93ca666e77fd10733247c" category="list-text">选择 Git 作为源代码控制凭证类型。</block>
  <block id="9f4fd9b4a4c75c02d1b469e8dd75d9fb" category="list-text">粘贴与特定解决方案对应的源代码控制 URL（或 git 克隆 URL）。</block>
  <block id="95acbbc0424478165cdbe3a62849cbc3" category="list-text">或者，如果 Git URL 受到访问控制，请在源代码控制凭证中创建并附加相应的凭证。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">单击“Save”。</block>
  <block id="a934d780fa0cb0e8495a0a1cabd0f501" category="list-text">配置作业模板。</block>
  <block id="0fd181172a82ebe5219e9a30e5d97c0d" category="list-text">导航到资源 → 模板 → 添加，然后单击添加作业模板。</block>
  <block id="10c610c9225adcc92ca1b284b5bbb04b" category="list-text">输入名称和描述。</block>
  <block id="e33edf61d02fc69c2087dcc3c42177e1" category="list-text">选择作业类型；运行根据剧本配置系统，检查执行剧本的试运行而不实际配置系统。</block>
  <block id="57cf64ce7890d12e5a41d18b83979ffd" category="list-text">为剧本选择相应的库存、项目和凭证。</block>
  <block id="fc6b15b1dd73bb25477aed453b9a02f2" category="list-text">选择您想要作为作业模板的一部分运行的剧本。</block>
  <block id="9a7d90740af07bcdd2c628a6f6ae966c" category="list-text">通常变量是在运行时粘贴的。因此，为了在运行时获得填充变量的提示，请确保勾选与变量字段对应的启动时提示复选框。</block>
  <block id="3454f07e6f81a48099e0d144ca38ec7a" category="list-text">根据需要提供任何其他详细信息，然后单击“保存”。</block>
  <block id="31e2568c13fbdaaad088eb3b665dea9d" category="list-text">启动作业模板。</block>
  <block id="3624b34cb634949984bcb28c79fd327f" category="list-text">导航至资源 → 模板。</block>
  <block id="56ae7378358ba2b1c55c47283f544991" category="list-text">单击所需的模板，然后单击启动。</block>
  <block id="0b55c84dbc04b54418b0d507f7b8f669" category="list-text">如果启动时出现提示，请填写任何变量，然后再次单击“启动”。</block>
  <block id="b9b07f10c0ce1735548942e3abaa3447" category="summary">本页面提供有关通过NetApp Cloud Manager 收集 CVO 和 Cloud Manager Connector 部署所需的刷新令牌和访问/密钥的详细信息。</block>
  <block id="a123daaac5749e4d0965aca160f0adfd" category="doc">NetApp解决方案自动化</block>
  <block id="fb0ad99371abb3d02d60add8160c6dd9" category="section-title">使用NetApp Cloud Manager 的 CVO 和连接器的 AWS 身份验证要求</block>
  <block id="bcc03f70ea2e77a98ddb6e8267e4892f" category="paragraph">要通过 AWX/Ansible Tower 使用 Ansible 剧本配置 CVO 和连接器的自动部署，需要以下信息：</block>
  <block id="193fc1c355935356ecd5d07811792512" category="section-title">从 AWS 获取访问/密钥</block>
  <block id="60b6439418495e0d1821d169b7d4b885" category="list-text">要在 Cloud Manager 中部署 CVO 和连接器，我们需要 AWS 访问/密钥。通过启动 IAM--&gt;用户--&gt;您的用户名--&gt;安全凭证--&gt;创建访问密钥来获取 AWS 控制台中的密钥。</block>
  <block id="ad1cc06192440312813c412c9cf08bc5" category="list-text">复制访问密钥并妥善保管，以便在连接器和 CVO 部署中使用。</block>
  <block id="4ba9f13f5b12512f3651d5ea2d3ffa05" category="admonition">如果您丢失了密钥，您可以创建另一个访问密钥并删除丢失的密钥</block>
  <block id="ad35fbaef240a8ec1f43e8a0d5e15099" category="inline-image-macro">刷新令牌</block>
  <block id="49cfc50d98b3e682dd29e011f05debd4" category="paragraph"><block ref="49cfc50d98b3e682dd29e011f05debd4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89d8fe92eb33da3c73df38422c3fa73e" category="section-title">从NetApp Cloud Central 获取刷新令牌</block>
  <block id="3d7e1d21530a3a98c74b0b7484c84516" category="list-text">使用您的帐户凭证登录您的云中心帐户<block ref="ddbd83acb6424bbb7fa6878eff0976a1" category="inline-link-rx"></block></block>
  <block id="a95c6d24569073e45c394bcbd6a2c0e4" category="list-text">生成刷新令牌并保存以供部署。</block>
  <block id="8ee26645784a41d92f9cff4d74f16c36" category="paragraph"><block ref="8ee26645784a41d92f9cff4d74f16c36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ecd636681b83fa2697020594594aea14" category="section-title">获取客户端ID</block>
  <block id="2a1ed6ca97aeb484a26d6e0d625af96b" category="list-text">访问 API 页面复制客户端 ID<block ref="06324b77583872f7e211b3e7ec3f882f" category="inline-link-rx"></block> 。</block>
  <block id="1093ef7993a1f3824edbf581bb54b571" category="list-text">点击右上角的“了解如何验证”。</block>
  <block id="622dcb1fafb9f30d36b32341e23ae7a0" category="list-text">如果您需要用户名/密码才能登录，请从弹出的身份验证窗口中复制常规访问中的客户端 ID。具有 SSO 的联合用户应从“刷新令牌选项卡”复制客户端 ID。</block>
  <block id="76525f0f34b48475e5ca33f71d296f3b" category="inline-image-macro">客户端 ID</block>
  <block id="c06bd3529c9bd05011fe69b08f4b0d80" category="paragraph"><block ref="c06bd3529c9bd05011fe69b08f4b0d80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6090065e2462d5f96ebac132568bdf46" category="section-title">从AWS获取密钥对</block>
  <block id="0de42e9c6c58b001e43c67a98b25d807" category="list-text">在AWS控制台中，搜索“密钥对”并使用“pem”创建密钥对。记住您的 key_pair 的名称，我们将使用它来部署连接器。</block>
  <block id="ddb20e807acdf5ddf189dd213ff6d0cf" category="inline-image-macro">密钥对</block>
  <block id="66258850f08b7d04a009dc90cf7cf3c4" category="paragraph"><block ref="66258850f08b7d04a009dc90cf7cf3c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ce1d7d6e1b4509256dd2574b6b5d290" category="section-title">获取账户ID</block>
  <block id="8f19980a36fbde35540547e8f630c9e5" category="list-text">在云管理器中，单击帐户 –&gt; 管理帐户，然后复制帐户 ID 以供 AWX 变量使用。</block>
  <block id="69abe89842503a1c01ab515a53b7c4c6" category="paragraph"><block ref="69abe89842503a1c01ab515a53b7c4c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90305bb6fba97091f683e8b82f9bf805" category="summary">NetApp解决方案自动化使客户能够自动部署、配置和执行许多常见的基础设施和应用程序任务。</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">简介</block>
  <block id="380fbb2dc2a4b42876553664c398fb3f" category="paragraph">在提供解决方案以应对当今的业务挑战时， NetApp提供的解决方案具有以下目标：</block>
  <block id="008347e050bccf7e2812ae39dd816f41" category="list-text">提供经过验证的部署和配置步骤，</block>
  <block id="4ef594072d2fdf53ad9ca6af7fe16569" category="list-text">提供易于使用的解决方案，</block>
  <block id="3f68e576fe6e3e328b5feeea03707572" category="list-text">提供具有可预测结果、易于重复且可在客户企业范围内扩展的解决方案部署。</block>
  <block id="928a4532882b0eb0208abcae9b7fd6f0" category="paragraph">为了实现这些目标，至关重要的是，通过自动化简化通过我们的解决方案交付的基础设施和/或应用程序的部署和配置。  NetApp致力于通过自动化简化解决方案的使用。</block>
  <block id="d6d7e89b087a9e69ae7622847dc932e5" category="paragraph">利用 Red Hat Ansible、HashiCorp Terraform 或 Microsoft Powershell 等开源自动化工具， NetApp解决方案能够自动执行应用程序部署、云配置、配置管理和许多其他常见的 IT 任务。  NetApp 的解决方案利用公开可用的自动化工件 - 并提供NetApp创作的自动化 - 来简化解决方案的整体部署。</block>
  <block id="e532e5979d2ecc30b8177530683810e2" category="paragraph">在具有自动化功能的情况下，解决方案附件将指导用户通过特定的自动化工具完成解决方案或解决方案步骤的自动化过程。</block>
  <block id="2fbb88fe90f9183c7eab541bc808795f" category="summary">本页介绍了使用 terraform 在云提供商（AWS、Azure、GCP）上部署 Netapp 卷的自动化方法。</block>
  <block id="8eece2f5500ed61d5d5d24d6b8cc6da5" category="doc">通过 Terraform 实现云卷自动化</block>
  <block id="4955754540a3275b8091953009e5babc" category="paragraph">该解决方案记录了使用 Terraform 模块在 AWS（CVO 单节点、CVO HA 和 FSX ONTAP）和 Azure（CVO 单节点、CVO HA 和 ANF）上自动部署 Cloud Volumes 的过程。代码可以在以下位置找到<block ref="443c555d04d240afc4ca748e75f63754" category="inline-link-rx"></block></block>
  <block id="e11da9afe91d381489a365c86cc614ab" category="section-title">先决条件</block>
  <block id="95332f844502bac70e3783f2d906688c" category="list-text">Terraform &gt;= 0.13</block>
  <block id="82410a61f302c6bdce619218d5036674" category="list-text">云管理器帐户</block>
  <block id="77913a2ff2c55b56fd6d981e7d7d2303" category="list-text">云提供商帐户 – AWS、Azure</block>
  <block id="8fdcd620b2871b4f496213f43c8ee21f" category="list-text">主机（Terraform 支持的任何操作系统）</block>
  <block id="e5da768f23935e9c380799d86e27d695" category="section-title">提供商文档</block>
  <block id="8443f23dd52e13e75f6a652a7e100fb6" category="inline-link-macro"><block ref="8443f23dd52e13e75f6a652a7e100fb6" category="inline-link-rx"></block></block>
  <block id="b78f34c8bc7d03e88e2a6d7d8907ef93" category="paragraph">Cloud Manager 的 Terraform 提供程序文档可在以下位置找到：<block ref="05e9b3cbe087530696c6230448ff6b71" category="inline-link-macro-rx"></block></block>
  <block id="ef335030cde4c62e318574aa31ee49f7" category="section-title">控制提供程序版本</block>
  <block id="cc6d892dc2fbac39a7a00c3d822275b8" category="paragraph">请注意，您还可以控制提供程序版本。这由 Terraform 配置中的 required_providers 块控制。</block>
  <block id="bf4e80680b83752f1f57ca7d4e99d09b" category="paragraph">语法如下：</block>
  <block id="c26cc3bad4e19f3604486c6e2d4dee15" category="paragraph">阅读有关提供商版本控制的更多信息。</block>
  <block id="c335a311e2b771c143fbe09512d98021" category="section-title">运行特定模块</block>
  <block id="4847e034bb0a55fcbc8a3380d6a3ab80" category="example-title">AWS</block>
  <block id="3a580f142203677f1f0bc30898f63f53" category="example-title">Azure</block>
  <block id="c731f72e1d22a7c5e01a7cb789a8885e" category="example-title">GCP</block>
  <block id="21e353476b2f1e4316607b206a230dd8" category="summary">本页介绍了监控 AWS FSx ONTAP和根据阈值自动调整大小的自动化。</block>
  <block id="520ab23777726f064d15b0630f0612be" category="doc">使用 AWS Lambda 函数进行 FSx ONTAP监控和自动调整大小</block>
  <block id="3a67ce2890470f04797057007d1d9e43" category="section-title">概述：通过 AWS Lambda 函数监控和自动调整 FSx ONTAP</block>
  <block id="a4307cc9949afbb69d05c3b687c9716e" category="paragraph">FSx ONTAP是 AWS 上的第一方企业级云存储服务，它基于流行的NetApp ONTAP文件系统构建，提供高度可靠、可扩展、高性能且功能丰富的文件存储。</block>
  <block id="fdfbc41ec99677877902bce78765107f" category="paragraph">FSx ONTAP提供无缝的部署和管理体验。无需任何存储专业知识即可开始使用。为了简化监控，可以使用 AWS lambda 函数（根据阈值自动调整总存储容量、卷大小或 LUN 大小）。  本文档提供了创建自动化设置的分步指南，该设置定期监控 FSx ONTAP ，在超过用户指定的阈值时发出通知并调整大小，并通知管理员调整大小活动。</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="example-title">功能</block>
  <block id="8799f4655655a26ca808c044ad467a88" category="paragraph">该解决方案提供以下功能：</block>
  <block id="c342d53b891fb460586d3a137ff99a6e" category="list-text">监控能力：</block>
  <block id="206dfe605df49b2e39b47daf29a6f360" category="list-text">FSx ONTAP整体存储容量的使用情况</block>
  <block id="e0f2ee8f41ba7bcb505bbabfcab0c31d" category="list-text">每个卷的使用情况（精简配置/厚配置）</block>
  <block id="34b7d0bb9429625764e4da258f94ae19" category="list-text">每个 LUN 的使用情况（精简配置/厚配置）</block>
  <block id="685d6918f18b4d0d12cf6582187aff57" category="list-text">当超出用户定义的阈值时，可以调整上述任何一项的大小</block>
  <block id="a7cd615e255b9b089f1b061e5e189abd" category="list-text">通过电子邮件接收使用警告和调整大小通知的警报机制</block>
  <block id="0d50ae6aa92c4ec6f263491e478e7d82" category="list-text">能够删除超过用户定义阈值的快照</block>
  <block id="91602eeac7d8a4cc46329128033d33d3" category="list-text">能够获取相关FlexClone卷和快照的列表</block>
  <block id="8e8aff933e5047a57263663f8a18e3c3" category="list-text">能够定期监控检查</block>
  <block id="e2b4916d6d7f53cde2d5633fd6119cc4" category="list-text">无论是否接入互联网，均可使用该解决方案</block>
  <block id="a90d7c3c15ad351b936f52283c3587ef" category="list-text">可以手动部署或使用 AWS CloudFormation 模板进行部署</block>
  <block id="7bd6476177184ef1d03860365bf2d749" category="list-text">能够在单个 VPC 中监控多个 FSx ONTAP文件系统</block>
  <block id="dd0679a0ea834bda0a34b306e7a09346" category="paragraph">开始之前，请确保满足以下先决条件：</block>
  <block id="99f13119dcd47e1c267f188c9f3f701b" category="list-text">FSx ONTAP已部署</block>
  <block id="ce45376d41bb0d384a7f5385e125cc07" category="list-text">连接到 FSx ONTAP 的私有子网</block>
  <block id="0f3fd6c5ef2918b120ec91a74b697501" category="list-text">已为 FSx ONTAP设置“fsxadmin”密码</block>
  <block id="703ead715d6d2f8639484c00e0ed0d5d" category="example-title">高级架构</block>
  <block id="8201938ee345ecb2411776de224933fa" category="list-text">AWS Lambda 函数向 FSx ONTAP发出 API 调用，以检索和更新存储容量、卷和 LUN 的大小。</block>
  <block id="2b9ee323cc707d4cd4f3a2a127530351" category="list-text">“fsxadmin”密码作为安全字符串存储在 AWS SSM 参数存储中，以增加安全性。</block>
  <block id="3eac8a068c2043f39b9aec5a2b7ee6af" category="list-text">AWS SES（简单电子邮件服务）用于在发生调整大小事件时通知最终用户。</block>
  <block id="a2c0867d899b117aa3870a45761a92a6" category="list-text">如果在没有互联网访问的 VPC 中部署解决方案，则会设置 AWS SSM、FSx 和 SES 的 VPC 端点，以允许 Lambda 通过 AWS 内部网络访问这些服务。</block>
  <block id="0048e42e38e4c6f587f210afe26fcb4a" category="inline-image-macro">该图描绘了该解决方案中使用的高级架构。</block>
  <block id="432a24ba141fb90355a80ec4c6d3825e" category="paragraph"><block ref="432a24ba141fb90355a80ec4c6d3825e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd1d4adbfe73c3cd87fc248a003b05a0" category="section-title">解决方案部署</block>
  <block id="f674169036173cc4a9f01e223c275c8d" category="section-title">自动部署</block>
  <block id="40f67706ad127c99e09fc5d20a575663" category="admonition">涵盖单个 FSx ONTAP文件系统。</block>
  <block id="5215f5ee52e78e416520bfecaf294472" category="paragraph">按照一系列步骤完成此解决方案的自动化部署：</block>
  <block id="974bba02716a5e7c8414499dd06bbb62" category="example-title">步骤 1：克隆 GitHub 存储库</block>
  <block id="3233c0d0dc9395d6085fb8167fdd8393" category="paragraph">在本地系统上克隆 GitHub 存储库：</block>
  <block id="6436b05fc0216b37135d2a66a585e96f" category="example-title">步骤 2：设置 AWS S3 存储桶</block>
  <block id="7d54d293b4849834117fc9160feb6cbc" category="list-text">导航到 AWS 控制台 &gt; *S3*，然后单击 *创建存储桶*。使用默认设置创建存储桶。</block>
  <block id="e1ce9d5c8ac3567da4228f49df78e5b0" category="list-text">进入存储桶后，单击*上传* &gt; *添加文件*，然后从系统上克隆的 GitHub 存储库中选择*Utilities.zip*。</block>
  <block id="66b09b43432fbb9814d51e48e9a98ade" category="inline-image-macro">此图描绘了正在上传 zip 文件的 S3 窗口</block>
  <block id="0f71a8c9bb8a785323461956bf9e217a" category="paragraph"><block ref="0f71a8c9bb8a785323461956bf9e217a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ea6ef5eae0a05760ec8bf19495d8645" category="example-title">步骤 3：AWS SES SMTP 设置（如果没有可用的互联网访问，则需要）</block>
  <block id="002c69c38fe81f4ebc5f950b44e22628" category="paragraph">如果您想在没有互联网访问的情况下部署解决方案，请按照此步骤操作（注意：设置 VPC 端点会产生额外的成本。）</block>
  <block id="a1e0c9bd0fc75dba09f52b2963994041" category="list-text">导航至 AWS 控制台 &gt; *AWS 简单电子邮件服务 (SES)* &gt; *SMTP 设置*，然后单击 *创建 SMTP 凭证*</block>
  <block id="8ff28e341f8985ff5b224f50aa4ffa38" category="list-text">输入 IAM 用户名或保留默认值，然后单击“创建用户”。保存*SMTP 用户名*和*SMTP 密码*以供进一步使用。</block>
  <block id="796d9a158268a6ea8a7895c4fc08b2f7" category="admonition">如果 SES SMTP 设置已到位，请跳过此步骤。</block>
  <block id="c492e5ad14c10d85050111f49b9ccd32" category="inline-image-macro">此图展示了 AWS SES 下的“创建 SMTP 凭证”窗口</block>
  <block id="747d6cfb3ed57d4c0e18836b73d86338" category="paragraph"><block ref="747d6cfb3ed57d4c0e18836b73d86338" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53f52a194e6b0e83b281c128d8c9536d" category="example-title">步骤 4：AWS CloudFormation 部署</block>
  <block id="d2edefb4d7f05ffadcc2ce87ffde5e98" category="list-text">导航到 AWS 控制台 &gt; *CloudFormation* &gt; 创建堆栈 &gt; 使用新资源（标准）。</block>
  <block id="f9555c9e4ee9872bd73e1554f90b137c" category="inline-image-macro">此图展示了 AWS CloudFormation 创建堆栈窗口</block>
  <block id="4370f3906a2026048cd9c7c700f2bf91" category="paragraph"><block ref="4370f3906a2026048cd9c7c700f2bf91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a65108ded0e706a6c44742b2f313e4e" category="paragraph">点击下一步</block>
  <block id="ef7b077619d0583a71ba9fda28bc53fc" category="list-text">输入堆栈详细信息。单击“下一步”，选中“我承认 AWS CloudFormation 可能会创建 IAM 资源”复选框，然后单击“提交”。</block>
  <block id="1b61f2cbcfae90671dbb048e72bb8918" category="admonition">如果“VPC 是否可以访问互联网？”设置为 False，则需要“AWS SES 的 SMTP 用户名”和“AWS SES 的 SMTP 密码”。否则，它们可以留空。</block>
  <block id="1f5aede37b8170af3cfbd901f22d591e" category="inline-image-macro">此图描绘了 AWS CloudFormation 堆栈详细信息窗口</block>
  <block id="19a18db0ade02064a9df049cf1fd35e1" category="paragraph"><block ref="19a18db0ade02064a9df049cf1fd35e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d14749492874cf0465f8c5e25580acd" category="paragraph"><block ref="1d14749492874cf0465f8c5e25580acd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e567ad4aa16a8ddda87daa5662c7e73" category="paragraph"><block ref="1e567ad4aa16a8ddda87daa5662c7e73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c61c4ad1ac8e998df9f3590903a5de24" category="paragraph"><block ref="c61c4ad1ac8e998df9f3590903a5de24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9665e80899cc4ee16b02e57f6f6bd770" category="list-text">一旦 CloudFormation 部署开始，“发件人电子邮件 ID”中提到的电子邮件 ID 将收到一封电子邮件，要求他们授权 AWS SES 使用该电子邮件地址。点击链接来验证电子邮件地址。</block>
  <block id="d22d74b4244b97ca549876dbaf6e5906" category="list-text">CloudFormation 堆栈部署完成后，如果有任何警告/通知，则会向收件人电子邮件 ID 发送一封包含通知详细信息的电子邮件。</block>
  <block id="bb44dcc303804fcbbf13971e05b223b4" category="inline-image-macro">此图显示了有通知时收到的电子邮件通知</block>
  <block id="5941fbfa614bff4066737ead9e780daa" category="paragraph"><block ref="5941fbfa614bff4066737ead9e780daa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3520a4e86856fecb9808cf3d7208a44d" category="paragraph"><block ref="3520a4e86856fecb9808cf3d7208a44d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ae845e97e60673c293edce9fe3a65f9" category="section-title">手动部署</block>
  <block id="86f1d5ce7d6e6da6c622bfa4aed87957" category="admonition">支持在单个 VPC 中监控多个 FSx ONTAP文件系统。</block>
  <block id="d4f4ecbc346d14b30240c605c5884282" category="paragraph">按照一系列步骤完成此解决方案的手动部署：</block>
  <block id="c960dffe03501c470f4219bb16fab5ef" category="example-title">步骤 2：AWS SES SMTP 设置（如果没有可用的互联网访问，则需要）</block>
  <block id="972167638becf55a9af0b4e5c414a75e" category="list-text">导航至 AWS 控制台 &gt; *AWS 简单电子邮件服务 (SES)* &gt; SMTP 设置，然后单击 *创建 SMTP 凭证*</block>
  <block id="68d59bd0e9b2839f0843ab1b2d6b136f" category="list-text">输入 IAM 用户名或保留默认值，然后单击“创建”。保存用户名和密码以供进一步使用。</block>
  <block id="0aa7c69c57f475cc1f055c49b0e3136e" category="example-title">步骤 3：为 fsxadmin 密码创建 SSM 参数</block>
  <block id="06df343d3a431a2f511aa7fef58e4a23" category="paragraph">导航到 AWS 控制台 &gt; *参数存储*，然后单击 *创建参数*。</block>
  <block id="fc38f30978451e99228423e69fa7363e" category="paragraph">点击*创建参数*。对所有要监控的 FSx ONTAP文件系统重复上述步骤。</block>
  <block id="1cefa861aa6d9ba408841133e7325545" category="inline-image-macro">此图描绘了 AWS 控制台上的 SSM 参数创建窗口。</block>
  <block id="a19e362ed1a0d7ca174a7abf2c59853a" category="paragraph"><block ref="a19e362ed1a0d7ca174a7abf2c59853a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8a7ca52152a916f189b032d05768ed10" category="paragraph">如果在没有互联网访问的情况下部署解决方案，请执行相同的步骤来存储 smtp 用户名和 smtp 密码。否则，跳过添加这 2 个参数。</block>
  <block id="06e0a02f6ce962b7038b6b2918585271" category="example-title">步骤4：设置电子邮件服务</block>
  <block id="bcd5fa3fbab9dadf361d9eba36b8382c" category="paragraph">导航到 AWS 控制台 &gt; *简单电子邮件服务 (SES)*，然后单击 *创建身份*。</block>
  <block id="60461626b891b858b74da97b0ee89b6e" category="paragraph">点击*创建身份*</block>
  <block id="28b8479848099212d34ed9e8ff2f3288" category="paragraph">“发件人电子邮件 ID”中提到的电子邮件 ID 将收到一封电子邮件，要求所有者授权 AWS SES 使用该电子邮件地址。点击链接来验证电子邮件地址。</block>
  <block id="af9b6260888bf7e72d2766823e7a2bb6" category="inline-image-macro">此图描绘了 AWS 控制台上的 SES 身份创建窗口。</block>
  <block id="59f38a9e267a3ea7e5d173c163613f58" category="paragraph"><block ref="59f38a9e267a3ea7e5d173c163613f58" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab00efb48492ba46bf143309d7d5a995" category="example-title">步骤 5：设置 VPC 端点（如果没有互联网访问则必需）</block>
  <block id="a896cb4c0f87c01212691e2e656eb9c4" category="admonition">仅在没有互联网访问的情况下部署时才需要。  VPC 端点会产生额外费用。</block>
  <block id="71bb5fff33b1866d7266866fb9c94f45" category="list-text">导航到 AWS 控制台 &gt; *VPC* &gt; *Endpoints*，然后单击 *Create Endpoint* 并输入以下详细信息：</block>
  <block id="6683864f2c9e5bbb1fa4128837ed8eab" category="paragraph">单击创建端点。</block>
  <block id="5f80bfe9763fe273a3a7722c1c647604" category="inline-image-macro">此图描绘了 VPC 端点创建窗口</block>
  <block id="09f0191e56b0b0a99839c70e1390c8a2" category="paragraph"><block ref="09f0191e56b0b0a99839c70e1390c8a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33e092b5a362258ca3d289828adaef91" category="paragraph"><block ref="33e092b5a362258ca3d289828adaef91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="efd995d112fb4cf555fe5f14b1077928" category="list-text">按照相同的流程创建 SES 和 SSM VPC 端点。除服务分别对应于 *com.amazonaws.&lt;region&gt;.smtp* 和 *com.amazonaws.&lt;region&gt;.ssm* 外，所有参数均与上述相同。</block>
  <block id="a07090d2d501e8e696338339ab098115" category="example-title">步骤 6：创建并设置 AWS Lambda 函数</block>
  <block id="80f4e5242422eba4b8f004e16e06d3bb" category="list-text">导航到 AWS 控制台 &gt; *AWS Lambda* &gt; *函数*，然后单击与 FSx ONTAP位于同一区域的 *创建函数*</block>
  <block id="eb625a560eb6c02ecd5a6a9f47d5d768" category="list-text">使用默认的*从头开始的作者*并更新以下字段：</block>
  <block id="8af4ad16f59e1ac333921353c65b1492" category="paragraph">点击*创建函数*。</block>
  <block id="957437001751593737e6afeb8cd3163b" category="inline-image-macro">此图描绘了 AWS 控制台上的 Lambda 创建窗口。</block>
  <block id="e48c3465d03ed0b6ab59937e0955b6c0" category="paragraph"><block ref="e48c3465d03ed0b6ab59937e0955b6c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d5c94589f3ae16eb024f99a08edebbd" category="paragraph"><block ref="4d5c94589f3ae16eb024f99a08edebbd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ced74238d4f3e0d01b23a4ded2b9663c" category="list-text">导航到新创建的 Lambda 函数 &gt; 向下滚动到 *Layers* 部分并单击 *Add a layer*。</block>
  <block id="38752522b6aecd6cdf7355a1cdaa38ad" category="inline-image-macro">此图描绘了 AWS Lambda 函数控制台上的添加层按钮。</block>
  <block id="cc07bde473345c3ce0ae0c8fc7097fdc" category="paragraph"><block ref="cc07bde473345c3ce0ae0c8fc7097fdc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc8034a8cc3761841b945895d5bb5e74" category="list-text">单击“图层源”下的“创建新图层”</block>
  <block id="4a86a06630441d1655597fa23dc66379" category="list-text">创建一个层并上传*Utilities.zip*文件。选择 *Python 3.9* 作为兼容的运行时，然后单击 *创建*。</block>
  <block id="44dec222c0e2e40e9770472e89813d69" category="inline-image-macro">此图描绘了 AWS 控制台上的“创建新层”窗口。</block>
  <block id="1a144f1799018bb0e4a3aff87c3ae15f" category="paragraph"><block ref="1a144f1799018bb0e4a3aff87c3ae15f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c712825b20324ef1f5b77e495f50777c" category="list-text">导航回 AWS Lambda 函数 &gt; *添加层* &gt; *自定义层*并添加实用程序层。</block>
  <block id="018f803496bf51d7eca913d543f61cdc" category="inline-image-macro">此图描绘了 AWS Lambda 函数控制台上的添加层窗口。</block>
  <block id="74aec608a6fed03dea60e0a7998ac4c6" category="paragraph"><block ref="74aec608a6fed03dea60e0a7998ac4c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6dcc7aaf4ab69d9f33228c8aca077bf7" category="inline-image-macro">此图描述了 AWS Lambda 函数控制台上添加的层。</block>
  <block id="87fcbd11f44be8b210a0adbfafc5f083" category="paragraph"><block ref="87fcbd11f44be8b210a0adbfafc5f083" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5ce6c1605d609112f3e70cd0eb8d92a5" category="list-text">导航到 Lambda 函数的 *配置* 选项卡，然后单击 *常规配置* 下的 *编辑*。将超时更改为*5 分钟*，然后单击*保存*。</block>
  <block id="92997aae940f33750d6c43a65315fc0d" category="list-text">导航到 Lambda 函数的 *Permissions* 选项卡并单击分配的角色。在角色的权限选项卡中，单击*添加权限*&gt;*创建内联策略*。</block>
  <block id="e80446ca49af46cfdbc8af6661176f5b" category="list-text">单击 JSON 选项卡并粘贴来自 GitHub 存储库的文件 policy.json 的内容。</block>
  <block id="85aff31d07a1ff90ecd6d3dc6401eed0" category="list-text">将每个出现的 ${AWS::AccountId} 替换为您的账户 ID，然后单击 *审核政策*</block>
  <block id="de61df97ff6dba72d275469c25e01fe2" category="list-text">为策略提供一个名称，然后单击“创建策略”</block>
  <block id="d36a4ee86f07b3ab1dac130b43608573" category="list-text">将 *fsxn_monitoring_resizing_lambda.py* 的内容从 git repo 复制到 AWS Lambda 函数代码源部分中的 *lambda_function.py*。</block>
  <block id="aa2c2b9170ac97be5915c92e4d3d9624" category="list-text">在与 lambda_function.py 同级创建一个新文件，并将其命名为 *vars.py*，并将 vars.py 的内容从 git repo 复制到 lambda 函数 vars.py 文件。更新 vars.py 中的变量值。参考下面的变量定义并点击*部署*：</block>
  <block id="6c51cd5dc46c2931b78f7f79a5f41525" category="cell">*fsx列表*</block>
  <block id="f507f2ff3266acaf1e0702e463a2e2e0" category="cell">（必需）要监控的所有 FSx ONTAP文件系统的列表。将所有文件系统包含在列表中以进行监控和自动调整大小。</block>
  <block id="1b1b65a5b121a97f06bd0f40bfe04db2" category="cell">*fsxMgmtIp*</block>
  <block id="f259c4b6663c8af5ab9b1cdbf63353c5" category="cell">（必需）从 AWS 上的 FSx ONTAP控制台输入“管理端点 - IP 地址”。</block>
  <block id="b458b0d72a95d6bd9cfcb7a5c23dcb1b" category="cell">*fsxId*</block>
  <block id="33c678f811a5cc41660372ce29ed6f80" category="cell">（必需）从 AWS 上的 FSx ONTAP控制台输入“文件系统 ID”。</block>
  <block id="68318b373e71a3da8e3dd4430fda3f2b" category="cell">*用户名*</block>
  <block id="6bb4775c21a49398b886356db4549012" category="cell">（必需）从 AWS 上的 FSx ONTAP控制台输入 FSx ONTAP “ONTAP管理员用户名”。</block>
  <block id="66139124af54a9bd769c36d775836d70" category="cell">调整阈值</block>
  <block id="8c09ed6e498d70309d841ab06df44a38" category="cell">（必填）输入 0-100 之间的阈值百分比。此阈值将用于衡量存储容量、卷和 LUN 的使用情况，并且当任何使用率的百分比增加超过此阈值时，将发生调整大小活动。</block>
  <block id="e405587a28590f4765b9cca9a439aee0" category="cell">*fsx_password_ssm_参数*</block>
  <block id="fd6fdc9b8903fcc41d72463456f66547" category="cell">（必填）输入 AWS 参数存储中用于存储“fsxadmin”密码的路径名。</block>
  <block id="a2b399451f43de7415c9c8d2f2430019" category="cell">*警告通知*</block>
  <block id="740343954e72caba682c972de1bc4459" category="cell">（必需）将此变量设置为 True，以便在存储容量/卷/LUN 使用率超过 75% 但低于阈值时接收通知。</block>
  <block id="4a011a0efb5e78112e4ed7930b4d4ac6" category="cell">启用快照删除</block>
  <block id="f2a43adf70fef2a5bca3a335b60d96ec" category="cell">（必需）将此变量设置为 True，以启用早于“snapshot_age_threshold_in_days”中指定的值的卷级快照删除。</block>
  <block id="d7cef1097d40a983ff6c131976641be8" category="cell">快照年龄阈值（以天为单位）</block>
  <block id="be6cbc09482802bc252464f7f9dc5176" category="cell">（必填）输入您要保留的卷级快照的天数。任何早于所提供值的快照都将被删除，并通过电子邮件通知。</block>
  <block id="785e900d8ea09cab57830ac6967cb709" category="cell">*互联网访问*</block>
  <block id="24498a6850ca31bfb18f639aae517582" category="cell">（必需）如果可以从部署此 lambda 的子网访问互联网，则将此变量设置为 True。否则将其设置为 False。</block>
  <block id="cd9e7c04a0bb02c275868aa4344613da" category="cell">smtp 区域</block>
  <block id="4a892fb521dc4ec57f770f02637e0d0d" category="cell">（可选）如果“internet_access”变量设置为 False，请输入部署 lambda 的区域。例如 us-east-1（此格式）</block>
  <block id="07dba5c28924867968d12040d14d8b57" category="cell">smtp_用户名_ssm_参数</block>
  <block id="611e6e1c3920f2514daecc54ecfb79d1" category="cell">（可选）如果“internet_access”变量设置为 False，请输入 AWS 参数存储中用于存储 SMTP 用户名的路径名。</block>
  <block id="00dc34bddd9d78c3a39608fed34bb12c" category="cell">smtp_password_ssm_参数</block>
  <block id="7d7fbea26b1aa16fe546b51310bfd752" category="cell">（可选）如果“internet_access”变量设置为 False，请输入 AWS Parameter Store 中用于存储 SMTP 密码的路径名。</block>
  <block id="497a76ab2a24f6810806482af6d4b406" category="cell">*发件人电子邮件*</block>
  <block id="e003b9f112112808c978c5154fda4ca5" category="cell">（必填）输入在 SES 上注册的电子邮件 ID，lambda 函数将使用该 ID 发送与监控和调整大小相关的通知警报。</block>
  <block id="fb154fba377735ccf71f62d4f67db056" category="cell">*收件人电子邮件*</block>
  <block id="84d1d8bc0deec1274356da96f7409f5a" category="cell">（必填）输入您想要接收警报通知的电子邮件 ID。</block>
  <block id="8983bb09e5de73133d38fd252364a173" category="inline-image-macro">此图描述了 AWS Lambda 函数控制台上的 lambda 代码。</block>
  <block id="8355eb726273f03ca5f55fd35b0a710a" category="paragraph"><block ref="8355eb726273f03ca5f55fd35b0a710a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8a5fe4432309ce27193ef047eaf8b7ea" category="list-text">点击*测试*，创建一个空的JSON对象的测试事件，点击*调用*运行测试，检查脚本是否正常运行。</block>
  <block id="44903daf5480dcfa1bb48a9ba24e0617" category="list-text">测试成功后，导航至 *配置* &gt; *触发器* &gt; *添加触发器*。</block>
  <block id="6bb73947635f7fd1d1f74c0544fa89a6" category="paragraph">单击“添加”。</block>
  <block id="e12ebba9179a3c37608a804ce282348d" category="inline-image-macro">此图描绘了 AWS Lambda 函数控制台上的事件桥创建窗口。</block>
  <block id="4e8d49756f1c9d97f6044f5c9c1c5d02" category="paragraph"><block ref="4e8d49756f1c9d97f6044f5c9c1c5d02" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="section-title">结束语</block>
  <block id="a4f2f64accaef6efd80caa4588844d8d" category="paragraph">通过提供的解决方案，可以轻松设置监控解决方案，定期监控 FSx ONTAP存储，根据用户指定的阈值调整其大小并提供警报机制。这使得使用和监控 FSx ONTAP的过程变得无缝，使管理员可以专注于关键业务活动，同时存储会在需要时自动增长。</block>
  <block id="d82dd9b3245382b365106db0568113e8" category="summary">NetApp解决方案自动化使客户能够自动部署、配置和执行许多常见的基础设施和应用程序任务。</block>
  <block id="aaac1ea7463ef799eaafc693b16b1f81" category="doc">NetApp解决方案自动化入门</block>
  <block id="66bd3dbe1f46a5715420e201e457ff65" category="paragraph">NetApp解决方案自动化为NetApp解决方案所使用的许多常见任务提供了简单性和可重复性。</block>
  <block id="bf7d92f5ef43a7e0ab10c8d11d28ef6e" category="paragraph">在运行任何解决方案自动化之前，必须配置环境以确定如何执行自动化。可以选择从命令行或通过 AWX 或 Tower 等工具运行自动化。</block>
  <block id="dcdcb9b7436ca5ceca042e84e9c3ccf5" category="paragraph">以下部分将概述为每个指定环境配置环境所需的步骤。</block>
  <block id="3d45b043c5518eca1e47fb4ba8a813da" category="example-title">在 RHEL / CentOS 上为 CLI 部署设置 Ansible 控制节点</block>
  <block id="2afb5cc3404c6c8162722fd41895c2de" category="example-title">在 Ubuntu / Debian 上为 CLI 部署设置 Ansible 控制节点</block>
  <block id="6b8c64be0bad88fb867c6576ac777b25" category="example-title">为 Tower/AWX 部署设置 Ansible Tower 或 AWX</block>
  <block id="645198fb2e03205a7f761aeaff8ef26f" category="inline-link-macro">NetApp解决方案自动化和 Ansible 入门</block>
  <block id="4e9de62bec55cb82f4c1cd06fda641ec" category="paragraph">欲了解更多信息，请访问<block ref="8306967267ef07392858b509a9329df9" category="inline-link-macro-rx"></block></block>
  <block id="8ad7837dca490e02340e5510135b8589" category="inline-link-macro">自动化请求表</block>
  <block id="02e0e745ea83a0b975796e4741d478b8" category="paragraph">要请求自动化，请填写<block ref="cb4462fd8f35840b40d613c14df7645c" category="inline-link-macro-rx"></block>。</block>
  <block id="79954394076a66945903422060c4d147" category="summary">本页包含的步骤将帮助您创建基于ONTAP 的网络保险库解决方案</block>
  <block id="ccdb43ad79994581f29c244aafca268c" category="doc">使用ONTAP创建网络保险库</block>
  <block id="50ff0c4edfe97bd6906d70c7ad767db5" category="paragraph">以下步骤将有助于使用ONTAP创建网络保险库。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">开始之前</block>
  <block id="ecbdbab4ed6b1c8e0b843791e9c62ff0" category="list-text">源集群必须运行ONTAP 9 或更高版本。</block>
  <block id="dd9fe98abae3504fac3d3c16e9c1d984" category="list-text">源聚合和目标聚合必须是 64 位。</block>
  <block id="8aa0eacd84c5f9a809210fcdbcc46da6" category="inline-link-macro">创建集群对等关系</block>
  <block id="425641b540201f2f1c36bae1f918b0fe" category="list-text">必须在具有对等 SVM 的对等集群中创建源卷和目标卷。有关更多信息，请参阅<block ref="beb00ff5b9489a2e060be834b2c1413b" category="inline-link-macro-rx"></block> 。</block>
  <block id="f4a95d63fcbc8952d01bf8dab8c1698f" category="list-text">如果禁用卷自动增长，则目标卷上的可用空间必须至少比源卷上的已用空间多 5%。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">关于此任务</block>
  <block id="0a8c83fdd8714a0e2c3d18e19438efc2" category="paragraph">下图显示了初始化SnapLock Compliance保险库关系的过程：</block>
  <block id="455f37c56602d6bdc20c278f150c08b4" category="inline-image-macro">使用NetApp ONTAP 的隔离网络保险库</block>
  <block id="6154a1d5472c089a297518ff3082ce43" category="paragraph"><block ref="6154a1d5472c089a297518ff3082ce43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="d8be08796734034936480793eb537d33" category="list-text">确定目标阵列将成为接收隔离数据的网络保险库。</block>
  <block id="c279c791d7a22a99613e13a59e5d0010" category="inline-link-macro">安装ONTAP One 许可证</block>
  <block id="94061a2a91015f19e6a9850ec15cc13e" category="inline-link-macro">初始化合规时钟</block>
  <block id="da029d1d3cdcda48294aeaa8c76fd2b3" category="inline-link-macro">创建SnapLock Compliance聚合</block>
  <block id="f6c1a0559bc1a68e0f03ccb82c6d0295" category="list-text">在目标阵列上，准备网络保险库，<block ref="eff520140d61142fcd9e9566be9b4c9f" category="inline-link-macro-rx"></block> ，<block ref="182d6be49907aeda401489bbf9289312" category="inline-link-macro-rx"></block> ，如果您使用的是 9.10.1 之前的ONTAP版本，<block ref="6f8c446d6a11c7e57c8e884b925dc962" category="inline-link-macro-rx"></block> 。</block>
  <block id="b0dec5225e197a484e3cb4b4da8b788d" category="list-text">在目标阵列上，创建 DP 类型的SnapLock Compliance目标卷：</block>
  <block id="c3058c204da1411f46fc010f874e0e9a" category="paragraph"><block ref="370a8f3cd0299aa06069a1a1bdf415b6" prefix="" category="inline-code"></block></block>
  <block id="316eea121b39840430c58e4aa897647e" category="list-text">从ONTAP 9.10.1 开始， SnapLock和非SnapLock卷可以存在于同一个聚合上；因此，如果您使用ONTAP 9.10.1，则不再需要创建单独的SnapLock聚合。您使用音量<block ref="ec8dbd3119ac84ab653da5b88d91c793" prefix=" " category="inline-code"></block>选项来指定合规性类型。在ONTAP 9.10.1 之前的ONTAP版本中， SnapLock模式、Compliance 是从聚合继承的。不支持版本灵活的目标卷。目标卷的语言设置必须与源卷的语言设置相匹配。</block>
  <block id="98f34db86aaaba829e97a1be6f874392" category="paragraph">以下命令将创建一个名为 2 GB 的SnapLock Compliance卷<block ref="dd833e79a717212e33502f6f2a9d0381" prefix=" " category="inline-code"></block>在<block ref="ec87aa7f4c8e70a139fd988f87b6549f" prefix=" " category="inline-code"></block>总体而言<block ref="ecc74003f0c89af31ac067820d668c2a" prefix=" " category="inline-code"></block>：</block>
  <block id="826da2157ecc0667b0b16700df1166f7" category="paragraph"><block ref="ad33e059ace4583f1b201f0e2daf9e75" prefix="" category="inline-code"></block></block>
  <block id="af8bc18ef9683db27972422bf2fd07ee" category="inline-link-macro">设置默认保留期</block>
  <block id="b34d6d265a0a51b15b01b48f5f09d6f7" category="inline-link-macro">设置保留时间概述</block>
  <block id="23ed57b5454151d51786266e50127963" category="list-text">在目标集群上，要创建气隙，请设置默认保留期，如中所述<block ref="6e62bc98fee23ad208d5ce2967370c6f" category="inline-link-macro-rx"></block>。作为保管库目标的SnapLock卷具有分配的默认保留期。此期限的值最初设置为最短 0 年，最长 100 年（从ONTAP 9.10.1 开始）。对于早期版本的ONTAP ，对于SnapLock Compliance卷，该值为 0 - 70。每个NetApp Snapshot 副本最初都遵循此默认保留期。必须更改默认保留期。如果需要，保留期可以延长，但绝不能缩短。有关更多信息，请参阅<block ref="6bfd1941a913bb5402f71f45f07ab0ab" category="inline-link-macro-rx"></block> 。</block>
  <block id="cb85af3d2e280f430eca31c9263a915b" category="admonition">服务提供商在确定保留期时应考虑客户的合同结束日期。例如，如果网络保险库的保留期为 30 天，而客户的合同在保留期到期之前结束，则网络保险库中的数据在保留期到期之前不能被删除。</block>
  <block id="38a28a8e85ab610d3ac9a45cecc4d9f2" category="inline-link-macro">创建新的复制关系</block>
  <block id="677967e2db224d8471c18cabb3e53d69" category="list-text"><block ref="14128bc45ef50f26dd0cd13267dddafd" category="inline-link-macro-rx"></block>非SnapLock源和您在步骤 3 中创建的新SnapLock目标之间。</block>
  <block id="948c3f768429a082d68af84c8e8e83ad" category="paragraph">此示例使用 XDPDefault 策略创建与目标SnapLock卷 dstvolB 的新SnapMirror关系，以按小时计划存储标记为每日和每周的 Snapshot 副本：</block>
  <block id="0db98d0ac2f1f506a0df5f1b8741e37c" category="paragraph"><block ref="e32591ca507ef11a4b5db19a3c588340" prefix="" category="inline-code"></block></block>
  <block id="75f83bbaf7f814729366d9e0bac3638f" category="inline-link-macro">创建自定义复制策略</block>
  <block id="eb4902f4e093a5664d5be201b1525090" category="inline-link-macro">自定义时间表</block>
  <block id="f6080f77fabd93f9c7cd0db19ebf3854" category="paragraph"><block ref="f8ad18b63f4acea696561bd6c33e4a4f" category="inline-link-macro-rx"></block>或<block ref="d5516ae2ba3c19f03a7e477796c1cc10" category="inline-link-macro-rx"></block>如果可用的默认值不合适。</block>
  <block id="fa55eb42116563440dfebb9cc89a6457" category="list-text">在目标 SVM 上，初始化在步骤 5 中创建的SnapVault关系：</block>
  <block id="8e8c863bd9c7dbdb4e2b1bd156666578" category="paragraph"><block ref="3e671235a83ec3df936c32ac0ecb7f13" prefix="" category="inline-code"></block></block>
  <block id="089ce2a92126e4edade5a407bb72f0ac" category="list-text">以下命令初始化 SVM1 上的源卷 srcvolA 与 SVM2 上的目标卷 dstvolB 之间的关系：</block>
  <block id="7ec5776e4edcdff5bcab74d1b40f7ed7" category="paragraph"><block ref="844118741e5eec8134ab9669dee07b8f" prefix="" category="inline-code"></block></block>
  <block id="bdf6ab0cc753f93dd1ae2dd27ecb5f79" category="list-text">关系初始化并处于空闲状态后，使用目标上的 snapshot show 命令来验证应用于复制的 Snapshot 副本的SnapLock到期时间。</block>
  <block id="da7aed9f537ff2aaf12b7de8c1306891" category="paragraph">此示例列出了卷 dstvolB 上具有SnapMirror标签和SnapLock到期日期的 Snapshot 副本：</block>
  <block id="188a1df6d73260220357994a498350ca" category="paragraph"><block ref="f977dc6283af647dd1312a60c9a1edd4" prefix="" category="inline-code"></block></block>
  <block id="331b1364fb40387c99de6bec234f7f72" category="summary">本文档包含有关NetApp ONTAP网络保险库解决方案的常见问题。</block>
  <block id="4ba34c4785eee999a881dabc9683f823" category="doc">网络保险库常见问题解答</block>
  <block id="ab8da6fe8056ced5cc274293dd9e4014" category="paragraph">此常见问题解答适用于NetApp客户和合作伙伴。它回答了有关 NetApp 基于ONTAP的网络保险库参考架构的常见问题。</block>
  <block id="6eff5590c81b12f2a213ee063cb1f174" category="section-title">什么是NetApp网络保险库？</block>
  <block id="9bea960415c2d0d0582019b4d4d207b0" category="paragraph">网络保险库是一种特定的数据保护技术，涉及将数据存储在与主要 IT 基础设施分开的隔离环境中。</block>
  <block id="96dbcb54ce93b8c576273b1db72a780c" category="paragraph">网络保险库是一个“隔离的”、不可变的、不可磨灭的数据存储库，可以免受影响主要数据的威胁，例如恶意软件、勒索软件或内部威胁。可以使用不可变的NetApp ONTAP Snapshot 副本实现网络保险库，并使用NetApp SnapLock Compliance使其不可磨灭。在SnapLock Compliance保护下，数据无法被修改或删除，即使是ONTAP管理员或NetApp支持人员也无法修改或删除。</block>
  <block id="e6ee215fc6ae8d5260058648c5473c55" category="paragraph">使用传统方法的气隙备份涉及创建空间并物理分离主媒体和辅助媒体。网络保险库的气隙隔离包括使用标准数据访问网络之外的单独数据复制网络将 Snapshot 副本复制到不可磨灭的目的地。</block>
  <block id="d9ef7525b82a00625106ecd1c086c0d2" category="paragraph">除了隔离网络之外，进一步的措施还包括在不需要时禁用网络保险库上的所有数据访问和复制协议。这可以防止目标站点的数据访问或数据泄露。有了SnapLock Compliance，就不需要物理分离。  SnapLock Compliance可保护您存储的、时间点的、只读的 Snapshot 副本，从而实现快速数据恢复，确保数据不会被删除且不可改变。</block>
  <block id="97d5b996fbc80a3618408f40fa6ec1df" category="section-title">NetApp 的网络保险库方法</block>
  <block id="1578cff4a9b0fd7c43ee8d8b972b9e18" category="paragraph">NetApp网络保险库由SnapLock提供支持，为组织提供全面而灵活的解决方案来保护其最关键的数据资产。通过利用ONTAP中的强化技术， NetApp使您能够创建一个安全、隔离且气隙封闭的网络保险库，以抵御不断演变的网络威胁。借助NetApp，您可以确保数据的机密性、完整性和可用性，同时保持存储基础架构的灵活性和效率。</block>
  <block id="0b5cef6b9963fc25a57d208397e7591e" category="paragraph">NetApp网络保险库参考架构的主要功能包括：</block>
  <block id="1bc5e690ef5478a142174b3798ffb016" category="list-text">安全、独立的存储基础设施（例如，隔离存储系统）</block>
  <block id="d322cfc4e2b0254d10815b0449dd4a53" category="list-text">您的数据的备份是不可改变且不可消除的</block>
  <block id="cdc6a8858797650bb0e5454eb4b1f5a0" category="list-text">严格且独立的访问控制、多管理员验证和多因素身份验证</block>
  <block id="8fbeb6ab37a8ae13cd970405ab17bd20" category="list-text">快速数据恢复能力</block>
  <block id="b4b14319e40b3adad391d9a22b489988" category="example-title">cyber vault 是NetApp的产品吗？</block>
  <block id="80622f9e64f915c8cf85f50808776af0" category="inline-link-macro">ONTAP文档站点</block>
  <block id="3a161a2f6c8849119a6e47d2969e4171" category="paragraph">不，“网络保险库”是一个行业通用的术语。 NetApp创建了一个参考架构，使客户可以轻松构建自己的网络保险库，并利用数十种ONTAP安全功能来帮助保护他们的数据免受网络威胁。更多信息请访问<block ref="731acfe138c4f1eba021d5a5b0cf8e70" category="inline-link-macro-rx"></block>。</block>
  <block id="8a43a3792fe050de2e2648748d228baa" category="example-title">NetApp的网络保险库是否只是 LockVault 或SnapVault的另一个名称？</block>
  <block id="8d36af4b301abab5f4ce519b9923095a" category="paragraph">LockVault 是Data ONTAP 7 模式的一项功能，在当前版本的ONTAP中不可用。</block>
  <block id="3e1efc46d700bb2d37041eac8f9f7989" category="paragraph">SnapVault是一个遗留术语，指的是现在通过 SnapMirror 的保险库策略实现的功能。此策略允许目标保留与源卷不同数量的 Snapshot 副本。</block>
  <block id="f81a8e46a5ab2e03c6ca89ba32c0fffa" category="paragraph">Cyber vault 将SnapMirror与保险库策略和SnapLock Compliance结合使用，以创建不可变且不可消除的数据副本。</block>
  <block id="921bce414deb016832cdd0eebe5ef316" category="example-title">我可以将哪种NetApp硬件用于网络保险库、 FAS、容量闪存或性能闪存？</block>
  <block id="b9b5594bff875bda78a7354970d88b7f" category="paragraph">此网络保险库参考架构适用于整个ONTAP硬件产品组合。客户可以使用AFF A 系列、 AFF C 系列或FAS平台作为保险库。基于闪存的平台将提供最快的恢复时间，而基于磁盘的平台将提供最具成本效益的解决方案。根据要恢复的数据量以及是否同时进行多个恢复，使用基于磁盘的系统（FAS）可能需要几天到几周才能完成。请咨询NetApp或合作伙伴代表，以适当调整网络保险库解决方案的规模来满足业务需求。</block>
  <block id="46f480a39818bd5348b704e615556afa" category="example-title">我可以使用Cloud Volumes ONTAP作为网络保险库源吗？</block>
  <block id="67e72cdaee8ec8f9ce62088246eef5c5" category="paragraph">是的，但是使用 CVO 作为源需要将数据复制到本地网络保险库目标，因为SnapLock Compliance是ONTAP网络保险库的要求。从基于超大规模的 CVO 实例进行数据复制可能会产生出口费用。</block>
  <block id="198d9b268773ab1f4ab480c3ed1f05e5" category="example-title">我可以使用Cloud Volumes ONTAP作为网络保险库目标吗？</block>
  <block id="5def68796cee4756d5891d190fc37547" category="paragraph">Cyber Vault 架构依赖于 ONTAP 的SnapLock Compliance 的不可磨灭性，专为本地实施而设计。基于云的 Cyber Vault 架构正在接受调查，以供将来发布。</block>
  <block id="01fc6462c3cc731451a4b845b542a2a7" category="example-title">我可以使用ONTAP Select作为网络保险库源吗？</block>
  <block id="cd78488df47c2a190a38ede30e330fa3" category="paragraph">是的， ONTAP Select可以用作基于本地硬件的网络保险库目标的源。</block>
  <block id="246cb97066d4ac3b3c72c540ade4ded7" category="example-title">我可以使用ONTAP Select作为网络保险库目标吗？</block>
  <block id="8853865130b3e67dff0a83812b993cde" category="paragraph">不可以， ONTAP Select不应用作网络保险库目标，因为它不具备使用SnapLock Compliance 的能力。</block>
  <block id="b3ac4e6f01573294e310b580ea3f8cdb" category="example-title">NetApp的网络保险库是否仅使用SnapMirror？</block>
  <block id="80dfe8bef354f4ca4455fcb11fcde951" category="paragraph">不是， NetApp网络保险库架构利用许多ONTAP功能来创建安全、隔离、隔离和强化的数据副本。有关可使用哪些附加技术的更多信息，请参阅下一个问题。</block>
  <block id="e0d069c720e22f75167d4aa0496d2e55" category="example-title">网络保险库是否使用了其他技术或配置？</block>
  <block id="8a9c42af6fb6faa033469f55623abaa4" category="paragraph">NetApp网络保险库的基础是SnapMirror和SnapLock Compliance，但使用其他ONTAP功能（如防篡改 Snapshot 副本、多因素身份验证 (MFA)、多管理员验证、基于角色的访问控制以及远程和本地审计日志记录）可提高数据的安全性。</block>
  <block id="e3998091b66c06b5abadb79f168ee8bd" category="example-title">对于网络保险库来说， ONTAP Snapshot 副本为何比其他副本更胜一筹？</block>
  <block id="9f850630cdcd7d977cc094253f675eb4" category="inline-link-macro">CSfC 可在此处找到</block>
  <block id="2b04407b71d17e2bd8ad593106bc88ca" category="paragraph">ONTAP Snapshot 副本默认是不可变的，并且可以通过SnapLock Compliance使其不可消除。甚至NetApp支持也无法删除SnapLock Snapshot 副本。更好的问题是，是什么让NetApp网络保险库比业内其他网络保险库更好。首先， ONTAP是地球上最安全的存储，并已获得 CSfC 验证，可以在硬件和软件层静态存储机密和绝密数据。更多信息<block ref="03facc4bb6c6da048d9431b4663f84a8" category="inline-link-macro-rx"></block>。此外， ONTAP可以在存储层进行隔离，由网络保险库系统控制复制，从而可以在网络保险库网络内创建隔离。</block>
  <block id="da0963c4e24278fcc902868c7e85803b" category="example-title">网络保险库上的卷可以使用ONTAP Fabric 池吗？</block>
  <block id="d3e529c3ff1b32109917adaf6f7e3843" category="paragraph">不可以，无论策略如何，网络保险库卷（SnapLock Compliance SnapMirror目标）都不能使用 Fabric Pool 进行分层。</block>
  <block id="175e464a89d69877d560e55798eb507a" category="inline-image-macro">Cyber vault Fabric Pool 支持的配置</block>
  <block id="4b0f7e415acc4803ed866bb5498d40dc" category="paragraph"><block ref="4b0f7e415acc4803ed866bb5498d40dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4accfd2aaff380fe20a8041ba73c56f8" category="admonition">在多种情况下，Fabric 池不能与网络保险库一起使用。</block>
  <block id="6746d03611c175115b9989fa95685b82" category="list-text">Fabric Pool 冷层*不能*使用网络保险库集群。这是因为启用 S3 协议会使网络保险库参考架构的安全性失效。此外，用于 Fabric 池的 S3 存储桶无法受到保护。</block>
  <block id="6fe3db6ba77e8689d4a6a44035f21f4f" category="list-text">由于数据被锁定在卷中，因此网络保险库上的SnapLock Compliance卷*不能*分层到 S3 存储桶。</block>
  <block id="1afb52246095f5545d2fb61c023a9855" category="inline-image-macro">Cyber vault Fabric Pool 支持的级联关系配置</block>
  <block id="d8cea3a70e9bf461c23e944284a8f85d" category="paragraph"><block ref="d8cea3a70e9bf461c23e944284a8f85d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="de63a18ca325ec11ce93a2aa0a3c4fda" category="example-title">ONTAP S3 Worm 可以在网络保险库中使用吗？</block>
  <block id="3fe9e19c9d3ff2ed7b866e2ff7d10ccb" category="paragraph">不，S3 是一种数据访问协议，它使参考架构的安全性无效。</block>
  <block id="ecf88d270ec4f479268e760d5fe81424" category="example-title">NetApp Cyber Vault 是否在不同的ONTAP个性或配置文件上运行？</block>
  <block id="5c08ee4e0e80937e248c727e53f434d1" category="inline-link-macro">参考架构</block>
  <block id="21ebc10ff0128523e3767f8c0ee546a5" category="inline-link-macro">用于创建、强化和验证的 PowerShell 脚本</block>
  <block id="1dd6a632d9512375583ba1361d885ef3" category="paragraph">不，这是一个参考架构。客户可以使用<block ref="6760dc89ff92c12787d6fbef1a0f3b2f" category="inline-link-macro-rx"></block>并建立一个网络保险库，或者可以使用<block ref="82b769eb79ad905ef01e5aefc314bf8f" category="inline-link-macro-rx"></block>网络保险库。</block>
  <block id="f6b638864253a90ae1f3028e4abef32d" category="example-title">我可以在网络保险库中打开 NFS、SMB 和 S3 等数据协议吗？</block>
  <block id="0f9ac4a7688b8687a7fd7ac97084b595" category="paragraph">默认情况下，应禁用网络保险库上的数据协议以确保其安全。但是，可以在网络保险库上启用数据协议来访问数据以进行恢复或在需要时访问数据。这应该是临时进行的，并在恢复完成后禁用。</block>
  <block id="477ab0d3451aab90e2848b6621c3fc1b" category="example-title">您可以将现有的SnapVault环境转换为网络保险库吗？还是需要重新播种所有内容？</block>
  <block id="6f6bd722bc52548cd8a148eb191d4557" category="inline-link-macro">ONTAP强化指南</block>
  <block id="a53bb49b587dd47e68a9826d3e053430" category="paragraph">是可以采用一个作为SnapMirror目标的系统（具有保管库策略），禁用数据协议，并根据<block ref="e6d8970e5cac68730ae0f19bc400a2e6" category="inline-link-macro-rx"></block>，将其隔离在安全的位置，并按照参考架构中的其他程序使其成为网络保险库，而无需重新播种目的地。</block>
  <block id="9f5d33cd0923f15fa1b0451d2115bbcd" category="paragraph">*还有其他问题吗？*请发送电子邮件至 mailto:ng-cyber-vault@netapp.com[ng-cyber-vault@netapp.com^,Cyber vault questions,I would like to know more about: ] 并提出您的问题！我们将回复您的问题并将其添加到常见问题解答中。</block>
  <block id="156e5fe216bb6751d00fe0b22050bc4f" category="summary">建议采取其他措施来强化ONTAP的网络保险库</block>
  <block id="7f370f2a1bd38c8fa752e994561cb057" category="doc">网络保险库强化</block>
  <block id="e0403d2f3fcfe4ccea5a931337cb0994" category="paragraph">这些是强化ONTAP网络保险库的额外建议。请参阅下面的ONTAP强化指南以获取更多建议和程序。</block>
  <block id="740dcadc4f16ed08462b57da167192dd" category="section-title">网络保险库强化建议</block>
  <block id="a1fe321829c6330a4a1108d26c10f8ee" category="list-text">隔离网络保险库的管理平面</block>
  <block id="dc586c1969cc95c64bb2b9321cdef82e" category="list-text">不要在目标集群上启用数据 LIF，因为它们是额外的攻击媒介</block>
  <block id="1f8fb4baea8e1bfeada50e29efbf7b38" category="list-text">在目标集群上，使用服务策略限制对源集群的集群间 LIF 访问</block>
  <block id="062624db1cdcf39deeb33d0b6184dc07" category="list-text">使用服务策略和堡垒主机对目标集群上的管理 LIF 进行分段，以限制访问</block>
  <block id="7fee069a59d1ad2fb304116824449659" category="list-text">限制从源集群到网络保管库的所有数据流量，仅允许SnapMirror流量所需的端口</block>
  <block id="a2525e5321553dbd32d045d623d06984" category="list-text">尽可能禁用ONTAP中任何不需要的管理访问方法，以减少攻击面</block>
  <block id="8b63efa1c503148e91d87e086a7e147f" category="list-text">启用审计日志记录和远程日志存储</block>
  <block id="f46d338ebcadcd4ef78b5fb8bb5a52b8" category="list-text">启用多管理员验证，并要求常规存储管理员之外的管理员（例如 CISO 员工）进行验证</block>
  <block id="c55e740092c52632b586dabced59f30e" category="list-text">实施基于角色的访问控制</block>
  <block id="296e2668b2bd0c929cfe809cefecc43b" category="list-text">要求系统管理员和 ssh 进行多因素管理身份验证</block>
  <block id="6fc02371fd43549dc136d9693e9a19dc" category="list-text">对脚本和 REST API 调用使用基于令牌的身份验证</block>
  <block id="19f7e37e9e65dcfc780e92379f33216a" category="inline-link-macro">多管理员验证概述</block>
  <block id="e66ae9d42bf0a3d78aa1bccf43551333" category="inline-link-macro">ONTAP多因素身份验证指南</block>
  <block id="da0a4e3fce74935d0b8b0cf328173d7f" category="paragraph">请参阅<block ref="756572b6b3e69b9b507cb3fee5c91b0a" category="inline-link-macro-rx"></block>，<block ref="45141581361c7a5209f344882b87a4f5" category="inline-link-macro-rx"></block>和<block ref="af863b296b0cef22f0059084223aaa9e" category="inline-link-macro-rx"></block>如何完成这些强化步骤。</block>
  <block id="37eec93789dacc3011ff18efd703babf" category="summary">网络保险库互操作性</block>
  <block id="e83993319a37f1a9857825668382101f" category="paragraph">ONTAP硬件和软件可用于创建网络保险库配置。</block>
  <block id="a05428b974784440e8cc5aeec03f66e2" category="section-title">ONTAP硬件建议</block>
  <block id="2901f14717d4fa957ff0f195be9fb7f0" category="paragraph">所有ONTAP统一物理阵列均可用于网络保险库实施。</block>
  <block id="a3437fd8bb586f2d7b4d9b41247809e2" category="list-text">FAS混合存储提供了最具成本效益的解决方案。</block>
  <block id="8f9bb83721cd28a669abb06c82c0d454" category="list-text">AFF C 系列提供最高效的功耗和密度。</block>
  <block id="5f7334f64b65376d6aa8f26a30c43e18" category="list-text">AFF A 系列是性能最高的平台，提供最佳的 RTO。随着我们最新AFF A 系列的发布，该平台将提供最佳的存储效率，同时不影响性能。</block>
  <block id="e6f0dda971c9952352de52c40061703b" category="section-title">ONTAP软件建议</block>
  <block id="6e745af06ab11a01d08512ce2781332d" category="paragraph">从ONTAP 9.14.1 开始，您可以在SnapMirror关系的SnapMirror策略中为特定SnapMirror标签指定保留期，以便从源卷到目标卷复制的 Snapshot 副本保留规则中指定的保留期。如果未指定保留期，则使用目标卷的默认保留期。</block>
  <block id="c3bb4d2a093af5d57504470b0e3780c5" category="inline-link-macro">创建具有SnapLock类型的FlexClone卷</block>
  <block id="9037f0dcc0b966bbf2e8c17e646248c8" category="paragraph">从ONTAP 9.13.1 开始，您可以通过创建FlexClone并将 snaplock-type 选项设置为“non-snaplock”并在执行卷克隆创建操作时将 Snapshot 副本指定为“parent-snapshot”，从而立即恢复SnapLockSnapLock库关系的目标 SnapLock 卷上的锁定 Snapshot 副本。详细了解<block ref="99a814481682a0b1c5075660126c58ee" category="inline-link-macro-rx"></block> 。</block>
  <block id="61f0d696b0d70d071bf097f830e4548d" category="section-title">MetroCluster 配置</block>
  <block id="8e3b0842e31cd065edf7509f4a1add68" category="paragraph">对于MetroCluster配置，您应该注意以下事项：</block>
  <block id="2c02cba0058a18a3947817c90c165da6" category="list-text">您只能在同步源 SVM 之间创建SnapVault关系，而不能在同步源 SVM 和同步目标 SVM 之间创建 SnapVault 关系。</block>
  <block id="d38131940d3d5bedd9631d89b79eedcb" category="list-text">您可以创建从同步源 SVM 上的卷到数据服务 SVM 的SnapVault关系。</block>
  <block id="638a74f3636452e7b5ec1530f9f4b120" category="list-text">您可以创建从数据服务 SVM 上的卷到同步源 SVM 上的 DP 卷的SnapVault关系。</block>
  <block id="7f7e92d567821191ebefa5a855d4e4df" category="summary">这是NetApp ONTAP网络保险库解决方案的概述，该解决方案由SnapLock Compliance提供支持，可实现不可变且不可磨灭的数据保留。</block>
  <block id="593702cb70010671bdd885bd81ff3dd9" category="doc">ONTAP Cyber Vault 概述</block>
  <block id="1e89d54fcb253bced1122ec81f9e979b" category="inline-link-macro">随着网络钓鱼的增多</block>
  <block id="6bae7ab2377c58e7c7399c2d7c154a34" category="paragraph">需要实施网络保险库的主要驱动威胁是网络攻击（尤其是勒索软件和数据泄露）的日益普遍和日益复杂化。<block ref="e4fc99274fbaee88522aa25322e483dd" category="inline-link-macro-rx"></block>以及越来越复杂的凭证窃取方法，用于发起勒索软件攻击的凭证随后可用于访问基础设施系统。在这些情况下，即使是坚固的基础设施系统也面临受到攻击的风险。抵御系统入侵的唯一方法就是将数据保护并隔离在网络保险库中。</block>
  <block id="624934641769017ea4f2bf79abb12faf" category="paragraph">NetApp 基于ONTAP的网络保险库为组织提供了全面而灵活的解决方案来保护其最关键的数据资产。通过利用逻辑隔离和强大的强化方法， ONTAP使您能够创建安全、隔离的存储环境，以抵御不断演变的网络威胁。借助ONTAP，您可以确保数据的机密性、完整性和可用性，同时保持存储基础架构的灵活性和效率。</block>
  <block id="2dec7714f0e70f26d9a60b1628505ab8" category="admonition">从 2024 年 7 月开始，之前以 PDF 形式发布的技术报告内容已与ONTAP产品文档集成。此外，诸如本文档之类的新技术报告 (TR) 将不再获得 TR 编号。</block>
  <block id="d825eb03b1924c3d41f95d2810515203" category="section-title">什么是网络保险库？</block>
  <block id="2712d3844c4c3f6fae0cd10b9d646084" category="paragraph">网络保险库是一种特定的数据保护技术，涉及将关键数据存储在与主要 IT 基础设施分开的隔离环境中。</block>
  <block id="b5d051447fe05767527cfba9888c9c8b" category="paragraph">“气隙”、*不可变*和*不可删除*的数据存储库，可免受影响主网络的威胁，例如恶意软件、勒索软件甚至内部威胁。可以通过*不可变*和*不可磨灭*的快照实现网络保险库。</block>
  <block id="bb393d57385c8b74901eb02a39ed13dc" category="paragraph">使用传统方法的气隙备份涉及创建空间并物理分离主媒体和辅助媒体。通过将媒体移出现场和/或切断连接，不良行为者就无法访问数据。这可以保护数据，但会导致恢复时间变慢。</block>
  <block id="b1fea317f2192a7f6b00f81aa359643e" category="paragraph">NetApp网络保险库参考架构的主要功能包括：</block>
  <block id="f10717e2eaa216739d8073bd798a0ded" category="list-text">数据副本必须毫无例外地*不可变*且*不可删除*</block>
  <block id="734267ccf3f4f1e94e8565b8a049fb1c" category="list-text">严格的访问控制和多因素身份验证</block>
  <block id="4898fbee11d0ff60f3a13b2b594bd5b6" category="inline-link-macro">SnapLock Compliance对 Snapshot 副本进行 WORM 保护</block>
  <block id="126ac9f6149081eb0e97c2e939eaad52" category="inline-link-macro">博客</block>
  <block id="3e6b61aacafaa57213551333b549df87" category="paragraph">您可以将NetApp存储与ONTAP结合使用，作为隔离网络保险库，方法是利用<block ref="d648f1725f78e3fe9c584bbda6f97852" category="inline-link-macro-rx"></block>。您可以在 Cyber Vault 上执行所有基本的SnapLock Compliance任务。配置完成后，Cyber vault 卷将自动受到保护，无需手动将 Snapshot 副本提交到 WORM。有关逻辑气隙的更多信息，请参阅<block ref="69fe64c894cb9edcd5204ee2ba0a1d06" category="inline-link-macro-rx"></block></block>
  <block id="7c35c6af3252a7eecdd85c1fcb879532" category="paragraph">SnapLock Compliance用于遵守银行和金融法规 SEC 70-a-4(f)、FINRA 4511(c) 和 CFTC 1.31(c)-(d)。该公司已通过 Cohasset Associates 认证，符合这些规定（可根据要求提供审计报告）。通过使用获得此认证的SnapLock Compliance，您将获得一种强化的数据隔离机制，世界上最大的金融机构依靠该机制来确保银行记录的保留和检索。</block>
  <block id="4e7376319ff48b8dfcb35e68dbf02e2e" category="inline-image-macro">使用NetApp ONTAP实现逻辑隔离的网络保险库</block>
  <block id="aefe9e828d9b25c386f092ac19d752e9" category="paragraph"><block ref="aefe9e828d9b25c386f092ac19d752e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee32c612b4ad8995839944dfa5b4106" category="summary">这是用于配置、强化和验证基于ONTAP的网络保险库的NetApp ONTAP解决方案</block>
  <block id="0da4aca37b5c3f5e762fff2e6b4e1a86" category="doc">ONTAP cyber Vault PowerShell 解决方案结论</block>
  <block id="4129fdc4d38744d55fac07ce36812bfe" category="paragraph">通过利用ONTAP提供的气隙和强大的强化方法， NetApp使您能够创建一个安全、隔离的存储环境，以抵御不断演变的网络威胁。所有这些都是在保持现有存储基础设施的灵活性和效率的同时实现的。这种安全访问使公司能够以对现有人员、流程和技术框架进行最小限度的改变来实现其严格的安全和正常运行时间目标。</block>
  <block id="1fe38d41304ecc5c3391029238d0e636" category="paragraph">ONTAP Cyber Vault 使用ONTAP中的原生功能，是一种简单的方法，可提供额外的保护，以创建数据的不可变和不可磨灭的副本。将 NetApp 基于ONTAP的网络保险库添加到整体安全态势中将：</block>
  <block id="6d8aabff945b50ee135ef521b31cf115" category="list-text">创建一个与生产和备份网络分离且断开的环境，并限制用户对它的访问。</block>
  <block id="015f8c34f52b6ef8a3361958660f5e88" category="doc">其他注意事项</block>
  <block id="06150c2ef7426cdc42a37f8856db5d71" category="paragraph">在设计和部署基于ONTAP 的网络保险库时，还需要考虑其他因素。</block>
  <block id="ef21cefa3b30f59f1f87e2da0cc643bd" category="section-title">对主要/源的性能影响</block>
  <block id="8a7276b4efa659ef30f6b6a2d7a202ab" category="paragraph">由于数据传输是一种拉取操作，因此对主存储性能的影响可能因工作负载、数据量和备份频率而异。然而，由于数据传输旨在将数据保护和备份任务卸载到网络保险库存储系统，因此对主系统的整体性能影响通常是适度且可控的。在初始关系设置和第一次完整备份期间，大量数据从主系统传输到网络保险库系统（ SnapLock Compliance卷）。这会导致主系统的网络流量和 I/O 负载增加。初始完整备份完成后， ONTAP只需要跟踪和传输自上次备份以来发生变化的块。与初始复制相比，这会导致 I/O 负载小得多。增量更新效率高，对主存储性能的影响最小。保险库进程在后台运行，从而减少了干扰主系统生产工作负载的可能性。</block>
  <block id="3fa9b1870bdd1f909fa527ead1847a9f" category="list-text">确保存储系统有足够的资源（CPU、内存和 IOP）来处理额外的负载，从而减轻性能影响。</block>
  <block id="e26b68f87f0bcced10421c02c995c01c" category="doc">使用 PowerShell 创建ONTAP网络保险库</block>
  <block id="0608886e95bfaade85ecb642ffcaa087" category="paragraph">使用传统方法的气隙备份涉及创建空间并物理分离主媒体和辅助媒体。通过将媒体移出现场和/或切断连接，不良行为者就无法访问数据。这可以保护数据，但会导致恢复时间变慢。有了SnapLock Compliance，就不需要物理分离。  SnapLock Compliance可保护存储的快照时间点、只读副本，从而使数据可快速访问、不会被删除或无法擦除，也不会被修改或无法改变。</block>
  <block id="6adff04de71e98b33a4ba02e03d26e23" category="paragraph">在开始执行本文档下一部分中的步骤之前，请确保满足以下先决条件：</block>
  <block id="a52ff5243d97b356bc0beb1618695e2a" category="list-text">源集群和目标集群必须对等。</block>
  <block id="06f89348fb6405d1e19c9f061603d5a8" category="list-text">源 SVM 和目标 SVM 必须对等。</block>
  <block id="cc72b2bed7745b4e54dfe4c79ab32cec" category="list-text">确保集群对等加密已启用。</block>
  <block id="5cba6496973968d8c12f7892070747ae" category="paragraph">设置到ONTAP网络保险库的数据传输需要几个步骤。在主卷上，配置快照策略，使用适当的计划指定要创建哪些副本以及何时创建这些副本，并分配标签以指定应由SnapVault传输哪些副本。在辅助服务器上，必须创建一个SnapMirror策略，指定要传输的 Snapshot 副本的标签以及应在网络保管库中保留多少个副本。配置这些策略后，创建SnapVault关系并建立传输计划。</block>
  <block id="6b5f9ff0b31197c38688421020bff2c3" category="admonition">本文档假设主存储和指定的ONTAP网络保险库已经设置和配置。</block>
  <block id="99acec59dbacad1d0f3f08f2cf18bbca" category="admonition">Cyber vault 集群可以与源数据位于相同或不同的数据中心。</block>
  <block id="7785a5a3ae1e43a2f12bcb87305d4539" category="section-title">创建ONTAP网络保险库的步骤</block>
  <block id="da92912847b71bde090438c40e7217c1" category="list-text">使用ONTAP CLI 或系统管理器初始化合规时钟。</block>
  <block id="71aa8c74b518bbf7bb7964ca89bc891c" category="list-text">创建启用了SnapLock合规性的数据保护卷。</block>
  <block id="e5634fbe2c20740245a999156b5c56b5" category="list-text">使用SnapMirror create 命令创建SnapVault数据保护关系。</block>
  <block id="5a8f72c4f41945098e0ddab367b1e1f0" category="list-text">设置目标卷的默认SnapLock Compliance保留期。</block>
  <block id="21a8af9303e28a6638d27a632a1eb63f" category="admonition">默认保留时间为“设置为最小值”。作为保管库目标的SnapLock卷具有分配的默认保留期。此期限的值最初设置为最短 0 年，最长 100 年（从ONTAP 9.10.1 开始）。对于早期版本的ONTAP ，对于SnapLock Compliance卷，该值为 0 - 70。每个NetApp Snapshot 副本最初都遵循此默认保留期。如果需要，保留期可以延长，但绝不能缩短。有关更多信息，请参阅<block ref="6bfd1941a913bb5402f71f45f07ab0ab" category="inline-link-macro-rx"></block> 。</block>
  <block id="f3fa6e05e7b5c1079c1b31add5886b2f" category="paragraph">以上包括手动步骤。安全专家建议将流程自动化，以避免手动管理带来的巨大错误。下面是完全自动化SnapLock合规性的先决条件和配置以及时钟初始化的代码片段。</block>
  <block id="50d31cd9005dfec5def834e352232105" category="paragraph">以下是初始化ONTAP合规时钟的 PowerShell 代码示例。</block>
  <block id="6c8f5e5339c364be2391c9ee4060cd41" category="paragraph">以下是配置ONTAP网络保险库的 PowerShell 代码示例。</block>
  <block id="8df562003e233e4648b52ee3d3506e21" category="list-text">完成上述步骤后，使用SnapLock Compliance和SnapVault 的隔离网络保险库就准备就绪了。</block>
  <block id="40209c9fade23a3c61d471bfada73d53" category="paragraph">在将快照数据传输到网络保管库之前，必须初始化SnapVault关系。然而，在此之前，必须进行安全强化以确保保险库的安全。</block>
  <block id="0d14a71dea40bf68482012454c0acebb" category="doc">ONTAP网络保险库数据恢复</block>
  <block id="ba06c5ba9d10400e51bdb12f2a21beb7" category="paragraph">如果生产数据中心的数据被破坏，则可以将网络保险库中的数据安全地恢复到所选环境。与物理隔离解决方案不同，隔离ONTAP网络保险库是使用SnapLock Compliance和SnapMirror等原生ONTAP功能构建的。结果是恢复过程既快速又易于执行。</block>
  <block id="c0cb89319145b4090fe758651fdeecfa" category="paragraph">如果发生勒索软件攻击并需要从网络保险库中恢复，则恢复过程简单易行，因为可以使用网络保险库中存储的快照副本来恢复加密数据。</block>
  <block id="7428234f29b1641fbf79c6edab175a57" category="inline-image-macro">恢复关系</block>
  <block id="91cdee7a5190e3a7221859b50c5b34b3" category="paragraph"><block ref="91cdee7a5190e3a7221859b50c5b34b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5848312c103d65bd0a8eb9646f2f452a" category="paragraph">如果要求提供一种更快的方法，在必要时使数据重新上线，以便快速验证、隔离和分析数据以进行恢复。通过使用FlexClone并将 snaplock-type 选项设置为非 snaplock 类型，可以轻松实现这一点。</block>
  <block id="8e52de0d4b03d5fe87dc88da09616c7f" category="inline-link-macro">这里。</block>
  <block id="6f535c7cae35557e074faf8c0aeb066a" category="admonition">从ONTAP 9.13.1 开始，可以通过创建FlexClone并将 snaplock-type 选项设置为“non-snaplock”来立即恢复SnapLock保险库关系的目标SnapLock卷上的锁定 Snapshot 副本。执行卷克隆创建操作时，指定Snapshot副本作为“父快照”。有关创建具有SnapLock类型的FlexClone卷的更多信息<block ref="0f7432d298f848d88a23a56f23145c2c" category="inline-link-macro-rx"></block></block>
  <block id="24f3786807ff4ca214bdb1768dcc620a" category="admonition">实践网络保险库的恢复程序将确保建立连接到网络保险库和检索数据的正确步骤。规划和测试程序对于网络攻击事件期间的任何恢复都至关重要。</block>
  <block id="4f6472b8299b1f530d7f5289901e0dd6" category="doc">使用 PowerShell 强化ONTAP Cyber Vault</block>
  <block id="251b26e1d1069320f2e37664ce9ef0c3" category="paragraph">与传统解决方案相比， ONTAP网络保险库具有更好的抵御网络攻击的能力。在设计增强安全性的架构时，考虑减少攻击面的措施至关重要。这可以通过各种方法实现，例如实施强化密码策略、启用 RBAC、锁定默认用户帐户、配置防火墙以及利用审批流程对保险库系统进行任何更改。此外，限制特定 IP 地址的网络访问协议有助于限制潜在的漏洞。</block>
  <block id="939b4cbd29938b72b00b4d875cea213a" category="inline-link-macro">ONTAP的指导和配置设置</block>
  <block id="d1b758a51728f42faff92d986fdead63" category="paragraph">ONTAP提供了一组控制措施，可以强化ONTAP存储。使用<block ref="bdd0a3f65f77860710557f4555420bd5" category="inline-link-macro-rx"></block>帮助组织满足信息系统机密性、完整性和可用性的规定安全目标。</block>
  <block id="6e6fc2e404e9e1fd4077dce8db5d0b00" category="section-title">强化最佳实践</block>
  <block id="049a81946163eeea703385d784239694" category="section-title">手动步骤</block>
  <block id="741d9512cfa4352a6a2edbd4f55ee476" category="list-text">创建具有预定义和自定义管理角色的指定用户。</block>
  <block id="c7c411edea573f8d1b813997eee3b3f9" category="list-text">创建新的 IP 空间来隔离网络流量。</block>
  <block id="469f9932f3c6cca10f7c8ab6fc82d6e1" category="list-text">创建驻留在新 IP 空间中的新 SVM。</block>
  <block id="b43e377130ea68e28f57b5e451375083" category="list-text">确保防火墙路由策略配置正确，并且所有规则都定期审核并根据需要更新。</block>
  <block id="e24611533a2b571534bc7f9a71e39703" category="section-title">ONTAP CLI 或通过自动化脚本</block>
  <block id="60a3dbbbd6a8ea76d9bf56aa0d6395d1" category="list-text">使用多管理员验证 (MFA) 保护管理</block>
  <block id="9b98a3da00d9a9709cdf9496422e8479" category="list-text">启用集群之间“传输中”的标准数据加密。</block>
  <block id="cbe61f355ee5cc94da340a9c3272475b" category="list-text">使用强加密密码保护 SSH 并强制使用安全密码。</block>
  <block id="16c72d280102d2756d84bf9ae14b3379" category="list-text">启用全局 FIPS。</block>
  <block id="8537289600e06e7dfd0dc96ffb8e03d5" category="list-text">应禁用 Telnet 和远程 Shell (RSH)。</block>
  <block id="c20737fbedd85ee380c970409b25d205" category="list-text">锁定默认管理员帐户。</block>
  <block id="593c1a7fe1cded0c8b431481447ee72a" category="list-text">禁用数据 LIF 并保护远程访问点。</block>
  <block id="e47936370e053d52f0704aa39f415f35" category="list-text">禁用并删除未使用或多余的协议和服务。</block>
  <block id="1cc79d498fefa7b67a946ff635b322f8" category="list-text">加密网络流量。</block>
  <block id="ba62835c3ba2d9cb411e6a0888c80d38" category="list-text">设置超级用户和管理角色时使用最小特权原则。</block>
  <block id="84b26530e3a4542584be58a6896732b5" category="list-text">使用允许的 IP 选项限制来自特定 IP 地址的 HTTPS 和 SSH。</block>
  <block id="b870221a347e087bae58e4cbd0b0182f" category="list-text">根据传输计划停止并恢复复制。</block>
  <block id="60c71a32a09b9a18895988c91e2b53bf" category="inline-link-macro">ONTAP安全强化指南</block>
  <block id="92082f67628b39fa9fbe47be69b8ea40" category="paragraph">项目 1-4 需要手动干预，例如指定隔离网络、隔离 IP 空间等，并且需要事先执行。有关配置强化的详细信息，请参阅<block ref="488de9ac2b73da63b9aa747b6c26282a" category="inline-link-macro-rx"></block>。其余部分可以轻松实现自动化，以便于部署和监控。这种精心设计的方法的目的是提供一种机制来自动化强化步骤，以确保保险库控制器的未来安全。网络保险库隔离间隙打开的时间范围尽可能短。 SnapVault利用永久增量技术，该技术只会将自上次更新以来的更改移动到网络保险库中，从而最大限度地减少网络保险库必须保持开放的时间。为了进一步优化工作流程，网络保险库的开放与复制计划相协调，以确保最小的连接窗口。</block>
  <block id="efaa27643bdf4bee5c33b8da50bcf8aa" category="paragraph">以下是用于强化ONTAP控制器的 PowerShell 代码示例。</block>
  <block id="46fd66c42f69fb5b81f1310ce4c6874a" category="doc">使用 PowerShell 的ONTAP Cyber Vault 概述</block>
  <block id="2351e5960b7cb8f3025457938342e65b" category="paragraph">在当今的数字环境中，保护组织的关键数据资产不仅是一种最佳实践，更是业务的当务之急。网络威胁正以前所未有的速度发展，传统的数据保护措施已不足以保证敏感信息的安全。这就是网络保险库的作用所在。NetApp 基于ONTAP的尖端解决方案将先进的隔离技术与强大的数据保护措施相结合，打造出一道抵御网络威胁的坚不可摧的屏障。通过使用安全强化技术隔离最有价值的数据，网络保险库可以最大限度地减少攻击面，从而确保最关键的数据在需要时保持机密、完整且随时可用。</block>
  <block id="47f9e5623ff2b41ebd2d447b529c900d" category="paragraph">网络保险库是一种安全的存储设施，由防火墙、网络和存储等多层保护组成。这些组件保护关键业务运营所需的重要恢复数据。网络保险库的组件会根据保险库策略定期与基本生产数据同步，但除此之外仍然无法访问。这种隔离且断开的设置可确保在发生危害生产环境的网络攻击时，可以轻松地从网络保险库进行可靠的最终恢复。</block>
  <block id="b94455960f4bb1964ed0c70c02a74d4d" category="paragraph">NetApp通过配置网络、禁用 LIF、更新防火墙规则以及将系统与外部网络和互联网隔离，轻松为网络保险库创建隔离间隙。这种强大的方法有效地将系统与外部网络和互联网断开，提供无与伦比的保护，防止远程网络攻击和未经授权的访问尝试，使系统免受基于网络的威胁和入侵。</block>
  <block id="7269238cee837a4ff5c419cbd813b5d8" category="paragraph">将此与SnapLock Compliance保护相结合，数据无法被修改或删除，即使是ONTAP管理员或NetApp支持人员也无法修改或删除。  SnapLock定期接受 SEC 和 FINRA 法规的审核，确保数据弹性符合银行业严格的 WORM 和数据保留法规。  NetApp是唯一一家经过 NSA CSfC 验证可以存储绝密数据的企业存储公司。</block>
  <block id="f7ce98c260b0404036ec858c56acb937" category="inline-image-macro">具有不可变且不可磨灭的SnapLock副本的气隙ONTAP网络保险库</block>
  <block id="4cb8c4517d18b2292cf749f8165f9fb3" category="paragraph"><block ref="4cb8c4517d18b2292cf749f8165f9fb3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="646f8210ea720792239b7a77a3b7949b" category="paragraph">本文档介绍了 NetApp 网络保险库从本地ONTAP存储自动配置到另一个指定ONTAP存储的过程，其中不可变快照增加了额外的保护层，以防止网络攻击，从而实现快速恢复。作为此架构的一部分，整个配置均按照ONTAP最佳实践应用。最后一部分介绍了在发生攻击时执行恢复的说明。</block>
  <block id="ec1f72af6964e0c181b89e6486615a06" category="admonition">同样的解决方案也适用于使用 FSx ONTAP在 AWS 中创建指定的网络保险库。</block>
  <block id="6370e428b3322e10ac1794e9bf23b652" category="section-title">创建ONTAP网络保险库的高级步骤</block>
  <block id="5d0213c9adc1a9c9b03ccc7b8c6c98b3" category="list-text">创建对等关系</block>
  <block id="da2df0151d40dace8ce2ae6ef3300192" category="list-text">使用ONTAP存储的生产站点与指定的网络保管库ONTAP存储对等</block>
  <block id="e340d0e706d74564031d7414f7c536be" category="list-text">创建SnapLock Compliance卷</block>
  <block id="252c4e1e13c2a104971ccbcd6a9981c6" category="list-text">设置SnapMirror关系和规则以设置标签</block>
  <block id="0623d1442b133ee5fbc5288697a35371" category="list-text">已配置SnapMirror关系和适当的计划</block>
  <block id="907c7d9abc44727e77e9bb3ee0e7e291" category="list-text">在启动SnapMirror （保管库）传输之前设置保留</block>
  <block id="86b07b1cf89d6af94e181068db912f1f" category="list-text">对复制的数据应用保留锁，进一步防止数据被任何内部人员窃取或数据故障。使用此功能，在保留期到期之前无法删除数据</block>
  <block id="9d268ac89995cb3b700234eb88007a7e" category="list-text">组织可以根据自己的需求将这些数据保存几周/几个月</block>
  <block id="805a53944b7ba36204435936046b97a2" category="list-text">根据标签初始化SnapMirror关系</block>
  <block id="16d073c2978b08b106cdc85c1b37cbe6" category="list-text">初始播种和永久增量传输根据SnapMirror计划进行</block>
  <block id="6d5bb39a04b1c337f1cec9cf217854a2" category="list-text">数据受到SnapLock合规性的保护（不可变且不可删除），并且数据可供恢复</block>
  <block id="c27e40cdc4b5bd377ac2102055640aba" category="list-text">实施严格的数据传输控制</block>
  <block id="ca1ca136a6161549f1d03c243cce2d60" category="list-text">网络保险库在有限的时间内解锁，包含来自生产现场的数据，并与保险库中的数据同步。传输完成后，连接断开、关闭并再次锁定</block>
  <block id="c10d8947b88881deefe425332c2f3a2f" category="list-text">快速恢复</block>
  <block id="90101aa188a2d4661340cb6a8d941e19" category="list-text">如果生产站点的主要数据受到影响，则网络保管库中的数据可以安全地恢复到原始生产环境或其他选定的环境</block>
  <block id="11aa1a991aa47b9bd40dfd07ac5341fe" category="paragraph"><block ref="11aa1a991aa47b9bd40dfd07ac5341fe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e897f23ed71aef1c0a8acf1ae54e9e4" category="section-title">解决方案组件</block>
  <block id="b8dc118a4d987d251c6389a060eb6616" category="paragraph">NetApp ONTAP在源集群和目标集群上运行 9.15.1。</block>
  <block id="674c4485b543845fef358f4a15364a9f" category="paragraph">ONTAP One： NetApp ONTAP 的一体化许可证。</block>
  <block id="210169c978827dc251abf09648b0947f" category="paragraph">ONTAP One 许可证使用的功能：</block>
  <block id="c38c45e0a73411d375d048ee41944853" category="list-text">SnapLock Compliance</block>
  <block id="794cb725c5631ad99b5b7c000307f0df" category="list-text">SnapMirror</block>
  <block id="cb93ad4589e6e6834d2627d2ef8c8456" category="list-text">多管理员验证</block>
  <block id="a8ef5ad9b3d738a1e5d80f3bb3f7500a" category="list-text">ONTAP提供的所有强化功能</block>
  <block id="a577a1de478e118f4083cb880af80c95" category="list-text">为网络保险库提供单独的 RBAC 凭证</block>
  <block id="cfe8082c533dd44c75ecda26b2291b18" category="inline-link-macro">ONTAP网络保险库大小调整</block>
  <block id="9fa04024e5aa7d834bf6a462989c6677" category="admonition">所有ONTAP统一物理阵列均可用于网络保险库，但基于AFF C 系列容量的闪存系统和FAS混合闪存系统是实现此目的最具成本效益的理想平台。请咨询<block ref="203cce3753c96de9f2cf6bad05b30370" category="inline-link-macro-rx"></block>以获得尺寸指导。</block>
  <block id="6b998415349a6827376a59228eeecbd4" category="doc">配置、分析、cron脚本</block>
  <block id="cf9f7edb0be1f55843fc73f376e0ff62" category="inline-link-macro">可以下载的单个脚本</block>
  <block id="532198b2aa0267d919cd7818199ff486" category="paragraph">NetApp创建了一个<block ref="4b49387e84540cb51ff4cc2ef52048ad" category="inline-link-macro-rx"></block>并用于配置、验证和安排网络保险库关系。</block>
  <block id="e7c8a1aa3b5a59fa34304e5dcbd4a81a" category="section-title">此脚本的作用</block>
  <block id="fa823ae2ebe162d7679db67051dbcec5" category="list-text">集群对等</block>
  <block id="4bd9bbbfc6e1418dce23c6dc0972fd6b" category="list-text">SVM 对等</block>
  <block id="4d6d9efb15be61f7961ee0db47ff6a3d" category="list-text">DP 卷创建</block>
  <block id="5be23e9aa1624d0de2f996219cfc2f71" category="list-text">SnapMirror关系和初始化</block>
  <block id="6ece46f16dd93c46de3ba34758e3c6d6" category="list-text">强化用于网络保险库的ONTAP系统</block>
  <block id="5f6386f9bc6ea1ddf80f171eef8b3976" category="list-text">根据传输计划暂停和恢复关系</block>
  <block id="71d3947260342e0f2777a9aac436422b" category="list-text">定期验证安全设置并生成显示任何异常的报告</block>
  <block id="a2a2857a75455600003c3f7e4646a745" category="section-title">如何使用此脚本</block>
  <block id="ea014d4320b522b16698122ffdd7ca0d" category="inline-link-macro">下载脚本</block>
  <block id="bff8bd9a515703b5796c8827f424d311" category="paragraph"><block ref="4859c18d5bc36f2487b57b357b11254e" category="inline-link-macro-rx"></block>要使用该脚本，只需按照以下步骤操作：</block>
  <block id="d3e47a0e6b27f870fc79b2dde9de9964" category="list-text">以管理员身份启动 Windows PowerShell。</block>
  <block id="01b3fa6799091573a33d88f7aaa1b498" category="list-text">导航到包含脚本的目录。</block>
  <block id="ce90ad54ce06bcea194a14687faa6d8d" category="list-text">使用执行脚本<block ref="d1e041f462a885d9cc24a16d5cc17a83" prefix=" " category="inline-code"></block>语法以及必需的参数</block>
  <block id="5e7646560e7dc930103478e4c493cce3" category="admonition">请确保输入所有信息。第一次运行（配置模式）时，它将要求提供生产系统和新网络保险库系统的凭证。之后，它将在系统之间创建 SVM 对等（如果不存在）、卷和SnapMirror并初始化它们。</block>
  <block id="f96f26498ab2fb6268b93ed11bec98d5" category="admonition">Cron 模式可用于安排数据传输的静止和恢复。</block>
  <block id="10d339b8f7cc52b3ddcd628ce261282e" category="section-title">操作模式</block>
  <block id="3b2d90d09552843e72095d3f7b85081e" category="paragraph">自动化脚本提供 3 种执行模式 -<block ref="e2d5a00791bce9a01f99bc6fd613a39d" prefix=" " category="inline-code"></block> ，<block ref="57f0a7008635d0a0fe7a6c9335185020" prefix=" " category="inline-code"></block>和<block ref="9d3bb895f22bf0afa958d68c2a58ded7" prefix=" " category="inline-code"></block>。</block>
  <block id="d0b327d46e717c0c3d6eb5b731a5b892" category="list-text">配置 - 执行验证检查并将系统配置为隔离。</block>
  <block id="9a8997c032f49db278e067eed39337ba" category="list-text">分析——自动监控和报告功能，向监控组发送异常和可疑活动的信息，以确保配置不会偏离。</block>
  <block id="8f124107e4c5f15dfb1816f4e4730416" category="list-text">Cron - 为了启用断开连接的基础设施，cron 模式会自动禁用 LIF 并停止传输关系。</block>
  <block id="db75754ffe0df3ec27656b870b7dea82" category="paragraph">传输选定卷中的数据需要一些时间，具体取决于系统性能和数据量。</block>
  <block id="4b35d7ec208d3722b02cc5f0d26c3b54" category="doc">使用 PowerShell 验证ONTAP网络保险库</block>
  <block id="602b6e54f0266bfc05e2c7d355e7414f" category="paragraph">强大的网络保险库应该能够抵御复杂的攻击，即使攻击者拥有以提升的权限访问环境的凭证。</block>
  <block id="3fdb4e1a465eae30e378a33457ab2c34" category="paragraph">一旦规则到位，尝试（假设攻击者能够以某种方式进入）删除保险库端的快照将会失败。通过施加必要的限制和保护系统，所有强化设置均适用相同的规定。</block>
  <block id="c644c97c3e5b4b3c78e7201a031c6ded" category="paragraph">PowerShell 代码示例，用于按计划验证配置。</block>
  <block id="9739a72f2e4b4bcbd12e7bf1d554ad01" category="paragraph">此屏幕截图显示保险库控制器上没有连接。</block>
  <block id="eb12a345a0986b4352e411f9b229b7ed" category="inline-image-macro">确认没有连接到网络保险库</block>
  <block id="d80041de4b3ff4f5c121fd4350326187" category="paragraph"><block ref="d80041de4b3ff4f5c121fd4350326187" category="inline-image-macro-rx" type="image"></block></block>
  <block id="578b67b01e419b382e0bc01ab0f64696" category="paragraph">该屏幕截图显示快照无法被篡改。</block>
  <block id="bf3c20d89c90dde50eeb3195bc21d8e7" category="inline-image-macro">验证无法篡改 Snapshot 副本</block>
  <block id="229e36c9824dec3e0e1b8fbb600fd37e" category="paragraph"><block ref="229e36c9824dec3e0e1b8fbb600fd37e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6862ee3688c9dfab927cb45fb22e3c4" category="paragraph">要验证并确认气隙功能，请按照以下步骤操作：</block>
  <block id="3a2634b08b7653e135374ae8567532b8" category="list-text">测试网络隔离功能以及在未传输数据时停止连接的能力。</block>
  <block id="eb6487ff2056eb577c7261810d826f82" category="list-text">验证管理接口不能从除允许的 IP 地址之外的任何实体访问。</block>
  <block id="e7965c1db39545fd48340c6d1ff19f51" category="list-text">验证多管理员验证是否到位以提供额外的批准层。</block>
  <block id="52e3d555bd873317f96c3a9fd557f7ee" category="list-text">验证通过 CLI 和 REST API 访问的能力</block>
  <block id="ebc7f4a8ebd484f727b054954e243438" category="list-text">从源头触发向保险库的传输操作，并确保保险库副本无法被修改。</block>
  <block id="e51b28ff57a21c8dfdfe78149aff4ba5" category="list-text">尝试删除传输到保管库的不可变快照副本。</block>
  <block id="955d750fe69001dcd9e70fe830ede961" category="list-text">尝试通过篡改系统时钟来修改保留期。</block>
  <block id="050d61c8820e11ccfe2ce2aec96faae0" category="summary">有关ONTAP网络保险库的其他资源</block>
  <block id="f5012b530f4edda8fc84a9a85c7d87b1" category="doc">网络保险库资源</block>
  <block id="7d1bfef321bba9de1df740589e9e4138" category="paragraph">要了解有关此网络保险库信息中描述的信息的更多信息，请参阅以下附加信息和安全概念。</block>
  <block id="7b7c147e071cbfabbd90e1e5a8cdcc2c" category="inline-link-macro">NetApp网络保险库：多层数据保护解决方案简介</block>
  <block id="2ec0b144eddfa383c3b0bd0eadf31f34" category="list-text"><block ref="2ec0b144eddfa383c3b0bd0eadf31f34" category="inline-link-macro-rx"></block></block>
  <block id="f1694ece9e477d3c0eca3ac76130a3c2" category="inline-link-macro">NetApp凭借业界首款 AI 驱动的盒内勒索软件检测解决方案荣获 AAA 评级</block>
  <block id="b4ee8eeb845cc7c663017d2599d7f8bf" category="list-text"><block ref="b4ee8eeb845cc7c663017d2599d7f8bf" category="inline-link-macro-rx"></block></block>
  <block id="5b7373d25ead47f1d5bafabffdd14ce3" category="inline-link-macro">利用全球最安全的存储提升网络弹性</block>
  <block id="139903f74104f35e718434ae224602d8" category="list-text"><block ref="139903f74104f35e718434ae224602d8" category="inline-link-macro-rx"></block></block>
  <block id="488de9ac2b73da63b9aa747b6c26282a" category="list-text"><block ref="488de9ac2b73da63b9aa747b6c26282a" category="inline-link-macro-rx"></block></block>
  <block id="29000a64f86d0ced6401364c84a6d231" category="inline-link-macro">NetApp零信任</block>
  <block id="96cea448ae8e7aa588797fa0b6197e47" category="list-text"><block ref="96cea448ae8e7aa588797fa0b6197e47" category="inline-link-macro-rx"></block></block>
  <block id="bdab6245dde2209c0ff25943807d8ef0" category="inline-link-macro">NetApp网络弹性</block>
  <block id="43351571701d3a060a9bbf00f3677deb" category="list-text"><block ref="43351571701d3a060a9bbf00f3677deb" category="inline-link-macro-rx"></block></block>
  <block id="0df44537b4deaa5dd951a46ed58d229b" category="inline-link-macro">NetApp数据保护</block>
  <block id="c62fad2ea98fd9f1177e527ab2a75a65" category="list-text"><block ref="c62fad2ea98fd9f1177e527ab2a75a65" category="inline-link-macro-rx"></block></block>
  <block id="07e058523b940c42c2d4b65e94ee214d" category="inline-link-macro">使用 CLI 的集群和 SVM 对等概述</block>
  <block id="c66304fd3bb69afcb2045ae9a7ab7870" category="list-text"><block ref="c66304fd3bb69afcb2045ae9a7ab7870" category="inline-link-macro-rx"></block></block>
  <block id="9e0aded05f19b1f2701afc105f69a962" category="inline-link-macro">SnapVault归档</block>
  <block id="08c865eb640dc4ddda1ac628060fa542" category="list-text"><block ref="08c865eb640dc4ddda1ac628060fa542" category="inline-link-macro-rx"></block></block>
  <block id="1e22e56d8c2db36b85d9349bc2f0d405" category="list-text"><block ref="1e22e56d8c2db36b85d9349bc2f0d405" category="inline-link-macro-rx"></block></block>
  <block id="472be07f54dc3a40357632c6ca6633ef" category="summary">帮助确定ONTAP网络保险库大小的指南</block>
  <block id="522d3bcc770dc8807876ec7784013d4b" category="doc">使用ONTAP调整网络保险库大小</block>
  <block id="646101c917c5be896626b3c57c969198" category="paragraph">确定网络保险库的规模需要了解在给定的恢复时间目标 (RTO) 内需要恢复多少数据。许多因素都会影响到正确设计合适规模的网络保险库解决方案。在确定网络保险库的规模时，必须同时考虑性能和容量。</block>
  <block id="d13bdd68799f45a8059c350ea9776588" category="section-title">性能大小考虑因素</block>
  <block id="0b0dacc9dbec575c2e7d86ce2134e43d" category="list-text">源平台型号有哪些（FAS v AFF A 系列 v AFF C 系列）？</block>
  <block id="f1bb3c05c0f0f04e7664ca29d8a71b07" category="list-text">源和网络库之间的带宽和延迟是多少？</block>
  <block id="3e91f14ebe7da993064d6cf0932e0617" category="list-text">文件大小有多大以及有多少个文件？</block>
  <block id="d6e79233b78b849991e10a72a82d962e" category="list-text">您的恢复时间目标是多少？</block>
  <block id="f7af58b6687c6aa17e3020ceebb90d9e" category="list-text">您需要在 RTO 内恢复多少数据？</block>
  <block id="8629a35ff821e6ef78e239b9b6152093" category="list-text">网络保险库将吸收多少个SnapMirror扇入关系？</block>
  <block id="fa34d67cae077618779f272e3417e257" category="list-text">是否会同时发生单次或多次恢复？</block>
  <block id="a00ed7c957d2b355f71b8efe3797e514" category="list-text">这些多次恢复是否会发生在同一个主服务器上？</block>
  <block id="447cf995841edf43af31ae6433cb0b3b" category="list-text">从保管库恢复期间， SnapMirror是否会复制到保管库？</block>
  <block id="bf7e527ea923b12c29864f462c8629af" category="section-title">尺寸示例</block>
  <block id="d6e067605c701de1217d9b7c5b593194" category="paragraph">以下是不同网络保险库配置的示例。</block>
  <block id="8f561639702c6235fb14a50e1267b47e" category="inline-image-macro">网络保险库配置选项</block>
  <block id="04f1c065c698f48bff45b67f2ae441ec" category="paragraph"><block ref="04f1c065c698f48bff45b67f2ae441ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="895f07754a6e3117602e4eef76435ce7" category="summary">带有ONTAP术语的网络保险库</block>
  <block id="d8c77f28ba746d41f0af67c6f3926ee1" category="doc">Cyber Vault ONTAP术语</block>
  <block id="df39522ede4f30e399f861e68bc0f9d6" category="paragraph">这些是网络保险库架构中常用的术语。</block>
  <block id="9324e500ec61e83463459b376b8e7926" category="inline-link-macro">ONTAP关于自主勒索软件防护的文档</block>
  <block id="849887f7c3bb310b2a0c7d7aed8068d6" category="paragraph">*自主勒索软件防护 (ARP)* - 自主勒索软件防护 (ARP) 功能使用 NAS（NFS 和 SMB）环境中的工作负载分析来主动、实时地检测并警告可能表明勒索软件攻击的异常活动。当怀疑受到攻击时，ARP 除了现有的计划 Snapshot 副本保护之外，还会创建新的 Snapshot 副本。有关详细信息，请参阅<block ref="89e8b844a4cd20b83ae0bd1a85154ef1" category="inline-link-macro-rx"></block></block>
  <block id="71a3e3047d07f91b5960478da5313c7c" category="paragraph">*气隙（逻辑）* - 您可以通过利用以下方式将带有ONTAP的NetApp存储配置为逻辑气隙网络保险库：<block ref="d648f1725f78e3fe9c584bbda6f97852" category="inline-link-macro-rx"></block></block>
  <block id="be86ede1001e159fd743b9625bfacb6f" category="paragraph">*气隙（物理）* - 物理气隙系统没有网络连接。使用磁带备份，您可以将图像移动到另一个位置。  SnapLock Compliance逻辑气隙与物理气隙系统一样强大。</block>
  <block id="dfc0681e0c7d75bfdc13e0d0d89f91fa" category="paragraph">*堡垒主机* - 隔离网络上的专用计算机，配置用于抵御攻击。</block>
  <block id="d14bc4a75aef2883b04bd96c267f2451" category="paragraph">*不可变的 Snapshot 副本* - 无法修改的 Snapshot 副本，无一例外（包括支持组织或对存储系统进行低级格式化的能力）。</block>
  <block id="822377cb10bf084bfe63caff637d6724" category="paragraph">*不可删除的 Snapshot 副本* - 无法删除的 Snapshot 副本，无一例外（包括支持组织或对存储系统进行低级格式化的能力）。</block>
  <block id="3f0ee260896c9d2f88dcbbd4a7ed0b5c" category="inline-link-macro">有关防篡改 Snapshot 副本的ONTAP文档</block>
  <block id="fe7c241ff3560e250cd0ad3bc5b3ff1d" category="paragraph">*防篡改 Snapshot 副本* - 防篡改 Snapshot 副本使用SnapLock Compliance时钟功能将 Snapshot 副本锁定指定时间段。任何用户或NetApp支持人员都无法删除这些锁定的快照。如果卷受到勒索软件攻击、恶意软件、黑客、恶意管理员或意外删除的威胁，您可以使用锁定的 Snapshot 副本来恢复数据。有关详细信息，请参阅<block ref="cddd0757672699b5a4912c136077f891" category="inline-link-macro-rx"></block></block>
  <block id="49e35df1608bc4ec8dda47be9031b77e" category="inline-link-macro">有关SnapLock的ONTAP文档</block>
  <block id="5a89eb9c9af96fdf05459a6765a9b7d4" category="paragraph">* SnapLock* - SnapLock是一种高性能合规解决方案，适用于使用 WORM 存储以未修改的形式保留文件以满足监管和治理目的的组织。有关更多信息，请参阅<block ref="670c1c8cf84534e4eeb91cda06298ef9" category="inline-link-macro-rx"></block> 。</block>
  <block id="d71607281fa056fc399bb1e864e178cb" category="inline-link-macro">有关SnapMirror的ONTAP文档</block>
  <block id="97e2044d95cdea1c57954881111da695" category="paragraph">* SnapMirror* - SnapMirror是一种灾难恢复复制技术，旨在高效复制数据。 SnapMirror可以为本地或云中的辅助系统创建镜像（或数据的精确副本）、保管库（具有较长 Snapshot 副本保留期的数据副本）或两者。这些副本可用于许多不同的目的，例如灾难、云爆发或网络保险库（使用保险库策略并锁定保险库时）。有关详细信息，请参阅<block ref="c600d10900ca6c95608b9f0369795c76" category="inline-link-macro-rx"></block></block>
  <block id="1ab30b89ede400c4e01979571abc00d2" category="inline-link-macro">有关SnapVault的ONTAP文档</block>
  <block id="93d44578310bcf21aa5eeb526974ec2a" category="paragraph">* SnapVault* - 在ONTAP 9.3 中， SnapVault已被弃用，取而代之的是使用 vault 或 mirror-vault 策略配置SnapMirror 。这个术语虽然仍在使用，但也已被贬低。有关更多信息，请参阅<block ref="5efbd0c8c9a424698330ba4070f821a7" category="inline-link-macro-rx"></block> 。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NETAPP、NETAPP 徽标和NetApp商标页面上列出的标志是NetApp, Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">NetApp拥有的专利的最新列表可以在以下位置找到：</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="b6f4178a37f1ae3695816d17483af7dc" category="summary">与数据保护和安全相关的附加技术报告。</block>
  <block id="2316bedc720cf45c889ad85dfea7b7e1" category="doc">数据保护和安全的额外资源</block>
  <block id="7a1a67493fe431540aabe33d6d3fb50f" category="paragraph">请查看以下链接以获取与数据保护和安全相关的技术报告。</block>
  <block id="97b39392e3b66691f26174f9392c96d0" category="section-title">NVA-1143： NetApp HCI - NIST 针对 FISMA 的安全控制以及针对多租户基础架构的 HyTrust - NVA 设计和部署</block>
  <block id="2de6bbd06654b0c6d7bd5a6f2bb218f8" category="paragraph">Arvind Ramakrishnan、Abhinav Singh、 NetApp</block>
  <block id="6fdf0a62913845390e552b0f7d42cbf7" category="paragraph">NVA-1143 描述了如何设计和部署NetApp HCI以满足美国国家标准与技术研究院 (NIST) SP 800-53 修订版 4 安全和隐私控制，这对于私有云基础设施和多租户部署至关重要。</block>
  <block id="86e20b04ba1f19de7a30d7843155e285" category="paragraph"><block ref="86e20b04ba1f19de7a30d7843155e285" category="inline-link-macro-rx"></block></block>
  <block id="5e8c99d8eb1f9fde413c715abb6fa392" category="section-title">TR-4320： NetApp E 系列和 Commvault 数据平台 V11 - 参考架构和存储最佳实践</block>
  <block id="23b69f42a62554346d10d302e32866df" category="paragraph">Akash Gupta、 NetApp Girish Chanchlani、Commvault</block>
  <block id="451f1cdad20049e4046b157a54826db1" category="paragraph">TR-4320 概述了在 Commvault 数据平台 V11 环境中使用NetApp E 系列存储时的参考架构和最佳实践。  Commvault 和NetApp联合开发了此参考架构，为使用NetApp E 系列存储的 Commvault 数据平台 V11 部署提供指导，从而加快此解决方案的应用时间。</block>
  <block id="b5132c157b5da84909699e1aad5ea13d" category="inline-link-macro">TR-4320： NetApp E 系列和 Commvault 数据平台 V11 - 参考架构和存储最佳实践</block>
  <block id="65c8e697e97b6ce1bd59d8334eaaab6f" category="paragraph"><block ref="65c8e697e97b6ce1bd59d8334eaaab6f" category="inline-link-macro-rx"></block></block>
  <block id="849bdf40e7fa0e2cab1cb845682e6f56" category="section-title">TR-4471：E 系列和 EF 系列参考架构以及 Veeam Backup &amp; Replication 9.5 的存储最佳实践</block>
  <block id="febdd047851001456a2f0c683cfcfd2b" category="paragraph">Akash Gupta， NetApp Shawn Lieu（美洲）、Stefan Renner（欧洲、中东和非洲）和 Michael Cade（性能），Veeam</block>
  <block id="3bad2cd66e539f0136fbf484133914dd" category="paragraph">TR-4471 概述了在 Veeam Backup &amp; Replication 9.5 环境中使用NetApp E 系列存储时的参考架构和最佳实践。</block>
  <block id="f86686bed105d7053fbb06167a05f38e" category="inline-link-macro">TR-4471：E 系列和 EF 系列参考架构以及 Veeam Backup &amp; Replication 9.5 的存储最佳实践</block>
  <block id="8a9473d2b45da95a2d08524f5b182c4d" category="paragraph"><block ref="30941a222a593c860776bbf0831d36d0" category="inline-link-macro-rx"></block></block>
  <block id="f0a30c2a34036665913459cc735f4786" category="section-title">TR-4704：使用NetApp E 系列存储部署 Veritas NetBackup</block>
  <block id="d223d0d947999082ea93b57a68b3614b" category="paragraph">Akash Gupta 和 Principled Technologies， NetApp</block>
  <block id="9c993f8d3d3aa7be9c86474635154c12" category="paragraph">TR-4704 描述了在NetApp E 系列存储上部署 Veritas NetBackup。</block>
  <block id="7ff53b7713dd7f38a4729f8a1a48f24e" category="paragraph"><block ref="7ff53b7713dd7f38a4729f8a1a48f24e" category="inline-link-macro-rx"></block></block>
  <block id="e22b4cfabd54ac34f636ba227f9e63f3" category="summary">NetApp数据管理解决方案附件的近期变更日志。</block>
  <block id="ee9b834576787c7b5bf70f767336cc2a" category="doc">NetApp数据管理解决方案的新功能</block>
  <block id="d32acb669b8cc0767086c8f950cbb1a5" category="paragraph">了解数据管理解决方案的新功能。</block>
  <block id="bab52961b58c502c7991d35556c25367" category="section-title">2025年8月18日</block>
  <block id="47e26e0d5bbeef43c544dd9ae72e66b0" category="inline-link-macro">NetApp解决方案系列</block>
  <block id="840125a006aee7dc0e8efd313e7b614e" category="paragraph">NetApp解决方案网站现在是<block ref="f083b096ae581e72c5ab727ef8bd5732" category="inline-link-macro-rx"></block>，其中包括以下网站：</block>
  <block id="e87298059f60b0844dc971f315184cf5" category="inline-link-macro">NetApp人工智能解决方案</block>
  <block id="ac42ca0e1f789a8367b40d9824726778" category="list-text"><block ref="ac42ca0e1f789a8367b40d9824726778" category="inline-link-macro-rx"></block></block>
  <block id="9cae574c1dc1ca50a949c1e889637ba7" category="inline-link-macro">NetApp容器解决方案</block>
  <block id="31d1ae0120af1d791e4320e17eb10687" category="list-text"><block ref="31d1ae0120af1d791e4320e17eb10687" category="inline-link-macro-rx"></block></block>
  <block id="3947417923606d3599bcba7a82f71f1b" category="list-text">NetApp数据管理解决方案</block>
  <block id="9bb3e58246c5654a6d8e08a7bddd60ec" category="inline-link-macro">NetApp数据库解决方案</block>
  <block id="3e2420ab1ec1d6e02b32b017d3ba969a" category="list-text"><block ref="3e2420ab1ec1d6e02b32b017d3ba969a" category="inline-link-macro-rx"></block></block>
  <block id="a37049a2a78422ac5627c7987db5c337" category="inline-link-macro">NetApp公共云和混合云解决方案</block>
  <block id="144417321224efbf0afc2ae665a84a46" category="list-text"><block ref="144417321224efbf0afc2ae665a84a46" category="inline-link-macro-rx"></block></block>
  <block id="2729aba3baa90aaaed37b282e515f6e4" category="inline-link-macro">适用于 SAP 的NetApp解决方案</block>
  <block id="5e056430559fb77ac659dbb71ecce256" category="list-text"><block ref="5e056430559fb77ac659dbb71ecce256" category="inline-link-macro-rx"></block></block>
  <block id="4ead908c2ca3b4c7156e0e703642415d" category="inline-link-macro">NetApp虚拟化解决方案</block>
  <block id="3100186c9f62cec85ac05309c5d10217" category="list-text"><block ref="3100186c9f62cec85ac05309c5d10217" category="inline-link-macro-rx"></block></block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="doc">在哪里可以找到更多信息</block>
  <block id="345245c83d2b2c4c2a5eb9f2887da627" category="paragraph">要了解有关本文档中描述的信息的更多信息，请参阅以下文档和/或网站：</block>
  <block id="94b1145ed818a1892d096816107d0cd8" category="inline-link-macro">NetApp XCP 博客</block>
  <block id="c44769858efadd89168592093194ae93" category="list-text"><block ref="c44769858efadd89168592093194ae93" category="inline-link-macro-rx"></block></block>
  <block id="bb3aa4713d330863980f0c63bf214969" category="inline-link-macro">NetApp XCP 文档</block>
  <block id="179499d5d64b6185b2ae4989e5dfa547" category="list-text"><block ref="179499d5d64b6185b2ae4989e5dfa547" category="inline-link-macro-rx"></block></block>
  <block id="7e31262d49f2da2739a6d578672b419c" category="inline-link-macro">大数据分析数据到人工智能</block>
  <block id="00003295edd63364d26a371eee548157" category="list-text"><block ref="00003295edd63364d26a371eee548157" category="inline-link-macro-rx"></block></block>
  <block id="322bc614a8031f8c334d233f8221a4ab" category="summary">本节提供将数据从以 7 模式运行的NetApp Data ONTAP迁移到ONTAP的详细步骤。</block>
  <block id="30ee25b2188724428e827e97bab504fe" category="doc">从 7-模式到ONTAP 的数据迁移</block>
  <block id="3ec8186e1900b95154cccf8ccea38023" category="section-title">将 7 模式 NFSv3 存储过渡到ONTAP以用于 NFS 数据</block>
  <block id="e70a6b3d23d1e0da94c71a9ea26747d1" category="paragraph">本节提供了下表中将源 7-模式 NFSv3 导出过渡到ONTAP系统的分步过程。</block>
  <block id="cad365d13740342c8f6199feb7229137" category="paragraph">NetApp假定源 7-模式 NFSv3 卷已导出并安装在客户端系统上，并且 XCP 已安装在 Linux 系统上。</block>
  <block id="b40dbfa52a308abff927380b983cd868" category="list-text">验证目标ONTAP系统是否正常。</block>
  <block id="39745ae9472f91abcd9e844389157858" category="list-text">验证目标系统上是否存在至少一个非根聚合。总量正常。</block>
  <block id="47e01226b4fdf549d938eb5c6196970d" category="paragraph">如果没有数据聚合，请使用<block ref="b83f9c30c432b834d5aa4c7b46881164" prefix=" " category="inline-code"></block>命令。</block>
  <block id="5c52d0e31e44663ee633be681387faa1" category="list-text">在目标集群系统上创建存储虚拟机 (SVM)。</block>
  <block id="426b5839edbb7a7772be396e7eaceace" category="list-text">从目标 SVM 中删除 FCP、iSCSI、NDMP 和 CIDS 协议。</block>
  <block id="d03930721e424cdac105ccd0172f7dbe" category="paragraph">验证 NFS 是否是此 SVM 允许的协议。</block>
  <block id="4d6b5eb9160c3c34e9ff5535c403cea9" category="list-text">在目标 SVM 上创建新的读写数据卷。验证安全模式、语言设置和容量要求是否与源卷匹配。</block>
  <block id="a2cebf1e91b2a266a58458873c8980fd" category="list-text">创建数据 LIF 来满足 NFS 客户端请求。</block>
  <block id="6817d90b89495074e679248b56128378" category="paragraph">验证 LIF 是否已成功创建。</block>
  <block id="3a014fae7f5d70cc01c593a8401140ee" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="84bb87c2987a4b39ea23430f38570808" category="paragraph">验证路线是否已成功创建。</block>
  <block id="54b19b8b3b6de7bce018de598a1645ea" category="list-text">在 SVM 命名空间中挂载目标 NFS 数据卷。</block>
  <block id="6365adb4324221d944bc90c4663dfe5a" category="paragraph">验证卷是否已成功安装。</block>
  <block id="991398c32a43bcf95d7fa14129a6fcb0" category="paragraph">您还可以使用以下命令指定卷安装选项（连接路径）<block ref="4784dd0ffa42c3d1b43b0afd079dfc17" prefix=" " category="inline-code"></block>命令。</block>
  <block id="6c02d24a81dd4d9b1ad7a15079b4f122" category="list-text">在目标 SVM 上启动 NFS 服务。</block>
  <block id="e210fe657c5d46e3e11ca263d1a18af7" category="paragraph">验证服务是否已启动并正在运行。</block>
  <block id="304683b37151feda067e3acfde300057" category="list-text">验证默认 NFS 导出策略是否已应用于目标 SVM。</block>
  <block id="353fde8a37910716dc00dec81475c0d5" category="list-text">如果需要，为目标 SVM 创建新的自定义导出策略。</block>
  <block id="174608facfdad6448222d6d46c87fba5" category="paragraph">验证新的自定义导出策略是否已成功创建。</block>
  <block id="4007cf260b496d35ba0e925f1e7a183d" category="list-text">修改导出策略规则以允许 NFS 客户端访问。</block>
  <block id="5f249df749512e129505d18fd47d7010" category="list-text">验证客户端是否被允许访问该卷。</block>
  <block id="94a80f56f92334f07fd30337692ca889" category="list-text">连接到 Linux NFS 服务器。为 NFS 导出卷创建挂载点。</block>
  <block id="725ae014e8d8f66f0f2d477fa656ba32" category="list-text">在此挂载点挂载目标 NFSv3 导出卷。</block>
  <block id="a345b19bdd483ecd745a2e643b756bc6" category="admonition">NFSv3 卷应该被导出但不一定由 NFS 服务器挂载。如果可以安装，XCP Linux 主机客户端就会安装这些卷。</block>
  <block id="b5b2af7fb88c03cfd258cdd77fc6fbe1" category="paragraph">验证挂载点是否已成功创建。</block>
  <block id="8d3ac4d5ea9c5d5c45d7322512d7b778" category="list-text">在 NFS 导出的挂载点上创建测试文件以启用读写访问。</block>
  <block id="07e483b5917b8a9e91a22b2ebc20961a" category="admonition">读写测试完成后，从目标NFS挂载点删除该文件。</block>
  <block id="09280cd628b820e696b87163b3fe0fde" category="list-text">连接到安装了 XCP 的 Linux 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="86de6eeea329a50737c7056637f43e49" category="list-text">通过运行以下命令查询源 7-模式 NFSv3 导出<block ref="b28233b6c0fdcbe5d1e403bc2be8f960" prefix=" " category="inline-code"></block>XCP Linux 客户端主机系统上的命令。</block>
  <block id="080173849f5fec049b214897a2882295" category="list-text">扫描源 NFSv3 导出路径并打印其文件结构的统计信息。</block>
  <block id="df86b239e412ba3ba7192b581381b444" category="paragraph">NetApp建议在 xcp 期间将源 NFSv3 导出置于只读模式<block ref="53aefec08170b2ebed981a0a86d0dbe0" prefix=" " category="inline-code"></block>，<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block> ， 和<block ref="63ad9d34f3503826e5f649ae6b7ac92c" prefix=" " category="inline-code"></block>运营。</block>
  <block id="695efe20ffcfc7c261e44cbb1b62cc78" category="list-text">将源 7-模式 NFSv3 导出复制到目标ONTAP系统上的 NFSv3 导出。</block>
  <block id="50515e001679292835a498c6bd3f3c31" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>命令。</block>
  <block id="70d6a53ca7c3c592cb4099e2988c226c" category="paragraph">如果<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>发现源数据和目标数据之间存在差异，则错误<block ref="54779b0a97a87c0c6df786545eae5f68" prefix=" " category="inline-code"></block>在摘要中进行了报告。要解决该问题，请运行<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>命令将源更改复制到目标。</block>
  <block id="505d73172f49d62bd99779ab53aa5eeb" category="list-text">在切换之前和切换期间，运行<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>再次。如果源有新的或更新的数据，则执行增量更新。运行<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>命令。</block>
  <block id="887abb0b5917a0a6b0c47f5ef3eca1ce" category="list-text">要恢复先前中断的复制操作，请运行<block ref="d932e9ef0438ae21326fc9becf98ace1" prefix=" " category="inline-code"></block>命令。</block>
  <block id="f807709818ec3fbc508863a00ea17044" category="paragraph">后<block ref="69f2afc2390cec954f7c208b07212d39" prefix=" " category="inline-code"></block>完成复制文件，运行<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>再次确保源存储和目标存储具有相同的数据。</block>
  <block id="d78900410b9203071958256c3d6a7701" category="list-text">NFSv3 客户端主机需要卸载从 7-模式存储配置的源 NFSv3 导出，并从ONTAP挂载目标 NFSv3 导出。切换需要中断。</block>
  <block id="6bd42ffcfd349b793e9f6c6f00c18cd8" category="section-title">将 7-模式卷 Snapshot 副本过渡到ONTAP</block>
  <block id="fefac3d628a2abc2d1677e073a0688e7" category="paragraph">本节介绍将源 7-模式卷NetApp Snapshot 副本过渡到ONTAP的过程。</block>
  <block id="721e28a3edb434ca3d7f37307126504c" category="admonition">NetApp假定源 7-模式卷已导出并安装在客户端系统上，并且 XCP 已安装在 Linux 系统上。 Snapshot 副本是卷的某个时间点映像，用于记录自上次 Snapshot 副本以来的增量变化。使用<block ref="3e126213c93cfd745d918a1d244a79cf" prefix=" " category="inline-code"></block>以 7 模式系统为源的选项。</block>
  <block id="e18566c8fe02de3e35e48df30daa5189" category="paragraph">*警告：*保留基本 Snapshot 副本。基线复制完成后，请勿删除基线 Snapshot 副本。进一步的同步操作需要基本 Snapshot 副本。</block>
  <block id="50bdf0eaa7b3716343ae0345a98e1a5f" category="list-text">在目标集群系统上创建 SVM。</block>
  <block id="2e4b636c74015de6d92a2eb874c15a88" category="list-text">从目标 SVM 中删除 FCP、iSCSI、NDMP 和 CIFS 协议。</block>
  <block id="c45e0bc468a9249c2954fa84c21f833e" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="f35ea333881cef53fcd944d5a052be9d" category="paragraph">验证卷是否已成功安装。</block>
  <block id="71c0d546c4569fd9a5798bdbc9729ab6" category="paragraph">您还可以使用以下命令指定卷安装选项（连接路径）<block ref="4784dd0ffa42c3d1b43b0afd079dfc17" prefix=" " category="inline-code"></block>命令。</block>
  <block id="7ec3f8d8dd165416936305e1ca1530f0" category="list-text">验证默认 NFS 导出策略是否已应用于目标 SVM。</block>
  <block id="f69801ea46df8aed1b26399a9330f459" category="list-text">修改导出策略规则以允许访问目标系统上的 NFS 客户端。</block>
  <block id="9fee35c8bded36b1931a6addb7635a81" category="list-text">验证客户端是否可以访问目标卷。</block>
  <block id="7633c6765c7399ce0f1ecbca891fb11c" category="paragraph">NetApp建议在以下情况下将源 NFSv3 导出置于只读模式：<block ref="79b37c0e9765296c2ba8efc16a70d15f" prefix=" " category="inline-code"></block> ，<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block> ， 和<block ref="63ad9d34f3503826e5f649ae6b7ac92c" prefix=" " category="inline-code"></block>运营。在<block ref="63ad9d34f3503826e5f649ae6b7ac92c" prefix=" " category="inline-code"></block>操作时，您必须通过<block ref="3e126213c93cfd745d918a1d244a79cf" prefix=" " category="inline-code"></block>具有相应值的选项。</block>
  <block id="486e9eb5a73ed3d87e070761d3ceeefe" category="list-text">将源 7-模式 NFSv3 快照（基础）复制到目标ONTAP系统上的 NFSv3 导出。</block>
  <block id="160bb3a75d27ad175143123df09bce76" category="admonition">保留此基本快照以供进一步的同步操作。</block>
  <block id="97ba1a5f7ee8f9243390e46469b6e8f3" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>命令。</block>
  <block id="44842ca325a3ba46b3b4703a79fab171" category="paragraph">如果<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>发现源数据和目标数据之间存在差异，则错误<block ref="dc84cf44b83b105281c2d7846f1ed44f" prefix=" " category="inline-code"></block>命令将源更改复制到目标。</block>
  <block id="030bc6fe403e876e1c932987ece73d61" category="list-text">在切换之前和切换期间，运行<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>再次。如果源有新的或更新的数据，则执行增量更新。如果有增量更改，请为这些更改创建一个新的 Snapshot 副本，并将该快照路径与<block ref="3e126213c93cfd745d918a1d244a79cf" prefix=" " category="inline-code"></block>同步操作的选项。</block>
  <block id="b29cfae254be5e3cfc339ed594ea9378" category="paragraph">运行<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>命令<block ref="3e126213c93cfd745d918a1d244a79cf" prefix=" " category="inline-code"></block>选项和快照路径。</block>
  <block id="2885d0e1370007423656773743ce189b" category="admonition">对于此操作，需要基础快照。</block>
  <block id="121dba07a28112a093b812991271c895" category="list-text">NFSv3 客户端主机必须卸载从 7-模式存储配置的源 NFSv3 导出，并从ONTAP挂载目标 NFSv3 导出。此切换需要停机。</block>
  <block id="6db55966f4a2b44c31ed7672f14d023e" category="section-title">将 ACLv4 从NetApp 7-模式迁移到NetApp存储系统</block>
  <block id="8f81754856c547fbd3e5295b9da06cc7" category="paragraph">本节介绍将源 NFSv4 导出过渡到ONTAP系统的分步过程。</block>
  <block id="fd58e84bd534e0ff49a00942e9ee2002" category="admonition">NetApp假定源 NFSv4 卷已导出并安装在客户端系统上，并且 XCP 已安装在 Linux 系统上。源应该是支持 ACL 的NetApp 7-模式系统。仅支持从NetApp到NetApp 的ACL 迁移。要复制名称中带有特殊字符的文件，请确保源文件和目标文件支持 UTF-8 编码语言。</block>
  <block id="88464fae780b488ca9d39f305a3b3777" category="section-title">将源 NFSv4 导出迁移到ONTAP 的前提条件</block>
  <block id="078b760bc7ad8cae447a095cc53029af" category="paragraph">将源 NFSv4 导出迁移到ONTAP之前，必须满足以下先决条件：</block>
  <block id="abb629da0d811e197b383d473d19f265" category="list-text">目标系统必须配置 NFSv4。</block>
  <block id="09e4d7a665b5df121af76a08951028cf" category="list-text">NFSv4 源和目标必须安装在 XCP 主机上。选择 NFS v4.0 来匹配源和目标存储，并验证源和目标系统上是否启用了 ACL。</block>
  <block id="c36e1764174e8e6a7791e7afd73f3294" category="list-text">XCP 要求将源/目标路径挂载到 XCP 主机上以进行 ACL 处理。在下面的示例中，<block ref="d07c77c05891b869ab2111118b006bed" prefix=" " category="inline-code"></block>安装在<block ref="dfecb62ab540058a212419f33235e6da" prefix=" " category="inline-code"></block>小路：</block>
  <block id="baa4716341f52ff4d0642ca1398e16f1" category="section-title">子目录选项</block>
  <block id="66f63b7de79aaf05b47a1b63467b2a84" category="paragraph">使用子目录的两个选项如下：</block>
  <block id="5d1498ef6a2ee01cb9031bbf8a8dadc4" category="list-text">为了让 XCP 在子目录上工作<block ref="9ce87e1289284ccca8cf788db9dd7804" prefix=" " category="inline-code"></block>）、挂载完整路径<block ref="58753164ce38e8977360bb376dda6e76" prefix="(" category="inline-code"></block>) 在 XCP 主机上。</block>
  <block id="39b3225d42725e9616ca3fee7aa7cbb6" category="paragraph">如果没有挂载完整路径，XCP会报告以下错误：</block>
  <block id="84274fa575b6d9b0177512a818215d91" category="list-text">使用子目录语法<block ref="ca6c8952cf206b58c7fc63aa1552d665" prefix="(" category="inline-code"></block>)，如下例所示：</block>
  <block id="8dd9bb3f47ac0b27a42761c265b0c720" category="paragraph">完成以下步骤将 ACLv4 从NetApp 7-模式迁移到NetApp存储系统。</block>
  <block id="b2f12804e995a318c2272527efb05774" category="paragraph">验证 SVM 是否已成功创建。</block>
  <block id="b887d08ec971525ffbfec7f19d01d72d" category="list-text">检查默认 NFS 导出策略是否应用于目标 SVM。</block>
  <block id="1c94e1638450716cd57f55bafd07e60f" category="paragraph">验证策略规则是否已被修改。</block>
  <block id="132fa7c123291d5007311a22ff8f5654" category="list-text">在此挂载点挂载目标 NFSv4 导出卷。</block>
  <block id="c686c09824f51c6e681d87d1deb44c71" category="admonition">NFSv4 卷应该被导出但不一定由 NFS 服务器挂载。如果可以安装，XCP Linux 主机客户端就会安装这些卷。</block>
  <block id="e943b6ad310412b689f42adec28acf3a" category="paragraph">验证文件是否已创建。</block>
  <block id="35ce5d99ee6b9bb871da972e459e7259" category="list-text">通过运行以下命令查询源 NFSv4 导出<block ref="b28233b6c0fdcbe5d1e403bc2be8f960" prefix=" " category="inline-code"></block>XCP Linux 客户端主机系统上的命令。</block>
  <block id="97cc35dcdaf8c5c5fa0e936cd31e9907" category="list-text">扫描源 NFSv4 导出路径并打印其文件结构的统计信息。</block>
  <block id="5073080976611febfcee79295d42232e" category="paragraph">NetApp建议在以下情况下将源 NFSv4 导出置于只读模式：<block ref="79b37c0e9765296c2ba8efc16a70d15f" prefix=" " category="inline-code"></block> ，<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block> ， 和<block ref="63ad9d34f3503826e5f649ae6b7ac92c" prefix=" " category="inline-code"></block>运营。</block>
  <block id="f120bcab91519def54b7b66ee0fbecfe" category="list-text">将源 NFSv4 导出复制到目标ONTAP系统上的 NFSv4 导出。</block>
  <block id="39ff9cab7c62e62bf182a632271eb700" category="list-text">后<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block>完成后，验证源和目标 NFSv4 导出是否具有相同的数据。运行<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>命令。</block>
  <block id="977c8a5f0f7f70041a1c6359c72cb1cd" category="paragraph">如果<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>发现源数据和目标数据之间存在差异，则错误<block ref="54779b0a97a87c0c6df786545eae5f68" prefix=" " category="inline-code"></block>在摘要中进行了报告。要解决该问题，请运行<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>命令将源更改复制到目标。</block>
  <block id="29aee025cf0bcad3c355bd0aad4516e6" category="admonition">对于此操作，需要先前的复制索引名称或编号。</block>
  <block id="ee0fd4f8758695ad7502bee81363478a" category="list-text">恢复先前中断的<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block>操作，运行<block ref="d932e9ef0438ae21326fc9becf98ace1" prefix=" " category="inline-code"></block>命令。</block>
  <block id="cdc35fb8de987dae3f48c142ffcb0686" category="section-title">将 7-模式 SMB 存储过渡到ONTAP以用于 CIFS 数据</block>
  <block id="74efc43b80fa7a84f709780789176e0d" category="paragraph">本节介绍将源 7-模式 SMB 共享过渡到ONTAP系统的分步过程。</block>
  <block id="f6f758220d5d00061aaa03b99e14785b" category="admonition">NetApp假定 7-模式和ONTAP系统是 SMB 许可的。已创建目标 SVM、导出源和目标 SMB 共享，并且已安装和许可 XCP。</block>
  <block id="281c766457d5499048f9440f61957421" category="list-text">扫描 SMB 共享中的文件和目录。</block>
  <block id="95c490ed8cb5d13c961fc2c50c372940" category="list-text">将文件（带或不带 ACL）从源复制到目标 SMB 共享。以下示例显示了具有 ACL 的副本。</block>
  <block id="dc056263ce0a29568cee559ae8ec35dc" category="admonition">如果没有数据聚合，则使用存储创建一个新的数据聚合<block ref="a3c52ca282dcb77dd824f54a7b270068" prefix=" " category="inline-code"></block>命令。</block>
  <block id="7c34f7c35c71ba790649c5563408e77e" category="list-text">同步源和目标上的文件。</block>
  <block id="974c1ef10ec8fef5b3ff19989555d061" category="list-text">验证文件是否被正确复制。</block>
  <block id="035fe4f74f99e66d6525774bf40236f9" category="summary">本节包含使用NetApp XCP 迁移数据的最佳实践、指南和建议。</block>
  <block id="52f7ac44cac2d8d1a3f005648d7521e3" category="doc">最佳实践指南和建议</block>
  <block id="1cce79308861dd86d5e56af13afefaf2" category="list-text">使用支持IMT的 XCP 客户端操作系统。  IMT支持的客户端经过NetApp认证。</block>
  <block id="ec653488c4b3b9bb00702a4fb937f5b4" category="list-text">在Linux操作系统中以root用户身份运行XCP进行迁移，可以以sudo用户身份运行xcp命令，但XCP不支持。</block>
  <block id="8c8f6415908fe0a235f0850d80a398a4" category="list-text">每个客户端仅运行一个 XCP 实例。从技术上讲，您可以从不同的位置在同一台主机上运行多个 XCP 实例，但这不是受支持的做法。事实上，运行许多实例可能会导致失败。</block>
  <block id="dbd9771fe38a6d14e9e7e70487aae020" category="list-text">XCP NFS 能够从实时源数据集迁移，并且支持此配置。不支持从实时源数据集进行 XCP SMB 迁移，并且可能会导致失败。</block>
  <block id="c1f9797ffa66b762cf07348c6bc4a005" category="list-text">最佳做法是为每次增量同步创建一个具有不同名称的新快照，以便在发生故障时可以轻松地根据快照名称创建增量迁移路径。</block>
  <block id="1309895bb5c78406c77a6cc2800160eb" category="list-text">如果您正在执行基于快照的迁移，最佳做法是继续基于快照的迁移直至切换。</block>
  <block id="cc9954d8dc3e80c40af9d0a7ca3de005" category="list-text">如果您拥有超过 1000 万个文件，并且增量数据变化超过 50%，则最佳做法是使用比安装和管理指南中的最低建议更高的核心数和更多的内存。</block>
  <block id="7e0710b4cb48030b7a4c065128b88194" category="summary">本节介绍将带有安全信息的 CIFS 数据从源系统迁移到目标ONTAP系统的分步过程。</block>
  <block id="82f0875c37eacadc40a7a7fb2a6b6313" category="doc">使用 ACL 将 CIFS 数据从源存储箱迁移到ONTAP</block>
  <block id="c55bb6c3381ca2d8a4016e387cc62883" category="list-text">创建数据 LIF 来满足 SMB 客户端请求。</block>
  <block id="5368b7f480b92b4a2a9b475e6e9cf953" category="list-text">在 SVM 命名空间中挂载目标数据卷。</block>
  <block id="18f8848c17d02fd34b293885d5d3a215" category="list-text">在目标 SVM 上启动 CIF 服务。</block>
  <block id="cf1269d629dc2110f2ae65edf8662b79" category="list-text">验证默认导出策略是否已应用于目标 SVM。</block>
  <block id="74e1ca9e0b551a7349207f3d546b9f51" category="list-text">修改导出策略规则以允许访问 CIFs 客户端。</block>
  <block id="3c19a2ac394a25f9ace05db18ad86c8b" category="paragraph">验证策略规则是否已修改。</block>
  <block id="876afc73f4771f46cfc9dba7fb687744" category="list-text">连接到安装了 XCP 的 Windows 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="e73a44af938fa16a4816d3639d2f3b69" category="list-text">通过运行以下命令查询源节点 SMB 导出<block ref="b28233b6c0fdcbe5d1e403bc2be8f960" prefix=" " category="inline-code"></block>XCP Windows 客户端主机系统上的命令。</block>
  <block id="7132ef955ec5e0151ccd0790da2551d7" category="list-text">运行<block ref="657f8b8da628ef83cf69101b6817150a" prefix=" " category="inline-code"></block>复制命令。</block>
  <block id="268b71a144890a49d97f8ca062fd48f9" category="list-text">在目标ONTAP系统上，获取需要作为<block ref="7a80adbcbc4a0b2e96e8eb2710f30c85" prefix=" " category="inline-code"></block>和<block ref="8d03d04d9c44ec2988a893826753f985" prefix=" " category="inline-code"></block>参数路径。</block>
  <block id="ac9ad1198db0fb6f730a1f3aa97c35ab" category="list-text">要将带有 ACL 的 CIF 数据从源迁移到目标，请运行<block ref="e64df9c2f5a72d0adb1dbea21a609c16" prefix=" " category="inline-code"></block>命令<block ref="4332bdcfbd72db6a4dae51bd101af3d6" prefix=" " category="inline-code"></block>和<block ref="a72a6079b50973fd59860e6635a4ea62" prefix=" " category="inline-code"></block>选项。</block>
  <block id="a53e836d6264ad1778a4e1a7ae34f58c" category="paragraph">对于<block ref="a3fe89370a4bb214c60bfe40074b2c43" prefix=" " category="inline-code"></block>选项，指定可以在 Active Directory 或本地用户/组中找到的任何用户或组到目标系统。</block>
  <block id="9aa080e55cad2c9968cc50de60a3f88e" category="list-text">如果<block ref="e64df9c2f5a72d0adb1dbea21a609c16" prefix=" " category="inline-code"></block>导致错误消息<block ref="2400b6710d9959881ab1c252d8b07325" prefix=" " category="inline-code"></block>，在 hosts 文件中添加目标框<block ref="803976de87f6862821bd3c4d94e0ff2b" prefix="(" category="inline-code"></block>）。</block>
  <block id="b7ceaa0e08e9de5bf76572a50529f752" category="paragraph">对NetApp存储目标框条目使用以下格式。</block>
  <block id="569ccf25ad533b79cf2f639f0326d943" category="list-text">如果您仍然收到错误消息<block ref="2400b6710d9959881ab1c252d8b07325" prefix=" " category="inline-code"></block>在 hosts 文件中添加目标框条目后，目标系统中不存在该用户/组。</block>
  <block id="4a909d1b3a171fdcddc8da070e839ecc" category="list-text">使用<block ref="e64df9c2f5a72d0adb1dbea21a609c16" prefix=" " category="inline-code"></block>使用 ACL 迁移 CIF 数据（带或不带根文件夹）。</block>
  <block id="a4ebb620bc1fbff4f93249967cd47f4b" category="paragraph">不使用根文件夹，运行以下命令：</block>
  <block id="f6c1a65a9150853333bf43b4a6dc9e5b" category="paragraph">使用根文件夹，运行以下命令：</block>
  <block id="69f55c7d7266874ad1ed57caf459c979" category="summary">该用例基于我们所做的最大的金融客户概念验证（CPOC）。从历史上看，我们使用NetApp就地分析模块 (NIPAM) 将分析数据移动到NetApp ONTAP AI。然而，由于最近的增强和NetApp XCP 性能的提高以及独特的NetApp数据移动器解决方案方法，我们使用NetApp XCP 重新运行了数据迁移。</block>
  <block id="5084e1c3bd53b6115df08f4c40aadbe6" category="doc">数据湖到ONTAP NFS</block>
  <block id="b1a11a01b3bdf3150e0240a1f037cdf5" category="section-title">客户挑战和要求</block>
  <block id="9ed16d5ac47c336caaf9ca2b75930d78" category="paragraph">值得注意的客户挑战和要求包括以下内容：</block>
  <block id="b6976e1a47e217f1a7c746e8f57e327c" category="list-text">客户拥有不同类型的数据，包括结构化、非结构化和半结构化数据、日志以及数据湖中的机器对机器数据。人工智能系统需要处理所有这些类型的数据以进行预测操作。当数据位于数据湖原生文件系统中时，处理起来很困难。</block>
  <block id="eefafc491675ee38f59cbd784ff0ed9c" category="list-text">客户的AI架构无法访问Hadoop分布式文件系统（HDFS）和Hadoop兼容文件系统（HCFS）的数据，因此这些数据无法用于AI操作。  AI 需要采用可理解的文件系统格式（例如 NFS）的数据。</block>
  <block id="982b6c87ace8f5b95c0523bd0557f4e2" category="list-text">由于数据量巨大、吞吐量高，需要一些特殊的流程将数据从数据湖中移动，并且需要一种经济有效的方法将数据移动到AI系统。</block>
  <block id="d73e7d11401e9256a0dea0d1e174e1de" category="section-title">数据移动器解决方案</block>
  <block id="b0a9a6f2387f2a23e13931f68fc509c1" category="paragraph">在此解决方案中，MapR 文件系统 (MapR-FS) 是从 MapR 集群中的本地磁盘创建的。 MapR NFS 网关在每个数据节点上配置有虚拟 IP。文件服务器服务存储和管理MapR-FS数据。 NFS 网关使 Map-FS 数据可以通过虚拟 IP 从 NFS 客户端访问。每个 MapR 数据节点上都运行一个 XCP 实例，以将数据从 Map NFS 网关传输到NetApp ONTAP NFS。每个 XCP 实例将一组特定的源文件夹传输到目标位置。</block>
  <block id="01e1c2900284f91d77ea71ffd32c6d18" category="paragraph">下图说明了使用 XCP 的 MapR 集群的NetApp数据移动器解决方案。</block>
  <block id="5e8f0f670e38fbdf628b0883f946934f" category="inline-image-macro">该图显示输入/输出对话框或表示书面内容</block>
  <block id="05cd40d8ed66ee44d8bd8b65c7a91fa8" category="paragraph"><block ref="05cd40d8ed66ee44d8bd8b65c7a91fa8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="409f476aa8c516a92f8d6a42e21db5a0" category="inline-link-macro">使用 XCP 将数据从数据湖和高性能计算移动到ONTAP NFS</block>
  <block id="1da789c5e088fc516e700b4d9e1f9d21" category="paragraph">有关详细的客户使用案例、录制的演示和测试结果，请参阅<block ref="1c09ea9b69873155f42c34351460233b" category="inline-link-macro-rx"></block>博客。</block>
  <block id="16d1df1964ae9caa5c7bf5d0fa54eae8" category="inline-link-macro">TR-4732：大数据分析与人工智能^</block>
  <block id="474a29d5e6a51647892797dee7c2c9c1" category="paragraph">有关使用NetApp XCP 将 MapR-FS 数据移动到ONTAP NFS 的详细步骤，请参阅<block ref="3d6c36ec6418caefcfc159cacacf38ec" category="inline-link-macro-rx"></block>。</block>
  <block id="ddf97b6ffb913bd772848e3ebecfc8c1" category="summary">本节介绍用于数据传输的NetApp XCP 的部署步骤。</block>
  <block id="8388066510b59c8d3387373b6969a7af" category="doc">部署步骤</block>
  <block id="8449c94058b7c2e686c3e19f7e772a65" category="section-title">试验台细节</block>
  <block id="94cb70bde9d89f0b10ffdca34b0bec22" category="paragraph">下表提供了用于此部署和性能验证的测试平台的详细信息。</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="57419d904381619fcf00bc94e4ce26f1" category="cell">XCP 版本 1.7</block>
  <block id="0bf2dca8ce9b94406660e58b59a3dbbd" category="list-text">一台 Linux 服务器 - Linux（RHEL 7.9 或 RHEL 8）</block>
  <block id="d85d793ce9fe1772209fa5e17fb29449" category="list-text">一台 Windows 服务器 – Windows Server 2019 标准版</block>
  <block id="91ea491db15b6d672d79b23fb98eb089" category="cell">源卷的NetApp AFF存储阵列 HA 对</block>
  <block id="23ec9249d03285a513eaaf182a7bcd49" category="list-text">AFF8080</block>
  <block id="a5119a6bd0f4d733e0f1f4c10f9d063b" category="list-text">NetApp ONTAP 9</block>
  <block id="a2a817ee9a8e05389f7b11bd8ce4bbdb" category="list-text">NFS 协议</block>
  <block id="80fdc6d88149270be735269f2ff65645" category="cell">目标卷的NetApp AFF存储阵列 HA 对</block>
  <block id="53270fbfda62583949b287e08ae3d063" category="list-text">AFF A800</block>
  <block id="203165a49e3a391bdbc44e3a05d54279" category="list-text">ONTAP 9</block>
  <block id="28712ee052ea500eba0cdbb1d847277f" category="cell">富士通PRIMERGY RX2540服务器</block>
  <block id="539c5af1c2682685cd076697aaa6c700" category="cell">每个配备：* 48 个 CPU * Intel Xeon * 256GB 物理内存 * 10GbE 双端口</block>
  <block id="a5fa5746370b608090b994a97b49e98b" category="cell">网络连接</block>
  <block id="0cc5c79089d6ca0752529568758efc4c" category="cell">10GbE</block>
  <block id="76e3e2a4e56301dafc50613d96fd624e" category="section-title">部署步骤 - NAS</block>
  <block id="2879e817640f94636340918850eb6903" category="inline-link">NetApp XCP 用户指南</block>
  <block id="f2dd54ec57ec5464ee3aa191a48a8a43" category="paragraph">要部署NetApp XCP 进行数据传输，首先在目标位置安装并激活 XCP 软件。您可以在<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。为此，请完成以下步骤：</block>
  <block id="bb2152dbc648edb19e0cc7d0cbb30d1e" category="inline-link-macro">XCP 的先决条件。</block>
  <block id="a2db549dd18b229bb950e8aa8ba11f99" category="list-text">满足本节中详细说明的先决条件<block ref="a78e251654494672bfb9c0be45929773" category="inline-link-macro-rx"></block></block>
  <block id="c58c8903e33903d2e630277aa3a78795" category="inline-link">NetApp XCP（下载）页面</block>
  <block id="2d1acef34bb45f2c1878c6b576f3b400" category="list-text">从下载 XCP 软件<block ref="13844fc5dba1627d28169d2acfff11e2" category="inline-link-rx"></block>。</block>
  <block id="8319752fe43598ddb329e536217c1cb5" category="list-text">将下载的 XCP tar 文件复制到 XCP 服务器。</block>
  <block id="c9b8e059d1597eaead43d286e91c91e3" category="list-text">解压 tarfile。</block>
  <block id="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link"><block ref="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link-rx"></block></block>
  <block id="19f1deecf23a78878eb01c772b9233e0" category="list-text">从下载许可证<block ref="4da39fde529d1b69f60873c302229eed" category="inline-link-rx"></block>并复制到XCP服务器。</block>
  <block id="3df11515e644382207c1430c36ea48bb" category="list-text">激活许可证。</block>
  <block id="ad7984249c2054b4da5fd3b57b1b91ef" category="list-text">找到源 NFS 端口和目标 NFS 服务器。默认端口为 2049。</block>
  <block id="79fe861b8c719b1a534bdbcace1444a2" category="list-text">检查 NFS 连接。使用 telnet 到 NFS 服务器端口检查 NFS 服务器（源和目标）。</block>
  <block id="5e471de79dbe02105770bcf04bc501d5" category="list-text">配置目录。</block>
  <block id="67005679d502da10622f2104421e894b" category="list-text">创建 NFS 卷并为 XCP 目录导出 NFS。您还可以利用操作系统 NFS 导出 XCP 目录。</block>
  <block id="d6f2a18783592d1858e3e5bdcabd4567" category="list-text">检查 NFS 导出。</block>
  <block id="39b638480b201a7448774e8186012e4e" category="list-text">更新<block ref="d509f49d5d9a07934f91eefcf45a7334" prefix=" " category="inline-code"></block>。</block>
  <block id="9d44d1309af47903754b16c403f68774" category="list-text">使用以下方式查找源 NAS 导出<block ref="b28233b6c0fdcbe5d1e403bc2be8f960" prefix=" " category="inline-code"></block>。寻找：</block>
  <block id="fbff9a42f0ba33571594cb39da93ef4b" category="list-text">（可选）扫描源 NAS 数据。</block>
  <block id="82d1938e7390e37babdea8d6fd359156" category="paragraph">扫描源 NAS 数据有助于您了解数据布局并发现任何潜在的迁移问题。 XCP扫描操作时间与文件数量和目录深度成正比。如果您熟悉 NAS 数据，可以跳过此步骤。</block>
  <block id="c6e94e11da5ba5bce0f27b8c782e4110" category="list-text">检查由<block ref="79b37c0e9765296c2ba8efc16a70d15f" prefix=" " category="inline-code"></block>。主要搜索无法读取的文件夹和无法读取的文件。</block>
  <block id="6a6a10773cfc849f638ac0137a5f08d6" category="list-text">（可选）更改 inode。查看 inode 的数量，并根据目录和目标卷要迁移或复制的文件数量修改该数量（如果需要）。</block>
  <block id="342779baf0b15fdf377f142c987e896a" category="list-text">扫描目标卷。</block>
  <block id="a88831977a2b62e982b722f6fa6662b5" category="list-text">检查源和目标卷空间。</block>
  <block id="4b14d92fd07932987cf7416eb7f604ca" category="list-text">使用以下方法将数据从源复制到目标<block ref="e64df9c2f5a72d0adb1dbea21a609c16" prefix=" " category="inline-code"></block>并检查摘要。</block>
  <block id="506aae448569ed08125f41ed940eb00b" category="admonition">默认情况下，XCP 创建七个并行进程来复制数据。这可以调整。</block>
  <block id="5c46a2da3e6e0423829946fe877c50b8" category="admonition">NetApp建议源卷为只读。实时地，源卷是一个活动的、活跃的文件系统。这<block ref="e64df9c2f5a72d0adb1dbea21a609c16" prefix=" " category="inline-code"></block>操作可能会失败，因为NetApp XCP 不支持由应用程序不断更改的实时源。</block>
  <block id="0f7dbc07af0b5c3ba51ff604b81ebe8a" category="paragraph">对于 Linux，XCP 需要索引 ID，因为 XCP Linux 执行编目。</block>
  <block id="764363dd147880ab6aca242a0417562e" category="list-text">（可选）检查目标NetApp卷上的 inode。</block>
  <block id="ab3ba5fb62db279b7d07bac650a6c2d2" category="list-text">使用以下方式执行增量更新<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>。</block>
  <block id="6cdfbe571ba2209e0a76f3bcabfee9f6" category="paragraph">对于本文档，为了模拟实时性，将源数据中的一百万个文件重命名，然后使用<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>。对于 Windows，XCP 需要源路径和目标路径。</block>
  <block id="13475b4ca9a916769b9d63f4fddfa18d" category="list-text">验证数据传输。您可以使用以下方法验证源和目标是否具有相同的数据<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>。</block>
  <block id="1cd06f171a5a99926a67bd673014f765" category="paragraph">XCP 文档提供了多种选项（带有示例）<block ref="53aefec08170b2ebed981a0a86d0dbe0" prefix=" " category="inline-code"></block> ，<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block> ，<block ref="63ad9d34f3503826e5f649ae6b7ac92c" prefix=" " category="inline-code"></block> ， 和<block ref="e8418d1d706cd73548f9f16f1d55ad6e" prefix=" " category="inline-code"></block>运营。有关详细信息，请参阅<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。</block>
  <block id="efa146517859e051c07fabac4c88d3e7" category="admonition">Windows 客户应使用访问控制列表 (ACL) 复制数据。 NetApp建议使用命令<block ref="1b5d03dc1e4b5c3623897fd210394888" prefix=" " category="inline-code"></block>。为了获得最佳性能，考虑到源卷具有带有 ACL 的 SMB 数据以及可由 NFS 和 SMB 访问的数据，目标必须是 NTFS 卷。使用 XCP（NFS 版本），从 Linux 服务器复制数据并与<block ref="4332bdcfbd72db6a4dae51bd101af3d6" prefix=" " category="inline-code"></block>和<block ref="0e638f18c7569b1e062f20f430b0a5fc" prefix=" " category="inline-code"></block>Windows 服务器选项将 ACL 从源数据复制到目标 SMB 数据。</block>
  <block id="85760de676a9f74f28f26115c39c9a0b" category="inline-link">配置“管理审计和安全日志”策略</block>
  <block id="a0251b301ad566d86ffa3916c5510295" category="paragraph">详细步骤请参见<block ref="06fdba77988da3047baf401e4fdefca5" category="inline-link-rx"></block>。</block>
  <block id="0957326f089aaf98a5b7b9110a2675cd" category="section-title">部署步骤 - HDFS/MapRFS 数据迁移</block>
  <block id="1f43fc63f63aad0b707e06b0753182a1" category="paragraph">在本节中，我们讨论新的 XCP 功能“Hadoop 文件系统数据传输到 NAS”，它将数据从 HDFS/MapRFS 迁移到 NFS，反之亦然。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="368666825ffae5710ab122fb63937cee" category="paragraph">对于 MapRFS/HDFS 功能，您必须在非 root 用户环境中执行以下步骤。通常非 root 用户是 hdfs、mapr 或有权限在 HDFS 和 MapRFS 文件系统中进行更改的用户。</block>
  <block id="9adbc05b1436b3e8962253577f1e6441" category="list-text">在 CLI 或用户的 .bashrc 文件中设置 CLASSPATH、HADOOP_HOME、NHDFS_LIBJVM_PATH、LB_LIBRARY_PATH 和 NHDFS_LIBHDFS_PATH 变量以及<block ref="430e727eb7fa4c8fdeb29b396f232465" prefix=" " category="inline-code"></block>命令。</block>
  <block id="2a0eda7a7937e303f9e18a57a033fcb8" category="list-text">NHDFS_LIBHDFS_PATH 指向 libhdfs.so 文件。该文件提供 HDFS API 来交互和操作 HDFS/MapRFS 文件和文件系统，作为 Hadoop 发行版的一部分。</block>
  <block id="13682a0461e750a2dfb4e86c2ddc1165" category="list-text">NHDFS_LIBJVM_PATH 指向 libjvm.so 文件。这是JAVA虚拟机共享库在jre中的位置。</block>
  <block id="60ce276a5dde3f2d2e92b1986a2eb339" category="list-text">CLASSPATH 使用（Hadoop classpath –glob）值指向所有 jar 文件。</block>
  <block id="84cbf778b2572cae5eba01d0ca330078" category="list-text">LD_LIBRARY_PATH 指向 Hadoop 本机库文件夹位置。</block>
  <block id="68207eb9f168add2309e88b5223d57c6" category="paragraph">请参阅以下基于 Cloudera 集群的示例。</block>
  <block id="91328810a5559a740f522f4c5a1da5f1" category="paragraph">在此版本中，我们支持 XCP 扫描、复制和验证操作以及从 HDFS 到 NFS 的数据迁移。您可以从数据湖集群单个工作节点和多个工作节点传输数据。在1.8版本中，root用户和非root用户都可以执行数据迁移。</block>
  <block id="dee4c2c7e685015e9f3cc1ad197f3ab5" category="section-title">部署步骤 - 非 root 用户将 HDFS/MaprFS 数据迁移到NetApp NFS</block>
  <block id="5983f77acc016b8138698b32b0ab0405" category="list-text">按照部署部分步骤 1-9 中提到的相同步骤进行操作。</block>
  <block id="c2765e27844a39bfc897cb964eec8711" category="list-text">在以下示例中，用户将数据从 HDFS 迁移到 NFS。</block>
  <block id="e6f549e8013d1f24b8756cd11ff3083e" category="list-text">创建文件夹和文件（使用<block ref="f45bd8fcd9fdd879ec3b59c5cb0cf396" prefix=" " category="inline-code"></block>) 在 HDFS 中。</block>
  <block id="2433ce85404dd68893a2e4abb99843e4" category="list-text">检查 HDFS 文件夹中的权限。</block>
  <block id="befab6065ddb441f0b260ac75a8e84c8" category="list-text">在 NFS 中创建一个文件夹并检查权限。</block>
  <block id="02341ea695e862c3a2d89461b1b8bf37" category="list-text">使用 XCP 将文件从 HDFS 复制到 NFS，并检查权限。</block>
  <block id="c4e9391c8d60f1f326246cd6b6705492" category="summary">NetApp收到了从单个卷或多个卷中查找重复文件的请求。  NetApp提供了以下解决方案。</block>
  <block id="2e4e5fbe1f8f460b943ac3ed031c9dcf" category="doc">重复文件</block>
  <block id="dc4b36d55f5f1f0af63ed899a010c8f1" category="paragraph">对于单个卷，运行以下命令：</block>
  <block id="2d2f31777cf3433071b9bcd33f39279a" category="paragraph">对于多个卷，运行以下命令：</block>
  <block id="7ed4381f9a10813d06ebeaf5c947c2c1" category="summary">NetApp XCP 文件分析 GUI 通过在后端使用 XCP 并可视化任何 NAS（NFS、SMB）文件系统的图表和视图等统计数据来帮助运行文件系统扫描。</block>
  <block id="250a5d043009990eb69a399d7c630462" category="doc">文件分析</block>
  <block id="0f2604fbc18e6e91ba050460e6557361" category="paragraph">NetApp XCP 文件分析 GUI 通过在后端使用 XCP 并可视化任何 NAS（NFS、SMB）文件系统的图表和视图等统计数据来帮助运行文件系统扫描。从 1.6 开始，XCP 可以通过使用配置和 systemctl 选项借助简单的部署步骤作为服务运行。  XCP 配置选项指导您安装和配置 Postgres 和 Web 服务器以及收集凭据。  systemctl 选项将 XCP 作为从 GUI 进行 REST API 通信的服务运行。</block>
  <block id="914cb171c700c273306e8265b56f4973" category="paragraph">下图说明了 XCP 文件分析流程。</block>
  <block id="e5a2360100f00b7d1df06d585a7cecd7" category="paragraph"><block ref="e5a2360100f00b7d1df06d585a7cecd7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9bcdbf2b32a87f7efd13f706d43954d5" category="inline-link">NetApp XCP 1.6 提供开放文件分析和基础架构改进</block>
  <block id="46742b2c1e11cf6a3e230ec3da7e6800" category="admonition">有关 XCP 文件分析的高级架构、基于 GUI 的仪表板视图（例如统计视图）和文件分发视图详细信息的更多信息，请参阅博客文章<block ref="924a0428223d35821b584a5368c0e3e5" category="inline-link-rx"></block>。</block>
  <block id="21bd6427119f8d9a06a7c5bce95d28ac" category="paragraph">XCP 1.6 中有一个有限的 GUI 可用于定制图形。要创建所需的图表，您可以使用 CLI 运行<block ref="430e727eb7fa4c8fdeb29b396f232465" prefix=" " category="inline-code"></block>带有匹配过滤器的扫描命令。请参阅以下示例。</block>
  <block id="168c81694a3b19988d829a9baeda23fd" category="list-text">使用以下命令生成一年多前修改过的文件列表<block ref="79b37c0e9765296c2ba8efc16a70d15f" prefix=" " category="inline-code"></block>和<block ref="af7e4e4bdf56fd6022afd2b0cf443794" prefix=" " category="inline-code"></block>过滤已消耗的空间。</block>
  <block id="de615506a73ca5960be54d36ba7fcd5b" category="list-text">查找超过一年的文件所使用的空间。</block>
  <block id="d2d1f03d5f19a1229103a85cc9224a61" category="list-text">查找一年多以前修改的数据的总大小和图形视图。</block>
  <block id="d706f3d28ee3e74f9a6829c882169af8" category="paragraph">以下报告是对一年多以前修改的文件的自定义示例扫描。</block>
  <block id="a0978ba9c77417afcf7317981c64ddf4" category="paragraph"><block ref="a0978ba9c77417afcf7317981c64ddf4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="945407c0c602d0c34ead1ebb5427a84b" category="summary">我们使用NetApp XCP 将数据从 GPFS 迁移到 NFS，以便 GPU 可以处理数据。  AI 通常处理来自网络文件系统的数据。</block>
  <block id="1f797a3a419cdffd442fc4b662974908" category="doc">高性能计算到ONTAP NFS</block>
  <block id="f87db56df58f80549df4ebf04cce1a1c" category="paragraph">此用例基于现场组织的请求。一些NetApp客户将其数据置于高性能计算环境中，这为训练模型提供了数据分析，并使研究机构能够洞察和理解大量数字数据。 NetApp现场工程师需要详细的程序将数据从 IBM 的 GPFS 提取到 NFS。我们使用NetApp XCP 将数据从 GPFS 迁移到 NFS，以便 GPU 可以处理数据。  AI 通常处理来自网络文件系统的数据。</block>
  <block id="0ce008ed1a75e69e9f21d1ad29ed23dd" category="paragraph">有关高性能计算到ONTAP NFS 用例、录制的演示和测试结果的更多信息，请参阅<block ref="c5fcc47a7dd315afaa32fcdac46ffd7d" category="inline-link-rx"></block>博客。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="5656514b86b003a4184e2f045e93b8bf" category="paragraph">有关使用NetApp XCP 将 MapR-FS 数据移动到ONTAP NFS 的详细步骤，请参阅附录 A：GPFS 到 NFS — 详细步骤<block ref="b527ff2bd5bdf6efde4443142bb0fa5f" category="inline-link-macro-rx"></block>。</block>
  <block id="89bddd14a9f02aeace6d5ffadf25e4f3" category="summary">本文档提供了NetApp XCP 最佳实践指南和基于测试场景的解决方案。这些最佳实践涵盖了本地和云的迁移工作流程、文件系统分析、故障排除和 XCP 的性能调整。</block>
  <block id="e7b1326bcbbf0b5513213b2373b5721a" category="doc">TR-4863： NetApp XCP 最佳实践指南 - 数据移动器、文件迁移和分析</block>
  <block id="439be0f3df9ab229e224aa3c8dbeca77" category="paragraph">Karthikeyan Nagalingam， NetApp</block>
  <block id="88d20f11fbf1788b5271fcc5d5297a41" category="paragraph">本文档提供了NetApp XCP 最佳实践指南和基于测试场景的解决方案。这些最佳实践涵盖了本地和云的迁移工作流程、文件系统分析、故障排除和 XCP 性能调整。测试场景部分涵盖客户用例及其要求、使用 XCP 的NetApp解决方案以及对客户的好处。</block>
  <block id="7776aec966d5a0c71bd4e8230f9470b8" category="summary">该用例基于电视网络客户。客户希望将 Oracle Recovery Manager (RMAN) 备份文件迁移到云中，并使用带有 Pacemaker 软件的Azure NetApp Files运行 Oracle E-Business Suite (EBS) 应用程序。客户还希望将其数据库备份文件迁移到按需云存储，并将大文件（每个文件在 25GB 到 50GB 范围内）传输到 Azure。</block>
  <block id="8108bac490ceb375198c578e8a439026" category="doc">使用 XCP 数据移动器迁移大文件</block>
  <block id="06470d7a09a56d555bad98bdf38a6cad" category="paragraph">下图说明了从本地到Azure NetApp Files 的大型文件数据迁移。</block>
  <block id="099a60093e7de3795f557974125ce82b" category="inline-link">NetApp XCP Data Mover 解决方案：从本地到云端</block>
  <block id="50d4edabefc40ad9614b567197696a2e" category="paragraph">有关详细信息，请参阅<block ref="2c0eb3741003532ef113837d4b882a9a" category="inline-link-rx"></block>博客。</block>
  <block id="89185de94c95d958df7a1d1f328c5d3d" category="summary">为了更好地规划和完成迁移，迁移有不同的阶段需要遵循。要使用NetApp XCP 从第三方 NAS 存储或直接连接的 NAS 导出存储迁移数据，请遵循本节提供的迁移指南。</block>
  <block id="ee5b035493cdde88f6472904ffe00677" category="doc">迁移工作流程</block>
  <block id="5b312b66520bbb17746eeb5c9959e4ef" category="paragraph">下图说明了从任何 NAS 到NetApp NAS 的迁移工作流程。</block>
  <block id="6fa324e6030ce162775387cdf89a7038" category="paragraph"><block ref="6fa324e6030ce162775387cdf89a7038" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0e69ccbb7ad96f546f7924206944bfa" category="section-title">本地</block>
  <block id="8df17c51ab4a9817f3fe7cea57052110" category="paragraph">从任何 NAS 到NetApp NAS 的迁移工作流程包括以下步骤：</block>
  <block id="3bd3dda9341b512ee536cc6e48d51a69" category="list-text">发现 NAS 共享和数据。</block>
  <block id="7800ed0aa4aebf1d63fd7120c2bcf538" category="list-text">扫描数据并生成报告以了解数据的布局。</block>
  <block id="8e9880476ad79e202d93a0a7d0bb5f5b" category="list-text">通过运行 XCP Copy 命令创建基线。为了更快地迁移，请选择更多 XCP 实例并在子文件夹级别拆分工作负载以启动并行迁移作业。</block>
  <block id="57324e972ea87c8e788d9831e510bc6d" category="list-text">对于增量更新，使用 XCP 同步，直到切换窗口的变化率较低。</block>
  <block id="3812202d715addac73d7122672d3c8d0" category="list-text">将源标记为只读，通过运行 XCP 同步命令执行最终同步来完成迁移。</block>
  <block id="2c1d8a91f274a7723f6ad2ffefc81b62" category="list-text">要验证数据是否正确传输，请通过运行<block ref="7cee3f697022ca3eab4ad2341c03bc2b" prefix=" " category="inline-code"></block>命令。</block>
  <block id="c8e2277ecfb1427838c488c217f99466" category="section-title">云</block>
  <block id="b98a6acc7ef428f1ae11e5177447df8c" category="paragraph">对于云，如果本地和云之间的连接是直接连接（AWS）、ExpressRoute（Azure）或云互连（GCP），则可以遵循类似的本地迁移工作流程。</block>
  <block id="8f4cde54f5af74d15d142ad98344aab6" category="paragraph">下图说明了从本地到云的迁移工作流程。</block>
  <block id="d00bf6ad8c605eb22251bbc368864d97" category="paragraph"><block ref="d00bf6ad8c605eb22251bbc368864d97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e2fef7fa18bd688132425321b9188bb" category="paragraph">如果本地和云之间没有直接的互联网连接，则必须通过卡车等离线数据传输方法将数据从本地传输到云。每个云服务提供商都有不同的方法和不同的术语将数据移动到他们的数据中心。</block>
  <block id="9e76bcaf48df4797c2e546f778fd72f8" category="paragraph">下图描述了不使用 ExpressRoute 的本地到 Azure 的数据移动器解决方案。</block>
  <block id="96ec65cb107ea9565a93dc1bb37c377c" category="paragraph"><block ref="96ec65cb107ea9565a93dc1bb37c377c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="423066080659363cc444ec5dee611f48" category="paragraph">您可以使用来自不同云服务提供商的具有相应组件的类似架构。</block>
  <block id="3d5c39f585b0e679dbfe0855d556f0af" category="summary">NetApp XCP 使用多线程和可定制功能传输数据。它专为三大用例而设计——数据移动或迁移、文件系统分析和快速目录树删除。</block>
  <block id="6efa8f47d1a76af77ce311b436e4dca9" category="doc">NetApp XCP</block>
  <block id="6416bf9c9c9445fbe2e15f69fa8371d2" category="paragraph">NetApp XCP 使用多线程和可定制功能传输数据。它专为三大用例而设计：数据移动或迁移、文件系统分析和快速目录树删除。</block>
  <block id="7817bd783e8db0557909483f54288eae" category="section-title">数据移动或迁移</block>
  <block id="a7786f240f16aadfd675c46be438f64e" category="paragraph">NetApp XCP 将数据从任何 NAS 传输到NetApp NAS。该过程由四个主要操作组成：扫描、复制、同步和验证。还有一些附加功能有助于数据监控和传输：</block>
  <block id="1c026a57d7676d346dd0d44a2f595c1d" category="list-text">*扫描。*提供 NAS 和 MapR/HDFS 数据的高级布局。</block>
  <block id="59e4194e1b171063beeb99722a68e7af" category="list-text">*复制。*执行基线数据传输。</block>
  <block id="a75ddee1308f2f19e478595122434544" category="list-text">*同步*执行增量数据传输。</block>
  <block id="ae4ab572ec7de44b385c01df54f00d17" category="list-text">*核实。*对目标进行彻底的验证。</block>
  <block id="8ddbaa98ade9dcd56d4960b7abd22525" category="list-text">*显示（可选）。*发现 NAS 共享。</block>
  <block id="4f4544fb0f8ed8f32e27a8b8651a46e6" category="paragraph">下图说明了 XCP 数据迁移和复制操作。</block>
  <block id="84ec01ef5a42a32bf6a4be26efb6b211" category="paragraph"><block ref="84ec01ef5a42a32bf6a4be26efb6b211" category="inline-image-macro-rx" type="image"></block></block>
  <block id="657bad21acd4ceb926477ced53a4ec55" category="section-title">文件系统分析</block>
  <block id="65424b0dc0515cfa3b67e71712012db0" category="paragraph">NetApp XCP 本身使您能够识别、审查和分析非结构化数据以提高洞察力 - 这是企业客户的关键要求，他们希望利用这些洞察力进行更好的规划、操作高价值数字资产以及通过报告和评估进行数据治理。</block>
  <block id="03c5a03e8b03794f5fa193e72245496c" category="paragraph">处理敏感数据的客户可以使用NetApp XCP 来回答典型的操作问题，例如：</block>
  <block id="6ad28c778baa08cff585599e160c12c8" category="list-text">我的数据在哪里？</block>
  <block id="5eccfafcfad0fb3dcd5f4f1036fed9f9" category="list-text">我们有多少数据以及哪些类型的文件？</block>
  <block id="b1c54971a6211d7b7e3d074bff16b4c9" category="list-text">哪些数据正在被积极使用，又有多少数据处于休眠状态？</block>
  <block id="6b2c974b2ada5fba492b8dcda598b1f9" category="paragraph">下图从 GUI 说明了NetApp XCP 文件分析通信。</block>
  <block id="94fd10847f826a54819e8b019c2a8033" category="paragraph"><block ref="94fd10847f826a54819e8b019c2a8033" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2a6c498fb90ee345d997f888fce3b18" category="section-title">删除</block>
  <block id="ed3210b66403f669b167621a65f9e6b4" category="paragraph">对于存储团队和电子设计自动化 (EDA) 工作负载来说，清理大型目录可能非常具有挑战性，无论是需要清理的陈旧数据还是测试数据以恢复存储空间。  XCP 提供了快速删除功能，可以删除完整的目录树。 NetApp XCP Delete 功能从给定的 NAS 路径中删除文件和文件夹。您可以利用匹配过滤器删除一组特定的文件和文件夹。对于大量文件和文件夹，您可以使用强制选项，该选项不需要确认即可删除。</block>
  <block id="ecfd5328aaeaeb8ab72037598049a32c" category="section-title">实时源迁移支持</block>
  <block id="2d3aa3941d30870beb3abde613ce14b1" category="paragraph">XCP 1.7 中包含的实时源迁移支持允许从正在使用（读取和写入活动）的数据源进行迁移。  XCP 忽略了迁移作业期间正在使用的文件（例如复制和同步运行），并且跳过的文件信息会被捕获在 XCP 日志中。</block>
  <block id="286a0f56c729672b0709605c558d0008" category="paragraph">此功能支持对源进行更改，但不支持对目标进行更改。在迁移期间，目标不应处于活动状态。实时源迁移支持仅适用于 NFS 迁移。</block>
  <block id="2c346a482fcf83bd03d1d51f65d58b8d" category="admonition">实时源迁移不需要特殊设置。</block>
  <block id="ba41152bc4991a294ab26fbe691d52e3" category="section-title">XCP 的先决条件</block>
  <block id="010e3e2a3d44100784dac368cdb601c0" category="paragraph">在部署NetApp XCP 之前，必须满足以下先决条件：</block>
  <block id="b76760dcfae800f7180ec4e8c57a8e2f" category="list-text">通过运行以下命令验证 NFS 服务器使用的 NFS 端口：</block>
  <block id="a9a9fca38da059af5a55e2fc58ef3851" category="list-text">要访问执行 XCP 操作的位置，例如本地或云实例（例如，Azure、AWS 或 Google 虚拟机 [VM] 实例），请打开 NFS 端口的防火墙端口。</block>
  <block id="b22a57ce186f512ec584f5aac1d3de34" category="list-text">使用 telnet 命令验证是否可以从 XCP 服务器访问 NFS 端口<block ref="450e3ef5096f09acecd7b33e07b6e190" prefix=" " category="inline-code"></block>。默认端口为 2049。如果您的环境有不同的端口，请使用该 IP。</block>
  <block id="e54a7adb3b7e28ed3d693d972fc48fd0" category="list-text">对于 NFS，使用以下命令验证是否可以从 XCP 服务器访问共享<block ref="3c4a3208b8bf46e9aa41c950ec1a73ba" prefix=" " category="inline-code"></block>命令。</block>
  <block id="da7f6a983e12f3b14b965ea651990ca9" category="list-text">将目标卷上的 inode 数量增加到大于源文件上的文件数（文件数）。</block>
  <block id="71858e85f290ec0f6955841bab9f3aef" category="inline-link">NetApp XCP 许可证门户</block>
  <block id="14324adbfb79ad4b6832f6a02a1275db" category="list-text">从下载 XCP 许可证<block ref="eab886d42d2df7a710066e6d9bf6f5f5" category="inline-link-rx"></block>。  </block>
  <block id="7481213bd7173438d06de418474e428b" category="list-text">您必须在 mysupport.netapp.com 上拥有一个NetApp帐户，或者您可以免费注册。</block>
  <block id="d25e9f08475ddf6a2701e7cfbd67ff06" category="list-text">下载许可证并做好准备。</block>
  <block id="b9611b870758eac97bd0c3bcb3fc8026" category="list-text">为每个 Azure NetApp卷或云中的云卷服务（高级服务级别）在本地创建一个 NFS 共享，用于 XCP 目录。</block>
  <block id="3d19c697861d11cce0f1d78d41cfea64" category="list-text">创建 NAS 卷并配置数据目标的共享。</block>
  <block id="4f2a304b9680876edc7cb61b5c4c7134" category="list-text">对于多个 XCP 实例，您必须有一个或多个服务器或云实例才能将数据从多个源文件夹或文件传输到目标。</block>
  <block id="adc4e34febc2f5919cfa03870630c2fc" category="list-text">maxdir 大小（默认值为 308MB）定义了单个文件夹中的最大文件数（约一百万）。增加 maxdir 大小值以增加文件数量。增加该值会对额外的 CPU 周期产生影响。</block>
  <block id="a1552408599f6e2171495d55ae375802" category="list-text">在云中， NetApp建议您在本地和云之间使用 ExpressRoute (Azure)、Direct Connect (AWS) 或 Cloud Interconnect (GCP)。</block>
  <block id="dc0b758a04bbb9e380300887d831e4e1" category="summary">本节提供了一些有助于提高 XCP 操作性能的调整参数。</block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="doc">性能调优</block>
  <block id="ec6136417c258c9b7f95c39765c5ca51" category="paragraph">本节提供了一些有助于提高 XCP 操作性能的调整参数：</block>
  <block id="dd10b781bf6dd686a8631401ce0fba96" category="list-text">为了更好地扩展并将工作负载分配到多个 XCP 实例，请拆分每个 XCP 实例的子文件夹以进行迁移和数据传输。</block>
  <block id="37e9b10f81fe31cb6b80609f724b34f8" category="list-text">XCP 可以使用最大的 CPU 资源——CPU 核心越多，性能越好。因此，您应该在 XCP 服务器中拥有更多 CPU。我们在实验室测试了 128GB RAM 和 48x 核心 CPU，其性能比 8x CPU 和 8GB RAM 更好。</block>
  <block id="a02c6dbd226d5506c1b4b07f6d383615" category="list-text">XCP 副本<block ref="7c497b25395c5c56889e20e941e5e84d" prefix=" " category="inline-code"></block>选项取决于 CPU 的数量。默认的并行线程数（七）有时足以满足大多数 XCP 数据传输和迁移操作的需求。对于 XCP Windows，默认情况下并行进程的数量等于 CPU 的数量。最大数量<block ref="7c497b25395c5c56889e20e941e5e84d" prefix=" " category="inline-code"></block>选项应小于或等于核心数。</block>
  <block id="740950b0e27cdd5def3c4295d5840851" category="list-text">10GbE 对于数据传输来说是一个良好的开端。但是，我们使用 25GbE 和 100GbE 进行了测试，它们提供了更好的数据传输，建议用于大文件数据传输。</block>
  <block id="a174d00dcd4849e0653429de84c71cde" category="list-text">对于Azure NetApp Files，性能因服务级别而异。有关详细信息，请参阅下表，其中显示了Azure NetApp Files服务级别和性能详细信息。</block>
  <block id="6d59be48f566a73e053e12167b279be5" category="cell">服务水平</block>
  <block id="eb6d8ae6f20283755b339c0dc273988b" category="cell">标准</block>
  <block id="8d5e7e72f12067991186cdf3cb7d5d9d" category="cell">高级</block>
  <block id="7057376a419b3334cc7b8b7a9f064abb" category="cell">极端主义者</block>
  <block id="0b85467ebafa7ca3c47e82dc38184484" category="cell">吞吐量</block>
  <block id="adcda45ec4de9aeb48e1893272b078d1" category="cell">16MBps/太字节（TB）</block>
  <block id="93209d2e9d1ed8d87a279cef886b5021" category="cell">64MBps/TB</block>
  <block id="f646efbbd60d091e92b32611965c4f1c" category="cell">128MBps/TB</block>
  <block id="4a9cc851fc41c5762618832386fa4937" category="cell">工作负载类型</block>
  <block id="11969136028e1ffaeed70de5e59bde33" category="cell">通用文件共享、电子邮件和 Web</block>
  <block id="76ab8c335a6bb24396ea1953bac75705" category="cell">BM、数据库和应用程序</block>
  <block id="9dab8e594b90062c0612cbb1676234ba" category="cell">延迟敏感型应用程序</block>
  <block id="0a568304277380e4cfb0f2d2abbd99b4" category="cell">性能说明</block>
  <block id="c55268b956eecd1d58f60723a410c808" category="cell">标准性能：每 TB 1,000 IOPS（16K I/O）和 16MBps/TB</block>
  <block id="536d2154a9035458ae8efd38b24f3ea7" category="cell">高级性能 – 每 TB 4,000 IOPS（16k I/O）和每 TB 64MBps</block>
  <block id="91ff77656b0dc231fcbe8f488a15a253" category="cell">极致性能：每 TB 8,000 IOPS（16k I/O）和每 TB 128MBps</block>
  <block id="121bc30e927e8a3d918fc90c0ec18fee" category="paragraph">您必须根据吞吐量和工作负载类型选择正确的服务级别。大多数客户从高级级别开始，并根据工作量改变服务级别。</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概述</block>
  <block id="1ebf7a1cb4f3826913a58c19018c694e" category="paragraph">本节介绍客户场景及其架构。</block>
  <block id="0706a8a70e2892183b45c55ef1394714" category="summary">本节提供针对 NFS 使用一百万个不同文件大小执行 XCP 复制和 XCP 同步操作的大致时间。</block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="doc">尺寸指南</block>
  <block id="5224a4cb1d59edb5630ae27e640409e9" category="section-title">根据测试估算的时间</block>
  <block id="7e9b65699b01d35aeff9dc16008da7a5" category="paragraph">XCP 复制和同步操作的测试使用与部署相同的测试平台。创建了8K、16K、1MB三组文件共一百万个文件，并实时进行修改。 XCP 同步功能在文件级别执行从源到目标的差异增量更新。增量更新操作是以下四个操作中的一个或多个：重命名现有文件和文件夹、将数据附加到现有文件、删除文件和文件夹以及包含其他硬链接、软链接和多链接。为了测试目的，我们重点关注重命名、附加、删除和链接操作。也就是说，对一百万个文件进行重命名、附加和删除等修改操作，其变化率在10%到90%之间。</block>
  <block id="1112334374c9149cc8ad8e80a76f2e56" category="paragraph">下图显示了XCP复制操作的结果。</block>
  <block id="2fe3d4f2fbe039237f28bc09395fc730" category="paragraph"><block ref="2fe3d4f2fbe039237f28bc09395fc730" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58fe8c2d511caf443cb23313cb89181b" category="paragraph">下图显示了 XCP Sync 重命名和链接操作的结果。</block>
  <block id="5c60cb7caced894362895bde00bfe5f0" category="paragraph"><block ref="5c60cb7caced894362895bde00bfe5f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2186640ac8cac7be2b0f3940d871bf04" category="paragraph">文件大小与<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>传输重命名的源文件的完成时间；图表是线性的。</block>
  <block id="de54b82b6e27abb7d6f924e14d40a351" category="paragraph">链接类型有软链接、硬链接和多链接。软链接被视为普通文件。文件的大小与完成 XCP 同步操作的时间无关。</block>
  <block id="db3eb29ec347d79a716c6235063b1955" category="paragraph">下图显示了 XCP 同步附加和删除操作的结果。</block>
  <block id="054855a8202f51740ee42887c676d6f9" category="paragraph"><block ref="054855a8202f51740ee42887c676d6f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f64c7d081568c95905b16364c19e1be1" category="paragraph">对于附加和删除操作，大文件比小文件需要更多时间。完成操作的时间与附加和删除更改的百分比呈线性关系。</block>
  <block id="ecc8d4faf16ec3b08a8badd1d71421d3" category="section-title">XCP 1.6.1 与 XCP 1.5 的比较</block>
  <block id="f599c9e924e3b854abd0ab58126fed43" category="paragraph">与以前的版本相比，XCP 1.6.3 和 1.7 提供了改进的性能。以下部分显示了 XCP 1.6.3 和 1.7 对一百万个文件（分别为 8K、16K 和 1MB）的同步性能比较。</block>
  <block id="b53776fdc2fd9fc721aaa6f03fd3d6a0" category="paragraph">下图显示了 XCP 1.6.3 与 1.7 的 XCP 同步性能结果（一百万个 8K 文件）。</block>
  <block id="ef2d7b9c8f5d4ec86388aa5b699c46ad" category="paragraph"><block ref="ef2d7b9c8f5d4ec86388aa5b699c46ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09a0804a78587affdd9192afd0f8c80c" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 的 XCP 同步性能结果（一百万个 16K 大小的文件）。</block>
  <block id="822b7667451d6c328a9104a195e751ae" category="paragraph"><block ref="822b7667451d6c328a9104a195e751ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b201508f1de849d630f98c0001fdc29" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 的 XCP 同步性能结果，其中一百万个文件的大小为 1MB。</block>
  <block id="6352a04123e3e2cf16b0d539d4d854ef" category="paragraph"><block ref="6352a04123e3e2cf16b0d539d4d854ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71c6a3c1c59fc41b371a18011d1d5c9b" category="paragraph">平均而言，XCP 1.7 的性能比 XCP 1.6.3 有所提高或相似，<block ref="d7c230358c5f1f129db01db058343ec4" prefix=" " category="inline-code"></block>差异增量更新——对一百万个 1MB 大小的文件进行重命名、附加、链接和删除操作。</block>
  <block id="61b90da0c91ea6cb7c16bfaca41b4920" category="paragraph">根据此性能验证， NetApp建议使用 XCP 1.7 进行本地和云端数据迁移。</block>
  <block id="b25f76deff236f93a3afa73c8a5b2a2c" category="summary">此用例基于NetApp旅游行业最大的客户，用于将数百万个小型本地文件迁移到云端。</block>
  <block id="4b1739353c6d18cea69ed6a274b7135f" category="doc">使用 XCP Data Mover 将数百万个小文件迁移到灵活存储</block>
  <block id="bb29cc4e9e4447f7bad1e81c1c5a9a1f" category="paragraph">此用例基于NetApp旅游行业最大的客户，用于本地到云的数据迁移。由于 COVID-19 减少了旅游行业的需求，客户希望节省其本地环境中用于需求定价应用程序的高端存储的资本支出。该客户有一个严格的 SLA，需要将数百万个小文件迁移到云端。</block>
  <block id="81ec900a5387f7a686d1451adaddf399" category="paragraph">下图描述了从本地到Azure NetApp Files 的小文件数据迁移。</block>
  <block id="6bb6d4bef3bcb552c41d2cd3909c5e2b" category="paragraph"><block ref="6bb6d4bef3bcb552c41d2cd3909c5e2b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="485f9678c52b78d051ddff564d873eb9" category="summary">本节中的命令以 CSV 格式转储数据。您可以将大小列相加以获得数据的总大小。</block>
  <block id="92f6d6878e37105d20e75151b95d4e6a" category="doc">从 SMB/CIFS 共享创建 CSV 文件</block>
  <block id="d122031c67144a65ca4721f8324ae0b3" category="paragraph">以下命令以 CSV 格式转储数据。您可以将大小列相加以获得数据的总大小。</block>
  <block id="1bed902c0754e4abc7598b7f1a0450e0" category="paragraph">输出应类似于此示例：</block>
  <block id="f7c322db5a6c805aed8a38858c7ba770" category="paragraph">要扫描最多三个子目录的深度并按排序顺序提供结果，请运行<block ref="cadccce7ea0e7fd5923a57bff135b0f1" prefix=" " category="inline-code"></block>命令并转储每个目录级别的大小，直至三个子目录的深度。</block>
  <block id="7c12bd6fa64456eb3a61460a4bbb98e6" category="paragraph">要排序，请将信息转储到 CSV 文件并对信息进行排序。</block>
  <block id="d0ecdc77c2c944d380e9fef0e01eb119" category="paragraph">这是一份自定义报告，使用<block ref="3c8468c40f21d7ea04242771207b5d3e" prefix=" " category="inline-code"></block>命令。它扫描所有目录并将目录名称、路径和目录大小转储到 CSV 文件中。您可以从电子表格应用程序中对大小列进行排序。</block>
  <block id="5dc302565fd7f552e134618ee18d2be2" category="summary">该解决方案基于需要根据特定日期复制数据的客户。</block>
  <block id="07f04efd2f421076b9aa06c4fee83be5" category="doc">基于特定日期的数据扫描和复制</block>
  <block id="e0b5216bc931e3e5fd7efb74ad10b1d3" category="paragraph">该解决方案基于需要根据特定日期复制数据的客户。验证以下详细信息：</block>
  <block id="a01ed8ff3f6e9e3ac0c0068a083281f2" category="summary">本节提供使用NetApp XCP 进行数据迁移的故障排除指导。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="95109c432d89e67182659615993ba75d" category="section-title">错误 1：XCP 失败，nfs3 错误 70：xcp.log 中的陈旧文件句柄错误</block>
  <block id="99b1b0e3547443c29793187326a64dbc" category="paragraph">*原因和指导。*</block>
  <block id="0774d3e8b775fcc34e680b302e85f3c1" category="paragraph">挂载源文件夹并验证该文件夹是否存在。如果它不存在或者已被删除，您将收到<block ref="00b68e4b07be7b89e91e391a70e312d1" prefix=" " category="inline-code"></block>错误，在这种情况下，您可以忽略该错误。</block>
  <block id="8fefb715a66a069c9e9318a58ecfdaee" category="section-title">错误 2： NetApp NFS 目标卷有空间，但 XCP 因 nfs3 错误 28 而失败：设备上没有剩余空间</block>
  <block id="bba52daa861e8093e201c3939f43057f" category="list-text">运行以下命令检查 NFS 目标卷的空间<block ref="eff7d5dba32b4da32d9a67a519434d3f" prefix=" " category="inline-code"></block>命令或检查存储。</block>
  <block id="20183145becc54cc822a80107f92f13d" category="list-text">检查存储控制器中的 inode。</block>
  <block id="fe3a96130e3ec3092026a84e4dd12e50" category="list-text">如果使用了 inode，请运行以下命令增加 inode 的数量：</block>
  <block id="b7f48285a38556f737d23fa1237223b6" category="sidebar">NetApp解决方案是一套战略和技术能力，强调NetApp产品和服务组合来支持客户最关键的业务需求。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">开始使用</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">什么是新的</block>
  <block id="ccc493a2581932a9a6600b5765d09a34" category="sidebar">数据迁移和数据保护</block>
  <block id="b47925278b8d4554af26873b2014425a" category="sidebar">使用网络保险库保护数据</block>
  <block id="a0aea7150cc890d61107a19774727135" category="sidebar">使用NetApp XCP 迁移数据</block>
  <block id="7e7f1c5d4d7286dd0eacdb55b77bf71e" category="sidebar">解决方案自动化</block>
  <block id="e95b75f557af9310f3d9c6299286a533" category="sidebar">解决方案请求和反馈</block>
  <block id="22d04ecae9fae88d0b8d4548a46a545b" category="sidebar">请求自动化</block>
  <block id="776ab15fef436c9315c14738509d299e" category="sidebar">提出新的解决方案</block>
  <block id="cfdaac8ef24ac5b2612570c34da00954" category="sidebar">提供解决方案反馈</block>
  <block id="aeb11413825c35abdf36736cbaa541ef" category="sidebar">数据管理解决方案</block>
  <block id="4a81e8ec0ee14531c5c58b43a11fef94" category="sidebar">设置自动化环境</block>
  <block id="2ea25799dfbdf6535d2966e8ee2bf938" category="sidebar">收集 CVO 和连接器部署的先决条件</block>
  <block id="811eae8a63930b219a2c177659b38954" category="sidebar">使用 Terraform 实现 Cloud Volumes 自动化</block>
  <block id="71db0707297ba2ce72d855d8e16388f5" category="sidebar">使用 AWS Lambda 函数Amazon FSx for NetApp ONTAP进行监控和自动调整大小</block>
  <block id="012802b4b1402c6dec50d0102bee3f01" category="sidebar">使用ONTAP Cyber Vault 进行数据保护</block>
  <block id="91d998bab304adb0fd27858a4295dcac" category="sidebar">ONTAP网络保险库</block>
  <block id="b26f33656c961ecb98b5af9c7a0aeced" category="sidebar">网络保险库术语</block>
  <block id="3a3cda7b970ba5ce23b78c82046a7f98" category="sidebar">ONTAP的网络保险库大小调整</block>
  <block id="10ba83f78fdef3df5920204fded5695e" category="sidebar">创建网络保险库</block>
  <block id="65544fede5194e806396489516027259" category="sidebar">使用 PowerShell 创建、强化和验证ONTAP网络保管库</block>
  <block id="501ba80bf3a6770838abb045c249be83" category="sidebar">创建网络保险库</block>
  <block id="a40aff84de45b5f7d4b957f4d0aed7f7" category="sidebar">网络保险库验证</block>
  <block id="4908cc4bd8bee8b3d7e9e6c6f128e31e" category="sidebar">网络保险库数据恢复</block>
  <block id="1a0371afb1275a9fe8fee76365c22e46" category="sidebar">网络保险库结论</block>
  <block id="1eff9302c319abb4fe8a4c919bb75125" category="sidebar">使用NetApp XCP 进行数据迁移</block>
  <block id="acf055fa7efae33ce06471f448ae1267" category="sidebar">客户场景</block>
  <block id="c5071cdf8081474104ef1eee5ec6d784" category="sidebar">使用 ACL 将 CIFS 数据从源存储箱迁移到ONTAP</block>
</blocks>